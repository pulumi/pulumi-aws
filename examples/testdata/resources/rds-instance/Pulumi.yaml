name: test

runtime:
  name: yaml

config:
  providerVersion:
    type: string

resources:

  provider:
    type: pulumi:providers:aws
    options:
      version: ${providerVersion}

  tested-resource:
    type: aws:rds/instance:Instance
    properties:
      engine: postgres
      instanceClass: db.t4g.micro
      allocatedStorage: 30
      name: mydbname-${pulumi.stack}
      username: mydbuser
      password: mypassword
      skipFinalSnapshot: true
    options:
      provider: ${provider}
