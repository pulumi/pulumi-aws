{"method":"/pulumirpc.LanguageRuntime/GetPluginInfo","request":{},"response":{"version":"3.173.0-dev.0"}}
{"method":"/pulumirpc.LanguageRuntime/GetRequiredPackages","request":{"info":{"entryPoint":".","options":{},"programDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts","rootDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts"}},"response":{"packages":[{"kind":"resource","name":"aws","version":"v7.0.0-alpha.0+dev"}]}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"invokeTransforms"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"parameterization"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"aliasSpecs"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"resourceReferences"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"outputValues"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"transforms"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"deletedWith"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"secrets"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"customTimeouts":{},"name":"iam-policy-doc-upgrade-test","object":{},"sourcePosition":{"column":19,"line":37,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/node_modules/@pulumi/runtime/stack.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"pulumi:pulumi:Stack"},"response":{"object":{},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test"}}
{"method":"/pulumirpc.ResourceProvider/Handshake","request":{"configureWithUrn":true,"engineAddress":"127.0.0.1:51022","programDirectory":"/Users/chall/.pulumi/plugins/resource-aws-v6.78.0","rootDirectory":"/Users/chall/.pulumi/plugins/resource-aws-v6.78.0","supportsRefreshBeforeUpdate":true}}
{"method":"/pulumirpc.ResourceProvider/GetPluginInfo","request":{},"response":{"version":"6.78.0"}}
{"method":"/pulumirpc.ResourceProvider/CheckConfig","request":{"name":"default_7_0_0_alpha_0_dev","news":{"version":"7.0.0-alpha.0+dev"},"olds":{},"type":"pulumi:providers:aws","urn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev"},"response":{"inputs":{"region":"us-east-2","skipCredentialsValidation":"false","skipRegionValidation":"true","version":"7.0.0-alpha.0+dev"}}}
{"method":"/pulumirpc.ResourceProvider/Configure","request":{"acceptResources":true,"acceptSecrets":true,"args":{"region":"us-east-2","skipCredentialsValidation":"false","skipRegionValidation":"true","version":"7.0.0-alpha.0+dev"},"id":"9a0af62e-0d8a-4e5a-92ce-a56fdff75fad","name":"default_7_0_0_alpha_0_dev","sendsOldInputs":true,"sendsOldInputsToDelete":true,"type":"pulumi:providers:aws","urn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev","variables":{"aws:config:region":"us-east-2","aws:config:skipCredentialsValidation":"false","aws:config:skipRegionValidation":"true"}},"response":{"supportsAutonamingConfiguration":true,"supportsPreview":true}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"ecr","news":{},"olds":{},"randomSeed":"UILP/vLie6BerglmFNO4sQhx7eXpjnDxLLVaBSnognE=","type":"aws:ecr/repository:Repository","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repository:Repository::ecr"},"response":{"inputs":{"__defaults":["imageTagMutability","name"],"imageTagMutability":"MUTABLE","name":"ecr-97146f4"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"queue","news":{},"olds":{},"randomSeed":"iZWgClxL6VhxkCbOV+Em40rDkNVJJcvliddVO+xrLLY=","type":"aws:sqs/queue:Queue","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"},"response":{"inputs":{"__defaults":["contentBasedDeduplication","delaySeconds","fifoQueue","maxMessageSize","messageRetentionSeconds","name","receiveWaitTimeSeconds","visibilityTimeoutSeconds"],"contentBasedDeduplication":false,"delaySeconds":0,"fifoQueue":false,"maxMessageSize":262144,"messageRetentionSeconds":345600,"name":"queue-0dcee87","receiveWaitTimeSeconds":0,"visibilityTimeoutSeconds":30}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"topic","news":{},"olds":{},"randomSeed":"9Ad2d171Gts4ca2mbhN8SIM53hzpjRXo8z9vkBIi2W4=","type":"aws:sns/topic:Topic","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic"},"response":{"inputs":{"__defaults":["contentBasedDeduplication","fifoTopic","name"],"contentBasedDeduplication":false,"fifoTopic":false,"name":"topic-9ee5060"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"test-bucket","news":{},"olds":{},"randomSeed":"/E3U//RfmGKXKmazEfR9cBTWUPAbD3UC8jaElG1rJsg=","type":"aws:s3/bucket:Bucket","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"},"response":{"inputs":{"__defaults":["acl","bucket","forceDestroy"],"acl":"private","bucket":"test-bucket-7aa8032","forceDestroy":false}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"dynamic-bucket","news":{},"olds":{},"randomSeed":"KqktwxCKDe9pKv+2ko70HWFjGwqS/7GtifqLVcH2xFc=","type":"aws:s3/bucket:Bucket","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket"},"response":{"inputs":{"__defaults":["acl","bucket","forceDestroy"],"acl":"private","bucket":"dynamic-bucket-f5aced1","forceDestroy":false}}}
{"method":"/pulumirpc.ResourceProvider/Invoke","request":{"args":{},"tok":"aws:index/getCallerIdentity:getCallerIdentity"},"response":{"return":{"accountId":"616138583583","arn":"arn:aws:sts::616138583583:assumed-role/AWSReservedSSO_AdministratorAccess_224e23fb315b65cb/chall@pulumi.com","id":"616138583583","userId":"AROAY65FYVYP6E2HSUXEV:chall@pulumi.com"}}}
{"method":"/pulumirpc.ResourceMonitor/Invoke","request":{"acceptResources":true,"args":{},"tok":"aws:index/getCallerIdentity:getCallerIdentity","version":"7.0.0-alpha.0+dev"},"response":{"return":{"accountId":"616138583583","arn":"arn:aws:sts::616138583583:assumed-role/AWSReservedSSO_AdministratorAccess_224e23fb315b65cb/chall@pulumi.com","id":"616138583583","userId":"AROAY65FYVYP6E2HSUXEV:chall@pulumi.com"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"base-role","news":{"assumeRolePolicy":{"Id":"comprehensive-policy-id","Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":["arn:aws:iam::616138583583:root"]},"Sid":"AllowAWSPrincipal"}],"Version":"2012-10-17"}},"olds":{},"randomSeed":"ov7CXH/7avaXik6Z+N8Ipy9rZ3YH5RU9dPqq+BzEpOw=","type":"aws:iam/role:Role","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"},"response":{"inputs":{"__defaults":["forceDetachPolicies","maxSessionDuration","name","path"],"assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\"]},\"Sid\":\"AllowAWSPrincipal\"}],\"Version\":\"2012-10-17\"}","forceDetachPolicies":false,"maxSessionDuration":3600,"name":"base-role-0ef3c02","path":"/"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"ecr","properties":{"__defaults":["imageTagMutability","name"],"imageTagMutability":"MUTABLE","name":"ecr-97146f4"},"type":"aws:ecr/repository:Repository","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repository:Repository::ecr"},"response":{"id":"ecr-97146f4","properties":{"__meta":"{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"delete\":1200000000000}}","arn":"arn:aws:ecr:us-east-2:616138583583:repository/ecr-97146f4","encryptionConfigurations":[{"encryptionType":"AES256","kmsKey":""}],"forceDelete":null,"id":"ecr-97146f4","imageScanningConfiguration":{"scanOnPush":false},"imageTagMutability":"MUTABLE","name":"ecr-97146f4","registryId":"616138583583","repositoryUrl":"616138583583.dkr.ecr.us-east-2.amazonaws.com/ecr-97146f4"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"name":"ecr","object":{},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","sourcePosition":{"column":14,"line":315,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:ecr/repository:Repository","version":"7.0.0-alpha.0+dev"},"response":{"id":"ecr-97146f4","object":{"__meta":"{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"delete\":1200000000000}}","arn":"arn:aws:ecr:us-east-2:616138583583:repository/ecr-97146f4","encryptionConfigurations":[{"encryptionType":"AES256","kmsKey":""}],"forceDelete":null,"id":"ecr-97146f4","imageScanningConfiguration":{"scanOnPush":false},"imageTagMutability":"MUTABLE","name":"ecr-97146f4","registryId":"616138583583","repositoryUrl":"616138583583.dkr.ecr.us-east-2.amazonaws.com/ecr-97146f4"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repository:Repository::ecr"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"base-role","properties":{"__defaults":["forceDetachPolicies","maxSessionDuration","name","path"],"assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\"]},\"Sid\":\"AllowAWSPrincipal\"}],\"Version\":\"2012-10-17\"}","forceDetachPolicies":false,"maxSessionDuration":3600,"name":"base-role-0ef3c02","path":"/"},"type":"aws:iam/role:Role","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"},"response":{"id":"base-role-0ef3c02","properties":{"arn":"arn:aws:iam::616138583583:role/base-role-0ef3c02","assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\"]},\"Sid\":\"AllowAWSPrincipal\"}],\"Version\":\"2012-10-17\"}","createDate":"2025-05-30T17:18:21Z","description":"","forceDetachPolicies":false,"id":"base-role-0ef3c02","inlinePolicies":[],"managedPolicyArns":[],"maxSessionDuration":3600,"name":"base-role-0ef3c02","namePrefix":"","path":"/","permissionsBoundary":"","uniqueId":"AROAY65FYVYP6RRQOAH2V"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"name":"base-role","object":{"assumeRolePolicy":{"Id":"comprehensive-policy-id","Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":["arn:aws:iam::616138583583:root"]},"Sid":"AllowAWSPrincipal"}],"Version":"2012-10-17"}},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"assumeRolePolicy":{}},"sourcePosition":{"column":18,"line":23,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:iam/role:Role","version":"7.0.0-alpha.0+dev"},"response":{"id":"base-role-0ef3c02","object":{"arn":"arn:aws:iam::616138583583:role/base-role-0ef3c02","assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\"]},\"Sid\":\"AllowAWSPrincipal\"}],\"Version\":\"2012-10-17\"}","createDate":"2025-05-30T17:18:21Z","description":"","forceDetachPolicies":false,"id":"base-role-0ef3c02","inlinePolicies":[],"managedPolicyArns":[],"maxSessionDuration":3600,"name":"base-role-0ef3c02","namePrefix":"","path":"/","permissionsBoundary":"","uniqueId":"AROAY65FYVYP6RRQOAH2V"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"ecr-policy","news":{"policy":{"Id":"RepoPolicy","Statement":[{"Action":["ecr:GetDownloadUrlForLayer","ecr:BatchGetImage","ecr:BatchCheckLayerAvailability"],"Effect":"Allow","Principal":{"AWS":"arn:aws:iam::616138583583:root"},"Sid":"AllowStatement"}],"Version":"2012-10-17"},"repository":"ecr-97146f4"},"olds":{},"randomSeed":"w4iDXYOEYjxu2Q/7u4J15R/u9SDA9fbg45B8yXDtuj0=","type":"aws:ecr/repositoryPolicy:RepositoryPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repositoryPolicy:RepositoryPolicy::ecr-policy"},"response":{"inputs":{"__defaults":[],"policy":"{\"Id\":\"RepoPolicy\",\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:root\"},\"Sid\":\"AllowStatement\"}],\"Version\":\"2012-10-17\"}","repository":"ecr-97146f4"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"comprehensive-role","news":{"assumeRolePolicy":{"Id":"comprehensive-policy-id","Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":["arn:aws:iam::616138583583:root","arn:aws:iam::616138583583:role/base-role-0ef3c02"]},"Sid":"AllowAWSPrincipal"},{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com","ec2.amazonaws.com"]},"Sid":"AllowServicePrincipal"},{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Federated":"arn:aws:iam::123456789012:saml-provider/ExampleProvider"},"Sid":"AllowFederatedPrincipal"}],"Version":"2012-10-17"}},"olds":{},"randomSeed":"yF+6PSFYpJ9UNETVEo5yGT3EgXBbM1oHFUsyKmOTJwM=","type":"aws:iam/role:Role","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"},"response":{"inputs":{"__defaults":["forceDetachPolicies","maxSessionDuration","name","path"],"assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\",\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"]},\"Sid\":\"AllowAWSPrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\",\"ec2.amazonaws.com\"]},\"Sid\":\"AllowServicePrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::123456789012:saml-provider/ExampleProvider\"},\"Sid\":\"AllowFederatedPrincipal\"}],\"Version\":\"2012-10-17\"}","forceDetachPolicies":false,"maxSessionDuration":3600,"name":"comprehensive-role-8463fe9","path":"/"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"ecr-policy","properties":{"__defaults":[],"policy":"{\"Id\":\"RepoPolicy\",\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:root\"},\"Sid\":\"AllowStatement\"}],\"Version\":\"2012-10-17\"}","repository":"ecr-97146f4"},"type":"aws:ecr/repositoryPolicy:RepositoryPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repositoryPolicy:RepositoryPolicy::ecr-policy"},"response":{"id":"ecr-97146f4","properties":{"id":"ecr-97146f4","policy":"{\"Id\":\"RepoPolicy\",\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:root\"},\"Sid\":\"AllowStatement\"}],\"Version\":\"2012-10-17\"}","registryId":"616138583583","repository":"ecr-97146f4"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repository:Repository::ecr"],"name":"ecr-policy","object":{"policy":{"Id":"RepoPolicy","Statement":[{"Action":["ecr:GetDownloadUrlForLayer","ecr:BatchGetImage","ecr:BatchCheckLayerAvailability"],"Effect":"Allow","Principal":{"AWS":"arn:aws:iam::616138583583:root"},"Sid":"AllowStatement"}],"Version":"2012-10-17"},"repository":"ecr-97146f4"},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"policy":{},"repository":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repository:Repository::ecr"]}},"sourcePosition":{"column":1,"line":316,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:ecr/repositoryPolicy:RepositoryPolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"ecr-97146f4","object":{"id":"ecr-97146f4","policy":"{\"Id\":\"RepoPolicy\",\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:root\"},\"Sid\":\"AllowStatement\"}],\"Version\":\"2012-10-17\"}","registryId":"616138583583","repository":"ecr-97146f4"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repositoryPolicy:RepositoryPolicy::ecr-policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"topic","properties":{"__defaults":["contentBasedDeduplication","fifoTopic","name"],"contentBasedDeduplication":false,"fifoTopic":false,"name":"topic-9ee5060"},"type":"aws:sns/topic:Topic","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic"},"response":{"id":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","properties":{"applicationFailureFeedbackRoleArn":"","applicationSuccessFeedbackRoleArn":"","applicationSuccessFeedbackSampleRate":0,"archivePolicy":"","arn":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","beginningArchiveTime":"","contentBasedDeduplication":false,"deliveryPolicy":"","displayName":"","fifoTopic":false,"firehoseFailureFeedbackRoleArn":"","firehoseSuccessFeedbackRoleArn":"","firehoseSuccessFeedbackSampleRate":0,"httpFailureFeedbackRoleArn":"","httpSuccessFeedbackRoleArn":"","httpSuccessFeedbackSampleRate":0,"id":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","kmsMasterKeyId":"","lambdaFailureFeedbackRoleArn":"","lambdaSuccessFeedbackRoleArn":"","lambdaSuccessFeedbackSampleRate":0,"name":"topic-9ee5060","namePrefix":"","owner":"616138583583","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"616138583583\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:us-east-2:616138583583:topic-9ee5060\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signatureVersion":0,"sqsFailureFeedbackRoleArn":"","sqsSuccessFeedbackRoleArn":"","sqsSuccessFeedbackSampleRate":0,"tracingConfig":""}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"name":"topic","object":{},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","sourcePosition":{"column":15,"line":336,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:sns/topic:Topic","version":"7.0.0-alpha.0+dev"},"response":{"id":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","object":{"applicationFailureFeedbackRoleArn":"","applicationSuccessFeedbackRoleArn":"","applicationSuccessFeedbackSampleRate":0,"archivePolicy":"","arn":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","beginningArchiveTime":"","contentBasedDeduplication":false,"deliveryPolicy":"","displayName":"","fifoTopic":false,"firehoseFailureFeedbackRoleArn":"","firehoseSuccessFeedbackRoleArn":"","firehoseSuccessFeedbackSampleRate":0,"httpFailureFeedbackRoleArn":"","httpSuccessFeedbackRoleArn":"","httpSuccessFeedbackSampleRate":0,"id":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","kmsMasterKeyId":"","lambdaFailureFeedbackRoleArn":"","lambdaSuccessFeedbackRoleArn":"","lambdaSuccessFeedbackSampleRate":0,"name":"topic-9ee5060","namePrefix":"","owner":"616138583583","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"616138583583\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:us-east-2:616138583583:topic-9ee5060\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signatureVersion":0,"sqsFailureFeedbackRoleArn":"","sqsSuccessFeedbackRoleArn":"","sqsSuccessFeedbackSampleRate":0,"tracingConfig":""},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic"}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"policy","news":{"arn":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","policy":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::616138583583:role/base-role-0ef3c02"},"Resource":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060"}],"Version":"2012-10-17"}},"olds":{},"randomSeed":"B0MDD/0EHjJv4siB8SqNtJULuIixu6FK1vD4Aeh1ajM=","type":"aws:sns/topicPolicy:TopicPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topicPolicy:TopicPolicy::policy"},"response":{"inputs":{"__defaults":[],"arn":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"},\"Resource\":\"arn:aws:sns:us-east-2:616138583583:topic-9ee5060\"}],\"Version\":\"2012-10-17\"}"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"test-bucket","properties":{"__defaults":["acl","bucket","forceDestroy"],"acl":"private","bucket":"test-bucket-7aa8032","forceDestroy":false},"type":"aws:s3/bucket:Bucket","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"},"response":{"id":"test-bucket-7aa8032","properties":{"accelerationStatus":"","acl":"private","arn":"arn:aws:s3:::test-bucket-7aa8032","bucket":"test-bucket-7aa8032","bucketDomainName":"test-bucket-7aa8032.s3.amazonaws.com","bucketPrefix":null,"bucketRegionalDomainName":"test-bucket-7aa8032.s3.us-east-2.amazonaws.com","corsRules":[],"forceDestroy":false,"grants":[],"hostedZoneId":"Z2O1EMRO9K5GLX","id":"test-bucket-7aa8032","lifecycleRules":[],"loggings":[],"objectLockConfiguration":null,"policy":null,"region":"us-east-2","replicationConfiguration":null,"requestPayer":"BucketOwner","serverSideEncryptionConfiguration":{"rule":{"applyServerSideEncryptionByDefault":{"kmsMasterKeyId":"","sseAlgorithm":"AES256"},"bucketKeyEnabled":false}},"versioning":{"enabled":false,"mfaDelete":false},"website":null,"websiteDomain":null,"websiteEndpoint":null}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"aliases":[{"spec":{"parentUrn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","type":"aws:s3/bucketV2:BucketV2"}},{"spec":{"parentUrn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","type":"aws:s3/bucketV2:BucketV2"}}],"custom":true,"customTimeouts":{},"name":"test-bucket","object":{},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","sourcePosition":{"column":16,"line":21,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:s3/bucket:Bucket","version":"7.0.0-alpha.0+dev"},"response":{"id":"test-bucket-7aa8032","object":{"accelerationStatus":"","acl":"private","arn":"arn:aws:s3:::test-bucket-7aa8032","bucket":"test-bucket-7aa8032","bucketDomainName":"test-bucket-7aa8032.s3.amazonaws.com","bucketPrefix":null,"bucketRegionalDomainName":"test-bucket-7aa8032.s3.us-east-2.amazonaws.com","corsRules":[],"forceDestroy":false,"grants":[],"hostedZoneId":"Z2O1EMRO9K5GLX","id":"test-bucket-7aa8032","lifecycleRules":[],"loggings":[],"objectLockConfiguration":null,"policy":null,"region":"us-east-2","replicationConfiguration":null,"requestPayer":"BucketOwner","serverSideEncryptionConfiguration":{"rule":{"applyServerSideEncryptionByDefault":{"kmsMasterKeyId":"","sseAlgorithm":"AES256"},"bucketKeyEnabled":false}},"versioning":{"enabled":false,"mfaDelete":false},"website":null,"websiteDomain":null,"websiteEndpoint":null},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"bucket-policy","news":{"bucket":"test-bucket-7aa8032","policy":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::616138583583:root"},"Resource":"arn:aws:s3:::test-bucket-7aa8032/*","Sid":"PrincipalTest"},{"Action":"s3:ListBucket","Effect":"Deny","NotPrincipal":{"AWS":["arn:aws:iam::616138583583:role/base-role-0ef3c02","arn:aws:iam::616138583583:root"]},"Resource":"arn:aws:s3:::test-bucket-7aa8032","Sid":"NotPrincipalTest"},{"Action":"s3:ListBucket","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"},"Resource":"arn:aws:s3:::test-bucket-7aa8032"},{"Action":["s3:ListBucket"],"Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com"]},"Resource":["arn:aws:s3:::test-bucket-7aa8032"]},{"Action":"s3:GetObject","Effect":"Deny","NotPrincipal":{"AWS":["arn:aws:iam::616138583583:role/base-role-0ef3c02","arn:aws:iam::616138583583:root"]},"NotResource":"arn:aws:s3:::test-bucket-7aa8032/logs/*","Sid":"ComprehensiveDenyTest"}],"Version":"2012-10-17"}},"olds":{},"randomSeed":"yQ9J0icfpD7GpYGqPotI7NA/DT9QygHB50imbM6/Gic=","type":"aws:s3/bucketPolicy:BucketPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucketPolicy:BucketPolicy::bucket-policy"},"response":{"inputs":{"__defaults":[],"bucket":"test-bucket-7aa8032","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:root\"},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"PrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-0ef3c02\",\"arn:aws:iam::616138583583:root\"]},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"NotPrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\"},{\"Action\":[\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]},\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032\"]},{\"Action\":\"s3:GetObject\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-0ef3c02\",\"arn:aws:iam::616138583583:root\"]},\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2012-10-17\"}"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"dynamic-bucket","properties":{"__defaults":["acl","bucket","forceDestroy"],"acl":"private","bucket":"dynamic-bucket-f5aced1","forceDestroy":false},"type":"aws:s3/bucket:Bucket","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket"},"response":{"id":"dynamic-bucket-f5aced1","properties":{"accelerationStatus":"","acl":"private","arn":"arn:aws:s3:::dynamic-bucket-f5aced1","bucket":"dynamic-bucket-f5aced1","bucketDomainName":"dynamic-bucket-f5aced1.s3.amazonaws.com","bucketPrefix":null,"bucketRegionalDomainName":"dynamic-bucket-f5aced1.s3.us-east-2.amazonaws.com","corsRules":[],"forceDestroy":false,"grants":[],"hostedZoneId":"Z2O1EMRO9K5GLX","id":"dynamic-bucket-f5aced1","lifecycleRules":[],"loggings":[],"objectLockConfiguration":null,"policy":null,"region":"us-east-2","replicationConfiguration":null,"requestPayer":"BucketOwner","serverSideEncryptionConfiguration":{"rule":{"applyServerSideEncryptionByDefault":{"kmsMasterKeyId":"","sseAlgorithm":"AES256"},"bucketKeyEnabled":false}},"versioning":{"enabled":false,"mfaDelete":false},"website":null,"websiteDomain":null,"websiteEndpoint":null}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"aliases":[{"spec":{"parentUrn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","type":"aws:s3/bucketV2:BucketV2"}},{"spec":{"parentUrn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","type":"aws:s3/bucketV2:BucketV2"}}],"custom":true,"customTimeouts":{},"name":"dynamic-bucket","object":{},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","sourcePosition":{"column":23,"line":292,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:s3/bucket:Bucket","version":"7.0.0-alpha.0+dev"},"response":{"id":"dynamic-bucket-f5aced1","object":{"accelerationStatus":"","acl":"private","arn":"arn:aws:s3:::dynamic-bucket-f5aced1","bucket":"dynamic-bucket-f5aced1","bucketDomainName":"dynamic-bucket-f5aced1.s3.amazonaws.com","bucketPrefix":null,"bucketRegionalDomainName":"dynamic-bucket-f5aced1.s3.us-east-2.amazonaws.com","corsRules":[],"forceDestroy":false,"grants":[],"hostedZoneId":"Z2O1EMRO9K5GLX","id":"dynamic-bucket-f5aced1","lifecycleRules":[],"loggings":[],"objectLockConfiguration":null,"policy":null,"region":"us-east-2","replicationConfiguration":null,"requestPayer":"BucketOwner","serverSideEncryptionConfiguration":{"rule":{"applyServerSideEncryptionByDefault":{"kmsMasterKeyId":"","sseAlgorithm":"AES256"},"bucketKeyEnabled":false}},"versioning":{"enabled":false,"mfaDelete":false},"website":null,"websiteDomain":null,"websiteEndpoint":null},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"policy","properties":{"__defaults":[],"arn":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"},\"Resource\":\"arn:aws:sns:us-east-2:616138583583:topic-9ee5060\"}],\"Version\":\"2012-10-17\"}"},"type":"aws:sns/topicPolicy:TopicPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topicPolicy:TopicPolicy::policy"},"response":{"id":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","properties":{"arn":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","id":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","owner":"616138583583","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"},\"Resource\":\"arn:aws:sns:us-east-2:616138583583:topic-9ee5060\"}],\"Version\":\"2012-10-17\"}"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"],"name":"policy","object":{"arn":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","policy":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::616138583583:role/base-role-0ef3c02"},"Resource":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060"}],"Version":"2012-10-17"}},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"arn":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic"]},"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"]}},"sourcePosition":{"column":1,"line":337,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:sns/topicPolicy:TopicPolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","object":{"arn":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","id":"arn:aws:sns:us-east-2:616138583583:topic-9ee5060","owner":"616138583583","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"},\"Resource\":\"arn:aws:sns:us-east-2:616138583583:topic-9ee5060\"}],\"Version\":\"2012-10-17\"}"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topicPolicy:TopicPolicy::policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"comprehensive-role","properties":{"__defaults":["forceDetachPolicies","maxSessionDuration","name","path"],"assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\",\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"]},\"Sid\":\"AllowAWSPrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\",\"ec2.amazonaws.com\"]},\"Sid\":\"AllowServicePrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::123456789012:saml-provider/ExampleProvider\"},\"Sid\":\"AllowFederatedPrincipal\"}],\"Version\":\"2012-10-17\"}","forceDetachPolicies":false,"maxSessionDuration":3600,"name":"comprehensive-role-8463fe9","path":"/"},"type":"aws:iam/role:Role","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"},"response":{"id":"comprehensive-role-8463fe9","properties":{"arn":"arn:aws:iam::616138583583:role/comprehensive-role-8463fe9","assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\",\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"]},\"Sid\":\"AllowAWSPrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\",\"ec2.amazonaws.com\"]},\"Sid\":\"AllowServicePrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::123456789012:saml-provider/ExampleProvider\"},\"Sid\":\"AllowFederatedPrincipal\"}],\"Version\":\"2012-10-17\"}","createDate":"2025-05-30T17:18:29Z","description":"","forceDetachPolicies":false,"id":"comprehensive-role-8463fe9","inlinePolicies":[],"managedPolicyArns":[],"maxSessionDuration":3600,"name":"comprehensive-role-8463fe9","namePrefix":"","path":"/","permissionsBoundary":"","uniqueId":"AROAY65FYVYPWBWYKP5LW"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"],"name":"comprehensive-role","object":{"assumeRolePolicy":{"Id":"comprehensive-policy-id","Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":["arn:aws:iam::616138583583:root","arn:aws:iam::616138583583:role/base-role-0ef3c02"]},"Sid":"AllowAWSPrincipal"},{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com","ec2.amazonaws.com"]},"Sid":"AllowServicePrincipal"},{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Federated":"arn:aws:iam::123456789012:saml-provider/ExampleProvider"},"Sid":"AllowFederatedPrincipal"}],"Version":"2012-10-17"}},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"assumeRolePolicy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"]}},"sourcePosition":{"column":27,"line":43,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:iam/role:Role","version":"7.0.0-alpha.0+dev"},"response":{"id":"comprehensive-role-8463fe9","object":{"arn":"arn:aws:iam::616138583583:role/comprehensive-role-8463fe9","assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\",\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"]},\"Sid\":\"AllowAWSPrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\",\"ec2.amazonaws.com\"]},\"Sid\":\"AllowServicePrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::123456789012:saml-provider/ExampleProvider\"},\"Sid\":\"AllowFederatedPrincipal\"}],\"Version\":\"2012-10-17\"}","createDate":"2025-05-30T17:18:29Z","description":"","forceDetachPolicies":false,"id":"comprehensive-role-8463fe9","inlinePolicies":[],"managedPolicyArns":[],"maxSessionDuration":3600,"name":"comprehensive-role-8463fe9","namePrefix":"","path":"/","permissionsBoundary":"","uniqueId":"AROAY65FYVYPWBWYKP5LW"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResourceOutputs","request":{"outputs":{"dynamicBucketArn":"arn:aws:s3:::dynamic-bucket-f5aced1","testBucket":"arn:aws:s3:::test-bucket-7aa8032","testRole":"arn:aws:iam::616138583583:role/comprehensive-role-8463fe9"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test"},"response":{}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"dynamic-policy","news":{"policy":{"Statement":[{"Action":"s3:*","Condition":{"StringEquals":{"s3:ExistingBucketName":"dynamic-bucket-f5aced1"}},"Effect":"Allow","Resource":["arn:aws:s3:::dynamic-bucket-f5aced1","arn:aws:s3:::dynamic-bucket-f5aced1/*"]}],"Version":"2012-10-17"},"role":"comprehensive-role-8463fe9"},"olds":{},"randomSeed":"gHAb1soTLc2OrOFHE783Kkv3r+tWFa0p8spDv37R5Oo=","type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::dynamic-policy"},"response":{"inputs":{"__defaults":["name"],"name":"dynamic-policy-ac27076","policy":"{\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"StringEquals\":{\"s3:ExistingBucketName\":\"dynamic-bucket-f5aced1\"}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::dynamic-bucket-f5aced1\",\"arn:aws:s3:::dynamic-bucket-f5aced1/*\"]}],\"Version\":\"2012-10-17\"}","role":"comprehensive-role-8463fe9"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"comprehensive-policy","news":{"policy":{"Id":"test-policy-document-id","Statement":[{"Action":["s3:GetObject","s3:PutObject","s3:DeleteObject"],"Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-7aa8032/*","Sid":"ActionArrayTest"},{"Action":"s3:ListBucket","Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-7aa8032","Sid":"ActionStringTest"},{"Effect":"Deny","NotAction":["s3:GetObject","s3:PutObject"],"Resource":"arn:aws:s3:::test-bucket-7aa8032","Sid":"NotActionTest"},{"Action":"s3:GetObject","Effect":"Allow","Resource":["arn:aws:s3:::test-bucket-7aa8032/*","arn:aws:s3:::test-bucket-7aa8032/public/*"],"Sid":"ResourceArrayTest"},{"Action":"s3:GetBucketLocation","Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-7aa8032","Sid":"ResourceStringTest"},{"Action":"s3:DeleteObject","Effect":"Deny","NotResource":"arn:aws:s3:::test-bucket-7aa8032/protected/*","Sid":"NotResourceTest"},{"Action":"s3:GetObject","Condition":{"ArnEquals":{"aws:SourceArn":"arn:aws:s3:::test-bucket-7aa8032"},"ArnLike":{"aws:SourceArn":"arn:aws:s3:::example-*"},"Bool":{"aws:MultiFactorAuthPresent":"true","aws:SecureTransport":"true"},"DateGreaterThan":{"aws:RequestTime":"2023-01-01T00:00:00Z"},"DateLessThan":{"aws:RequestTime":"2025-01-01T00:00:00Z"},"ForAllValues:StringEquals":{"aws:RequestTag/team":["dev","ops"]},"ForAnyValue:StringLike":{"s3:object-tag-keys":["environment","team"]},"IpAddress":{"aws:SourceIp":["203.0.113.0/24","2001:DB8:1234:5678::/64"]},"IpAddressIfExists":{"aws:SourceIp":"203.0.113.0/24"},"Null":{"aws:RequestTag/environment":"false"},"NumericGreaterThan":{"s3:max-keys":"100"},"NumericLessThanEquals":{"s3:object-size":"1048576"},"StringEquals":{"aws:RequestTag/environment":"production","s3:ExistingObjectTag/classification":["public","internal"]},"StringLike":{"s3:prefix":["${aws:username}/*","public/*"]},"StringNotEquals":{"aws:RequestTag/team":"external"}},"Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-7aa8032/*","Sid":"ComplexConditionsTest"}],"Version":"2012-10-17"},"role":"comprehensive-role-8463fe9"},"olds":{},"randomSeed":"u7qca8cs1WCJA2mvN+kE2Jo5xHySPlcmk39KZ1ynvoM=","type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::comprehensive-policy"},"response":{"inputs":{"__defaults":["name"],"name":"comprehensive-policy-4d9ed88","policy":"{\"Id\":\"test-policy-document-id\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"ActionArrayTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"ActionStringTest\"},{\"Effect\":\"Deny\",\"NotAction\":[\"s3:GetObject\",\"s3:PutObject\"],\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"NotActionTest\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032/*\",\"arn:aws:s3:::test-bucket-7aa8032/public/*\"],\"Sid\":\"ResourceArrayTest\"},{\"Action\":\"s3:GetBucketLocation\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"ResourceStringTest\"},{\"Action\":\"s3:DeleteObject\",\"Effect\":\"Deny\",\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/protected/*\",\"Sid\":\"NotResourceTest\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::test-bucket-7aa8032\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::example-*\"},\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\",\"aws:SecureTransport\":\"true\"},\"DateGreaterThan\":{\"aws:RequestTime\":\"2023-01-01T00:00:00Z\"},\"DateLessThan\":{\"aws:RequestTime\":\"2025-01-01T00:00:00Z\"},\"ForAllValues:StringEquals\":{\"aws:RequestTag/team\":[\"dev\",\"ops\"]},\"ForAnyValue:StringLike\":{\"s3:object-tag-keys\":[\"environment\",\"team\"]},\"IpAddress\":{\"aws:SourceIp\":[\"203.0.113.0/24\",\"2001:DB8:1234:5678::/64\"]},\"IpAddressIfExists\":{\"aws:SourceIp\":\"203.0.113.0/24\"},\"Null\":{\"aws:RequestTag/environment\":\"false\"},\"NumericGreaterThan\":{\"s3:max-keys\":\"100\"},\"NumericLessThanEquals\":{\"s3:object-size\":\"1048576\"},\"StringEquals\":{\"aws:RequestTag/environment\":\"production\",\"s3:ExistingObjectTag/classification\":[\"public\",\"internal\"]},\"StringLike\":{\"s3:prefix\":[\"${aws:username}/*\",\"public/*\"]},\"StringNotEquals\":{\"aws:RequestTag/team\":\"external\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"ComplexConditionsTest\"}],\"Version\":\"2012-10-17\"}","role":"comprehensive-role-8463fe9"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"edge-cases-policy","news":{"policy":{"Statement":[{"Action":["s3:GetObject"],"Effect":"Allow","Resource":["arn:aws:s3:::test-bucket-7aa8032"]},{"Condition":{"StringNotEquals":{"aws:RequestTag/approved":"true"}},"Effect":"Deny","NotAction":"s3:GetBucketLocation","NotResource":"arn:aws:s3:::test-bucket-7aa8032/logs/*","Sid":"ComprehensiveDenyTest"}],"Version":"2008-10-17"},"role":"comprehensive-role-8463fe9"},"olds":{},"randomSeed":"LhCIZd3ghkphwNgS7SRE0F1yMwLzG7Fn9ASQiHd2cq0=","type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::edge-cases-policy"},"response":{"inputs":{"__defaults":["name"],"name":"edge-cases-policy-1f0e43a","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032\"]},{\"Condition\":{\"StringNotEquals\":{\"aws:RequestTag/approved\":\"true\"}},\"Effect\":\"Deny\",\"NotAction\":\"s3:GetBucketLocation\",\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2008-10-17\"}","role":"comprehensive-role-8463fe9"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"dynamic-policy","properties":{"__defaults":["name"],"name":"dynamic-policy-ac27076","policy":"{\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"StringEquals\":{\"s3:ExistingBucketName\":\"dynamic-bucket-f5aced1\"}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::dynamic-bucket-f5aced1\",\"arn:aws:s3:::dynamic-bucket-f5aced1/*\"]}],\"Version\":\"2012-10-17\"}","role":"comprehensive-role-8463fe9"},"type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::dynamic-policy"},"response":{"id":"comprehensive-role-8463fe9:dynamic-policy-ac27076","properties":{"id":"comprehensive-role-8463fe9:dynamic-policy-ac27076","name":"dynamic-policy-ac27076","namePrefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"StringEquals\":{\"s3:ExistingBucketName\":\"dynamic-bucket-f5aced1\"}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::dynamic-bucket-f5aced1\",\"arn:aws:s3:::dynamic-bucket-f5aced1/*\"]}]}","role":"comprehensive-role-8463fe9"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"],"name":"dynamic-policy","object":{"policy":{"Statement":[{"Action":"s3:*","Condition":{"StringEquals":{"s3:ExistingBucketName":"dynamic-bucket-f5aced1"}},"Effect":"Allow","Resource":["arn:aws:s3:::dynamic-bucket-f5aced1","arn:aws:s3:::dynamic-bucket-f5aced1/*"]}],"Version":"2012-10-17"},"role":"comprehensive-role-8463fe9"},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket"]},"role":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"]}},"sourcePosition":{"column":1,"line":293,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:iam/rolePolicy:RolePolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"comprehensive-role-8463fe9:dynamic-policy-ac27076","object":{"id":"comprehensive-role-8463fe9:dynamic-policy-ac27076","name":"dynamic-policy-ac27076","namePrefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"StringEquals\":{\"s3:ExistingBucketName\":\"dynamic-bucket-f5aced1\"}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::dynamic-bucket-f5aced1\",\"arn:aws:s3:::dynamic-bucket-f5aced1/*\"]}]}","role":"comprehensive-role-8463fe9"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::dynamic-policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"comprehensive-policy","properties":{"__defaults":["name"],"name":"comprehensive-policy-4d9ed88","policy":"{\"Id\":\"test-policy-document-id\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"ActionArrayTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"ActionStringTest\"},{\"Effect\":\"Deny\",\"NotAction\":[\"s3:GetObject\",\"s3:PutObject\"],\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"NotActionTest\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032/*\",\"arn:aws:s3:::test-bucket-7aa8032/public/*\"],\"Sid\":\"ResourceArrayTest\"},{\"Action\":\"s3:GetBucketLocation\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"ResourceStringTest\"},{\"Action\":\"s3:DeleteObject\",\"Effect\":\"Deny\",\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/protected/*\",\"Sid\":\"NotResourceTest\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::test-bucket-7aa8032\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::example-*\"},\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\",\"aws:SecureTransport\":\"true\"},\"DateGreaterThan\":{\"aws:RequestTime\":\"2023-01-01T00:00:00Z\"},\"DateLessThan\":{\"aws:RequestTime\":\"2025-01-01T00:00:00Z\"},\"ForAllValues:StringEquals\":{\"aws:RequestTag/team\":[\"dev\",\"ops\"]},\"ForAnyValue:StringLike\":{\"s3:object-tag-keys\":[\"environment\",\"team\"]},\"IpAddress\":{\"aws:SourceIp\":[\"203.0.113.0/24\",\"2001:DB8:1234:5678::/64\"]},\"IpAddressIfExists\":{\"aws:SourceIp\":\"203.0.113.0/24\"},\"Null\":{\"aws:RequestTag/environment\":\"false\"},\"NumericGreaterThan\":{\"s3:max-keys\":\"100\"},\"NumericLessThanEquals\":{\"s3:object-size\":\"1048576\"},\"StringEquals\":{\"aws:RequestTag/environment\":\"production\",\"s3:ExistingObjectTag/classification\":[\"public\",\"internal\"]},\"StringLike\":{\"s3:prefix\":[\"${aws:username}/*\",\"public/*\"]},\"StringNotEquals\":{\"aws:RequestTag/team\":\"external\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"ComplexConditionsTest\"}],\"Version\":\"2012-10-17\"}","role":"comprehensive-role-8463fe9"},"type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::comprehensive-policy"},"response":{"id":"comprehensive-role-8463fe9:comprehensive-policy-4d9ed88","properties":{"id":"comprehensive-role-8463fe9:comprehensive-policy-4d9ed88","name":"comprehensive-policy-4d9ed88","namePrefix":"","policy":"{\"Version\":\"2012-10-17\",\"Id\":\"test-policy-document-id\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"ActionArrayTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"ActionStringTest\"},{\"Effect\":\"Deny\",\"NotAction\":[\"s3:GetObject\",\"s3:PutObject\"],\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"NotActionTest\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032/*\",\"arn:aws:s3:::test-bucket-7aa8032/public/*\"],\"Sid\":\"ResourceArrayTest\"},{\"Action\":\"s3:GetBucketLocation\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"ResourceStringTest\"},{\"Action\":\"s3:DeleteObject\",\"Effect\":\"Deny\",\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/protected/*\",\"Sid\":\"NotResourceTest\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::test-bucket-7aa8032\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::example-*\"},\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\",\"aws:SecureTransport\":\"true\"},\"DateGreaterThan\":{\"aws:RequestTime\":\"2023-01-01T00:00:00Z\"},\"DateLessThan\":{\"aws:RequestTime\":\"2025-01-01T00:00:00Z\"},\"ForAllValues:StringEquals\":{\"aws:RequestTag/team\":[\"dev\",\"ops\"]},\"ForAnyValue:StringLike\":{\"s3:object-tag-keys\":[\"environment\",\"team\"]},\"IpAddress\":{\"aws:SourceIp\":[\"203.0.113.0/24\",\"2001:DB8:1234:5678::/64\"]},\"IpAddressIfExists\":{\"aws:SourceIp\":\"203.0.113.0/24\"},\"Null\":{\"aws:RequestTag/environment\":\"false\"},\"NumericGreaterThan\":{\"s3:max-keys\":\"100\"},\"NumericLessThanEquals\":{\"s3:object-size\":\"1048576\"},\"StringEquals\":{\"aws:RequestTag/environment\":\"production\",\"s3:ExistingObjectTag/classification\":[\"public\",\"internal\"]},\"StringLike\":{\"s3:prefix\":[\"${aws:username}/*\",\"public/*\"]},\"StringNotEquals\":{\"aws:RequestTag/team\":\"external\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"ComplexConditionsTest\"}]}","role":"comprehensive-role-8463fe9"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"],"name":"comprehensive-policy","object":{"policy":{"Id":"test-policy-document-id","Statement":[{"Action":["s3:GetObject","s3:PutObject","s3:DeleteObject"],"Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-7aa8032/*","Sid":"ActionArrayTest"},{"Action":"s3:ListBucket","Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-7aa8032","Sid":"ActionStringTest"},{"Effect":"Deny","NotAction":["s3:GetObject","s3:PutObject"],"Resource":"arn:aws:s3:::test-bucket-7aa8032","Sid":"NotActionTest"},{"Action":"s3:GetObject","Effect":"Allow","Resource":["arn:aws:s3:::test-bucket-7aa8032/*","arn:aws:s3:::test-bucket-7aa8032/public/*"],"Sid":"ResourceArrayTest"},{"Action":"s3:GetBucketLocation","Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-7aa8032","Sid":"ResourceStringTest"},{"Action":"s3:DeleteObject","Effect":"Deny","NotResource":"arn:aws:s3:::test-bucket-7aa8032/protected/*","Sid":"NotResourceTest"},{"Action":"s3:GetObject","Condition":{"ArnEquals":{"aws:SourceArn":"arn:aws:s3:::test-bucket-7aa8032"},"ArnLike":{"aws:SourceArn":"arn:aws:s3:::example-*"},"Bool":{"aws:MultiFactorAuthPresent":"true","aws:SecureTransport":"true"},"DateGreaterThan":{"aws:RequestTime":"2023-01-01T00:00:00Z"},"DateLessThan":{"aws:RequestTime":"2025-01-01T00:00:00Z"},"ForAllValues:StringEquals":{"aws:RequestTag/team":["dev","ops"]},"ForAnyValue:StringLike":{"s3:object-tag-keys":["environment","team"]},"IpAddress":{"aws:SourceIp":["203.0.113.0/24","2001:DB8:1234:5678::/64"]},"IpAddressIfExists":{"aws:SourceIp":"203.0.113.0/24"},"Null":{"aws:RequestTag/environment":"false"},"NumericGreaterThan":{"s3:max-keys":"100"},"NumericLessThanEquals":{"s3:object-size":"1048576"},"StringEquals":{"aws:RequestTag/environment":"production","s3:ExistingObjectTag/classification":["public","internal"]},"StringLike":{"s3:prefix":["${aws:username}/*","public/*"]},"StringNotEquals":{"aws:RequestTag/team":"external"}},"Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-7aa8032/*","Sid":"ComplexConditionsTest"}],"Version":"2012-10-17"},"role":"comprehensive-role-8463fe9"},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"]},"role":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"]}},"sourcePosition":{"column":1,"line":81,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:iam/rolePolicy:RolePolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"comprehensive-role-8463fe9:comprehensive-policy-4d9ed88","object":{"id":"comprehensive-role-8463fe9:comprehensive-policy-4d9ed88","name":"comprehensive-policy-4d9ed88","namePrefix":"","policy":"{\"Version\":\"2012-10-17\",\"Id\":\"test-policy-document-id\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"ActionArrayTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"ActionStringTest\"},{\"Effect\":\"Deny\",\"NotAction\":[\"s3:GetObject\",\"s3:PutObject\"],\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"NotActionTest\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032/*\",\"arn:aws:s3:::test-bucket-7aa8032/public/*\"],\"Sid\":\"ResourceArrayTest\"},{\"Action\":\"s3:GetBucketLocation\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"ResourceStringTest\"},{\"Action\":\"s3:DeleteObject\",\"Effect\":\"Deny\",\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/protected/*\",\"Sid\":\"NotResourceTest\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::test-bucket-7aa8032\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::example-*\"},\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\",\"aws:SecureTransport\":\"true\"},\"DateGreaterThan\":{\"aws:RequestTime\":\"2023-01-01T00:00:00Z\"},\"DateLessThan\":{\"aws:RequestTime\":\"2025-01-01T00:00:00Z\"},\"ForAllValues:StringEquals\":{\"aws:RequestTag/team\":[\"dev\",\"ops\"]},\"ForAnyValue:StringLike\":{\"s3:object-tag-keys\":[\"environment\",\"team\"]},\"IpAddress\":{\"aws:SourceIp\":[\"203.0.113.0/24\",\"2001:DB8:1234:5678::/64\"]},\"IpAddressIfExists\":{\"aws:SourceIp\":\"203.0.113.0/24\"},\"Null\":{\"aws:RequestTag/environment\":\"false\"},\"NumericGreaterThan\":{\"s3:max-keys\":\"100\"},\"NumericLessThanEquals\":{\"s3:object-size\":\"1048576\"},\"StringEquals\":{\"aws:RequestTag/environment\":\"production\",\"s3:ExistingObjectTag/classification\":[\"public\",\"internal\"]},\"StringLike\":{\"s3:prefix\":[\"${aws:username}/*\",\"public/*\"]},\"StringNotEquals\":{\"aws:RequestTag/team\":\"external\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"ComplexConditionsTest\"}]}","role":"comprehensive-role-8463fe9"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::comprehensive-policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"edge-cases-policy","properties":{"__defaults":["name"],"name":"edge-cases-policy-1f0e43a","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032\"]},{\"Condition\":{\"StringNotEquals\":{\"aws:RequestTag/approved\":\"true\"}},\"Effect\":\"Deny\",\"NotAction\":\"s3:GetBucketLocation\",\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2008-10-17\"}","role":"comprehensive-role-8463fe9"},"type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::edge-cases-policy"},"response":{"id":"comprehensive-role-8463fe9:edge-cases-policy-1f0e43a","properties":{"id":"comprehensive-role-8463fe9:edge-cases-policy-1f0e43a","name":"edge-cases-policy-1f0e43a","namePrefix":"","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032\"]},{\"Condition\":{\"StringNotEquals\":{\"aws:RequestTag/approved\":\"true\"}},\"Effect\":\"Deny\",\"NotAction\":\"s3:GetBucketLocation\",\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2008-10-17\"}","role":"comprehensive-role-8463fe9"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"],"name":"edge-cases-policy","object":{"policy":{"Statement":[{"Action":["s3:GetObject"],"Effect":"Allow","Resource":["arn:aws:s3:::test-bucket-7aa8032"]},{"Condition":{"StringNotEquals":{"aws:RequestTag/approved":"true"}},"Effect":"Deny","NotAction":"s3:GetBucketLocation","NotResource":"arn:aws:s3:::test-bucket-7aa8032/logs/*","Sid":"ComprehensiveDenyTest"}],"Version":"2008-10-17"},"role":"comprehensive-role-8463fe9"},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"]},"role":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"]}},"sourcePosition":{"column":1,"line":264,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:iam/rolePolicy:RolePolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"comprehensive-role-8463fe9:edge-cases-policy-1f0e43a","object":{"id":"comprehensive-role-8463fe9:edge-cases-policy-1f0e43a","name":"edge-cases-policy-1f0e43a","namePrefix":"","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032\"]},{\"Condition\":{\"StringNotEquals\":{\"aws:RequestTag/approved\":\"true\"}},\"Effect\":\"Deny\",\"NotAction\":\"s3:GetBucketLocation\",\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2008-10-17\"}","role":"comprehensive-role-8463fe9"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::edge-cases-policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"bucket-policy","properties":{"__defaults":[],"bucket":"test-bucket-7aa8032","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:root\"},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"PrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-0ef3c02\",\"arn:aws:iam::616138583583:root\"]},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"NotPrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\"},{\"Action\":[\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]},\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032\"]},{\"Action\":\"s3:GetObject\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-0ef3c02\",\"arn:aws:iam::616138583583:root\"]},\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2012-10-17\"}"},"type":"aws:s3/bucketPolicy:BucketPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucketPolicy:BucketPolicy::bucket-policy"},"response":{"id":"test-bucket-7aa8032","properties":{"bucket":"test-bucket-7aa8032","id":"test-bucket-7aa8032","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:root\"},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"PrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-0ef3c02\",\"arn:aws:iam::616138583583:root\"]},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"NotPrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\"},{\"Action\":[\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]},\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032\"]},{\"Action\":\"s3:GetObject\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-0ef3c02\",\"arn:aws:iam::616138583583:root\"]},\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2012-10-17\"}"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"],"name":"bucket-policy","object":{"bucket":"test-bucket-7aa8032","policy":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::616138583583:root"},"Resource":"arn:aws:s3:::test-bucket-7aa8032/*","Sid":"PrincipalTest"},{"Action":"s3:ListBucket","Effect":"Deny","NotPrincipal":{"AWS":["arn:aws:iam::616138583583:role/base-role-0ef3c02","arn:aws:iam::616138583583:root"]},"Resource":"arn:aws:s3:::test-bucket-7aa8032","Sid":"NotPrincipalTest"},{"Action":"s3:ListBucket","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"},"Resource":"arn:aws:s3:::test-bucket-7aa8032"},{"Action":["s3:ListBucket"],"Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com"]},"Resource":["arn:aws:s3:::test-bucket-7aa8032"]},{"Action":"s3:GetObject","Effect":"Deny","NotPrincipal":{"AWS":["arn:aws:iam::616138583583:role/base-role-0ef3c02","arn:aws:iam::616138583583:root"]},"NotResource":"arn:aws:s3:::test-bucket-7aa8032/logs/*","Sid":"ComprehensiveDenyTest"}],"Version":"2012-10-17"}},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"bucket":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"]},"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"]}},"sourcePosition":{"column":1,"line":203,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:s3/bucketPolicy:BucketPolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"test-bucket-7aa8032","object":{"bucket":"test-bucket-7aa8032","id":"test-bucket-7aa8032","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:root\"},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032/*\",\"Sid\":\"PrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-0ef3c02\",\"arn:aws:iam::616138583583:root\"]},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\",\"Sid\":\"NotPrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::test-bucket-7aa8032\"},{\"Action\":[\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]},\"Resource\":[\"arn:aws:s3:::test-bucket-7aa8032\"]},{\"Action\":\"s3:GetObject\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-0ef3c02\",\"arn:aws:iam::616138583583:root\"]},\"NotResource\":\"arn:aws:s3:::test-bucket-7aa8032/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2012-10-17\"}"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucketPolicy:BucketPolicy::bucket-policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"queue","properties":{"__defaults":["contentBasedDeduplication","delaySeconds","fifoQueue","maxMessageSize","messageRetentionSeconds","name","receiveWaitTimeSeconds","visibilityTimeoutSeconds"],"contentBasedDeduplication":false,"delaySeconds":0,"fifoQueue":false,"maxMessageSize":262144,"messageRetentionSeconds":345600,"name":"queue-0dcee87","receiveWaitTimeSeconds":0,"visibilityTimeoutSeconds":30},"type":"aws:sqs/queue:Queue","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"},"response":{"id":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87","properties":{"__meta":"{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":180000000000,\"delete\":180000000000,\"update\":180000000000}}","arn":"arn:aws:sqs:us-east-2:616138583583:queue-0dcee87","contentBasedDeduplication":false,"deduplicationScope":"","delaySeconds":0,"fifoQueue":false,"fifoThroughputLimit":"","id":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87","kmsDataKeyReusePeriodSeconds":300,"kmsMasterKeyId":"","maxMessageSize":262144,"messageRetentionSeconds":345600,"name":"queue-0dcee87","namePrefix":"","policy":"","receiveWaitTimeSeconds":0,"redriveAllowPolicy":"","redrivePolicy":"","sqsManagedSseEnabled":true,"url":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87","visibilityTimeoutSeconds":30}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"name":"queue","object":{},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","sourcePosition":{"column":15,"line":352,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:sqs/queue:Queue","version":"7.0.0-alpha.0+dev"},"response":{"id":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87","object":{"__meta":"{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":180000000000,\"delete\":180000000000,\"update\":180000000000}}","arn":"arn:aws:sqs:us-east-2:616138583583:queue-0dcee87","contentBasedDeduplication":false,"deduplicationScope":"","delaySeconds":0,"fifoQueue":false,"fifoThroughputLimit":"","id":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87","kmsDataKeyReusePeriodSeconds":300,"kmsMasterKeyId":"","maxMessageSize":262144,"messageRetentionSeconds":345600,"name":"queue-0dcee87","namePrefix":"","policy":"","receiveWaitTimeSeconds":0,"redriveAllowPolicy":"","redrivePolicy":"","sqsManagedSseEnabled":true,"url":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87","visibilityTimeoutSeconds":30},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"q-policy","news":{"policy":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::616138583583:role/base-role-0ef3c02"},"Resource":"arn:aws:sqs:us-east-2:616138583583:queue-0dcee87"}],"Version":"2012-10-17"},"queueUrl":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87"},"olds":{},"randomSeed":"IrRvlyjXx5hDdHnnsKGpyZfWMdFwxkP5xV623tzKx+I=","type":"aws:sqs/queuePolicy:QueuePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queuePolicy:QueuePolicy::q-policy"},"response":{"inputs":{"__defaults":[],"policy":"{\"Statement\":[{\"Action\":\"sqs:SendMessage\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"},\"Resource\":\"arn:aws:sqs:us-east-2:616138583583:queue-0dcee87\"}],\"Version\":\"2012-10-17\"}","queueUrl":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"q-policy","properties":{"__defaults":[],"policy":"{\"Statement\":[{\"Action\":\"sqs:SendMessage\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"},\"Resource\":\"arn:aws:sqs:us-east-2:616138583583:queue-0dcee87\"}],\"Version\":\"2012-10-17\"}","queueUrl":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87"},"type":"aws:sqs/queuePolicy:QueuePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queuePolicy:QueuePolicy::q-policy"},"response":{"id":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87","properties":{"__meta":"{\"schema_version\":\"1\"}","id":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87","policy":"{\"Statement\":[{\"Action\":\"sqs:SendMessage\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"},\"Resource\":\"arn:aws:sqs:us-east-2:616138583583:queue-0dcee87\"}],\"Version\":\"2012-10-17\"}","queueUrl":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role","urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"],"name":"q-policy","object":{"policy":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::616138583583:role/base-role-0ef3c02"},"Resource":"arn:aws:sqs:us-east-2:616138583583:queue-0dcee87"}],"Version":"2012-10-17"},"queueUrl":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87"},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role","urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"]},"queueUrl":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"]}},"sourcePosition":{"column":1,"line":353,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:sqs/queuePolicy:QueuePolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87","object":{"__meta":"{\"schema_version\":\"1\"}","id":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87","policy":"{\"Statement\":[{\"Action\":\"sqs:SendMessage\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:role/base-role-0ef3c02\"},\"Resource\":\"arn:aws:sqs:us-east-2:616138583583:queue-0dcee87\"}],\"Version\":\"2012-10-17\"}","queueUrl":"https://sqs.us-east-2.amazonaws.com/616138583583/queue-0dcee87"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queuePolicy:QueuePolicy::q-policy"}}
{"method":"/pulumirpc.LanguageRuntime/Run","request":{"configPropertyMap":{},"info":{"entryPoint":".","options":{},"programDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts","rootDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts"},"loaderTarget":"127.0.0.1:51027","monitorAddress":"127.0.0.1:51026","organization":"organization","parallel":56,"program":".","project":"iam-policy-doc-upgrade","pwd":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2377958063/007/ts","stack":"test"},"response":{}}
{"method":"/grpc.health.v1.Health/Check","request":{},"response":{"status":"SERVING"}}
{"method":"/grpc.health.v1.Health/Check","request":{},"response":{"status":"SERVING"}}