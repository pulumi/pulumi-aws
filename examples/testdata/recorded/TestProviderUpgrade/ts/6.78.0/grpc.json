{"method":"/pulumirpc.LanguageRuntime/GetPluginInfo","request":{},"response":{"version":"3.173.0-dev.0"}}
{"method":"/pulumirpc.LanguageRuntime/GetRequiredPackages","request":{"info":{"entryPoint":".","options":{},"programDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts","rootDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts"}},"response":{"packages":[{"kind":"resource","name":"aws","version":"v7.0.0-alpha.0+dev"}]}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"deletedWith"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"resourceReferences"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"invokeTransforms"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"secrets"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"aliasSpecs"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"transforms"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"parameterization"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"outputValues"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"customTimeouts":{},"name":"iam-policy-doc-upgrade-test","object":{},"sourcePosition":{"column":19,"line":37,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/node_modules/@pulumi/runtime/stack.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"pulumi:pulumi:Stack"},"response":{"object":{},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test"}}
{"method":"/pulumirpc.ResourceProvider/Handshake","request":{"configureWithUrn":true,"engineAddress":"127.0.0.1:53967","programDirectory":"/Users/chall/.pulumi/plugins/resource-aws-v6.78.0","rootDirectory":"/Users/chall/.pulumi/plugins/resource-aws-v6.78.0","supportsRefreshBeforeUpdate":true}}
{"method":"/pulumirpc.ResourceProvider/GetPluginInfo","request":{},"response":{"version":"6.78.0"}}
{"method":"/pulumirpc.ResourceProvider/CheckConfig","request":{"name":"default_7_0_0_alpha_0_dev","news":{"version":"7.0.0-alpha.0+dev"},"olds":{},"type":"pulumi:providers:aws","urn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev"},"response":{"inputs":{"region":"us-west-2","skipCredentialsValidation":"false","skipRegionValidation":"true","version":"7.0.0-alpha.0+dev"}}}
{"method":"/pulumirpc.ResourceProvider/Configure","request":{"acceptResources":true,"acceptSecrets":true,"args":{"region":"us-west-2","skipCredentialsValidation":"false","skipRegionValidation":"true","version":"7.0.0-alpha.0+dev"},"id":"fcabde8b-1052-47fb-8aab-e9f98b196062","name":"default_7_0_0_alpha_0_dev","sendsOldInputs":true,"sendsOldInputsToDelete":true,"type":"pulumi:providers:aws","urn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev","variables":{"aws:config:region":"us-west-2","aws:config:skipCredentialsValidation":"false","aws:config:skipRegionValidation":"true"}},"response":{"supportsAutonamingConfiguration":true,"supportsPreview":true}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"ecr","news":{},"olds":{},"randomSeed":"Eu415ZjoeCI1ff3d4+FJgc6Dv27XtsxKjYNmhDbHYBk=","type":"aws:ecr/repository:Repository","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repository:Repository::ecr"},"response":{"inputs":{"__defaults":["imageTagMutability","name"],"imageTagMutability":"MUTABLE","name":"ecr-c365347"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"queue","news":{},"olds":{},"randomSeed":"POSSkfjP9Ktxhcimx8Yk72ymSmVzd6oRuvYaimXearo=","type":"aws:sqs/queue:Queue","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"},"response":{"inputs":{"__defaults":["contentBasedDeduplication","delaySeconds","fifoQueue","maxMessageSize","messageRetentionSeconds","name","receiveWaitTimeSeconds","visibilityTimeoutSeconds"],"contentBasedDeduplication":false,"delaySeconds":0,"fifoQueue":false,"maxMessageSize":262144,"messageRetentionSeconds":345600,"name":"queue-e7417f6","receiveWaitTimeSeconds":0,"visibilityTimeoutSeconds":30}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"topic","news":{},"olds":{},"randomSeed":"Bq0zncjYHHdF7QaKzI4n7wm2gPENsVZpF7+ZIeS0Edg=","type":"aws:sns/topic:Topic","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic"},"response":{"inputs":{"__defaults":["contentBasedDeduplication","fifoTopic","name"],"contentBasedDeduplication":false,"fifoTopic":false,"name":"topic-c30c77d"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"dynamic-bucket","news":{},"olds":{},"randomSeed":"mdJ+n4dtwxfkxFDrrgyW87wmHOrJcFh9Svr5wQ7KlMg=","type":"aws:s3/bucket:Bucket","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket"},"response":{"inputs":{"__defaults":["acl","bucket","forceDestroy"],"acl":"private","bucket":"dynamic-bucket-165c44b","forceDestroy":false}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"test-bucket","news":{},"olds":{},"randomSeed":"77PV6vHo1oGMH1wUEycx8+rEd8xjQE2GFCoYaj9r7Es=","type":"aws:s3/bucket:Bucket","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"},"response":{"inputs":{"__defaults":["acl","bucket","forceDestroy"],"acl":"private","bucket":"test-bucket-f93a6a6","forceDestroy":false}}}
{"method":"/pulumirpc.ResourceProvider/Invoke","request":{"args":{},"tok":"aws:index/getCallerIdentity:getCallerIdentity"},"response":{"return":{"accountId":"894850187425","arn":"arn:aws:sts::894850187425:assumed-role/AWSReservedSSO_AdministratorAccess_47baafd4a4104958/chall@pulumi.com","id":"894850187425","userId":"AROA5AWJ2ICQ7CYNMX5KN:chall@pulumi.com"}}}
{"method":"/pulumirpc.ResourceMonitor/Invoke","request":{"acceptResources":true,"args":{},"tok":"aws:index/getCallerIdentity:getCallerIdentity","version":"7.0.0-alpha.0+dev"},"response":{"return":{"accountId":"894850187425","arn":"arn:aws:sts::894850187425:assumed-role/AWSReservedSSO_AdministratorAccess_47baafd4a4104958/chall@pulumi.com","id":"894850187425","userId":"AROA5AWJ2ICQ7CYNMX5KN:chall@pulumi.com"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"base-role","news":{"assumeRolePolicy":{"Id":"comprehensive-policy-id","Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":["arn:aws:iam::894850187425:root"]},"Sid":"AllowAWSPrincipal"}],"Version":"2012-10-17"}},"olds":{},"randomSeed":"lkH+bezNO0cy4X+5mUs0FHmuHj1vH1PCC2psJTbLZ2w=","type":"aws:iam/role:Role","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"},"response":{"inputs":{"__defaults":["forceDetachPolicies","maxSessionDuration","name","path"],"assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::894850187425:root\"]},\"Sid\":\"AllowAWSPrincipal\"}],\"Version\":\"2012-10-17\"}","forceDetachPolicies":false,"maxSessionDuration":3600,"name":"base-role-13896c1","path":"/"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"base-role","properties":{"__defaults":["forceDetachPolicies","maxSessionDuration","name","path"],"assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::894850187425:root\"]},\"Sid\":\"AllowAWSPrincipal\"}],\"Version\":\"2012-10-17\"}","forceDetachPolicies":false,"maxSessionDuration":3600,"name":"base-role-13896c1","path":"/"},"type":"aws:iam/role:Role","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"},"response":{"id":"base-role-13896c1","properties":{"arn":"arn:aws:iam::894850187425:role/base-role-13896c1","assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::894850187425:root\"]},\"Sid\":\"AllowAWSPrincipal\"}],\"Version\":\"2012-10-17\"}","createDate":"2025-06-02T13:48:49Z","description":"","forceDetachPolicies":false,"id":"base-role-13896c1","inlinePolicies":[],"managedPolicyArns":[],"maxSessionDuration":3600,"name":"base-role-13896c1","namePrefix":"","path":"/","permissionsBoundary":"","uniqueId":"AROA5AWJ2ICQ4KGRZ4SSM"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"name":"base-role","object":{"assumeRolePolicy":{"Id":"comprehensive-policy-id","Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":["arn:aws:iam::894850187425:root"]},"Sid":"AllowAWSPrincipal"}],"Version":"2012-10-17"}},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"assumeRolePolicy":{}},"sourcePosition":{"column":18,"line":23,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:iam/role:Role","version":"7.0.0-alpha.0+dev"},"response":{"id":"base-role-13896c1","object":{"arn":"arn:aws:iam::894850187425:role/base-role-13896c1","assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::894850187425:root\"]},\"Sid\":\"AllowAWSPrincipal\"}],\"Version\":\"2012-10-17\"}","createDate":"2025-06-02T13:48:49Z","description":"","forceDetachPolicies":false,"id":"base-role-13896c1","inlinePolicies":[],"managedPolicyArns":[],"maxSessionDuration":3600,"name":"base-role-13896c1","namePrefix":"","path":"/","permissionsBoundary":"","uniqueId":"AROA5AWJ2ICQ4KGRZ4SSM"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"comprehensive-role","news":{"assumeRolePolicy":{"Id":"comprehensive-policy-id","Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":["arn:aws:iam::894850187425:root","arn:aws:iam::894850187425:role/base-role-13896c1"]},"Sid":"AllowAWSPrincipal"},{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com","ec2.amazonaws.com"]},"Sid":"AllowServicePrincipal"},{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Federated":"arn:aws:iam::123456789012:saml-provider/ExampleProvider"},"Sid":"AllowFederatedPrincipal"}],"Version":"2012-10-17"}},"olds":{},"randomSeed":"AD1opabH0prKzFpKa3EgeXUidvwscobqnL6fjvFR2Ac=","type":"aws:iam/role:Role","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"},"response":{"inputs":{"__defaults":["forceDetachPolicies","maxSessionDuration","name","path"],"assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::894850187425:root\",\"arn:aws:iam::894850187425:role/base-role-13896c1\"]},\"Sid\":\"AllowAWSPrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\",\"ec2.amazonaws.com\"]},\"Sid\":\"AllowServicePrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::123456789012:saml-provider/ExampleProvider\"},\"Sid\":\"AllowFederatedPrincipal\"}],\"Version\":\"2012-10-17\"}","forceDetachPolicies":false,"maxSessionDuration":3600,"name":"comprehensive-role-f9043da","path":"/"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"ecr","properties":{"__defaults":["imageTagMutability","name"],"imageTagMutability":"MUTABLE","name":"ecr-c365347"},"type":"aws:ecr/repository:Repository","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repository:Repository::ecr"},"response":{"id":"ecr-c365347","properties":{"__meta":"{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"delete\":1200000000000}}","arn":"arn:aws:ecr:us-west-2:894850187425:repository/ecr-c365347","encryptionConfigurations":[{"encryptionType":"AES256","kmsKey":""}],"forceDelete":null,"id":"ecr-c365347","imageScanningConfiguration":{"scanOnPush":false},"imageTagMutability":"MUTABLE","name":"ecr-c365347","registryId":"894850187425","repositoryUrl":"894850187425.dkr.ecr.us-west-2.amazonaws.com/ecr-c365347"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"name":"ecr","object":{},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","sourcePosition":{"column":14,"line":315,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:ecr/repository:Repository","version":"7.0.0-alpha.0+dev"},"response":{"id":"ecr-c365347","object":{"__meta":"{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"delete\":1200000000000}}","arn":"arn:aws:ecr:us-west-2:894850187425:repository/ecr-c365347","encryptionConfigurations":[{"encryptionType":"AES256","kmsKey":""}],"forceDelete":null,"id":"ecr-c365347","imageScanningConfiguration":{"scanOnPush":false},"imageTagMutability":"MUTABLE","name":"ecr-c365347","registryId":"894850187425","repositoryUrl":"894850187425.dkr.ecr.us-west-2.amazonaws.com/ecr-c365347"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repository:Repository::ecr"}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"ecr-policy","news":{"policy":{"Id":"RepoPolicy","Statement":[{"Action":["ecr:GetDownloadUrlForLayer","ecr:BatchGetImage","ecr:BatchCheckLayerAvailability"],"Effect":"Allow","Principal":{"AWS":"arn:aws:iam::894850187425:root"},"Sid":"AllowStatement"}],"Version":"2012-10-17"},"repository":"ecr-c365347"},"olds":{},"randomSeed":"zZ50xl5AjY5xaR3YCp9KStJE1Etp+dB5YsCPCNvVr3k=","type":"aws:ecr/repositoryPolicy:RepositoryPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repositoryPolicy:RepositoryPolicy::ecr-policy"},"response":{"inputs":{"__defaults":[],"policy":"{\"Id\":\"RepoPolicy\",\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:root\"},\"Sid\":\"AllowStatement\"}],\"Version\":\"2012-10-17\"}","repository":"ecr-c365347"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"ecr-policy","properties":{"__defaults":[],"policy":"{\"Id\":\"RepoPolicy\",\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:root\"},\"Sid\":\"AllowStatement\"}],\"Version\":\"2012-10-17\"}","repository":"ecr-c365347"},"type":"aws:ecr/repositoryPolicy:RepositoryPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repositoryPolicy:RepositoryPolicy::ecr-policy"},"response":{"id":"ecr-c365347","properties":{"id":"ecr-c365347","policy":"{\"Id\":\"RepoPolicy\",\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:root\"},\"Sid\":\"AllowStatement\"}],\"Version\":\"2012-10-17\"}","registryId":"894850187425","repository":"ecr-c365347"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repository:Repository::ecr"],"name":"ecr-policy","object":{"policy":{"Id":"RepoPolicy","Statement":[{"Action":["ecr:GetDownloadUrlForLayer","ecr:BatchGetImage","ecr:BatchCheckLayerAvailability"],"Effect":"Allow","Principal":{"AWS":"arn:aws:iam::894850187425:root"},"Sid":"AllowStatement"}],"Version":"2012-10-17"},"repository":"ecr-c365347"},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"policy":{},"repository":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repository:Repository::ecr"]}},"sourcePosition":{"column":1,"line":316,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:ecr/repositoryPolicy:RepositoryPolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"ecr-c365347","object":{"id":"ecr-c365347","policy":"{\"Id\":\"RepoPolicy\",\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:root\"},\"Sid\":\"AllowStatement\"}],\"Version\":\"2012-10-17\"}","registryId":"894850187425","repository":"ecr-c365347"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:ecr/repositoryPolicy:RepositoryPolicy::ecr-policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"topic","properties":{"__defaults":["contentBasedDeduplication","fifoTopic","name"],"contentBasedDeduplication":false,"fifoTopic":false,"name":"topic-c30c77d"},"type":"aws:sns/topic:Topic","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic"},"response":{"id":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","properties":{"applicationFailureFeedbackRoleArn":"","applicationSuccessFeedbackRoleArn":"","applicationSuccessFeedbackSampleRate":0,"archivePolicy":"","arn":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","beginningArchiveTime":"","contentBasedDeduplication":false,"deliveryPolicy":"","displayName":"","fifoTopic":false,"firehoseFailureFeedbackRoleArn":"","firehoseSuccessFeedbackRoleArn":"","firehoseSuccessFeedbackSampleRate":0,"httpFailureFeedbackRoleArn":"","httpSuccessFeedbackRoleArn":"","httpSuccessFeedbackSampleRate":0,"id":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","kmsMasterKeyId":"","lambdaFailureFeedbackRoleArn":"","lambdaSuccessFeedbackRoleArn":"","lambdaSuccessFeedbackSampleRate":0,"name":"topic-c30c77d","namePrefix":"","owner":"894850187425","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"894850187425\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:us-west-2:894850187425:topic-c30c77d\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signatureVersion":0,"sqsFailureFeedbackRoleArn":"","sqsSuccessFeedbackRoleArn":"","sqsSuccessFeedbackSampleRate":0,"tracingConfig":""}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"name":"topic","object":{},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","sourcePosition":{"column":15,"line":336,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:sns/topic:Topic","version":"7.0.0-alpha.0+dev"},"response":{"id":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","object":{"applicationFailureFeedbackRoleArn":"","applicationSuccessFeedbackRoleArn":"","applicationSuccessFeedbackSampleRate":0,"archivePolicy":"","arn":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","beginningArchiveTime":"","contentBasedDeduplication":false,"deliveryPolicy":"","displayName":"","fifoTopic":false,"firehoseFailureFeedbackRoleArn":"","firehoseSuccessFeedbackRoleArn":"","firehoseSuccessFeedbackSampleRate":0,"httpFailureFeedbackRoleArn":"","httpSuccessFeedbackRoleArn":"","httpSuccessFeedbackSampleRate":0,"id":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","kmsMasterKeyId":"","lambdaFailureFeedbackRoleArn":"","lambdaSuccessFeedbackRoleArn":"","lambdaSuccessFeedbackSampleRate":0,"name":"topic-c30c77d","namePrefix":"","owner":"894850187425","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"894850187425\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:us-west-2:894850187425:topic-c30c77d\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signatureVersion":0,"sqsFailureFeedbackRoleArn":"","sqsSuccessFeedbackRoleArn":"","sqsSuccessFeedbackSampleRate":0,"tracingConfig":""},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic"}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"policy","news":{"arn":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","policy":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::894850187425:role/base-role-13896c1"},"Resource":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d"}],"Version":"2012-10-17"}},"olds":{},"randomSeed":"9Xc3l5A9yGiiGjKDjYb18BCCKHbdUTaXClNtF9fmiOQ=","type":"aws:sns/topicPolicy:TopicPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topicPolicy:TopicPolicy::policy"},"response":{"inputs":{"__defaults":[],"arn":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:role/base-role-13896c1\"},\"Resource\":\"arn:aws:sns:us-west-2:894850187425:topic-c30c77d\"}],\"Version\":\"2012-10-17\"}"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"dynamic-bucket","properties":{"__defaults":["acl","bucket","forceDestroy"],"acl":"private","bucket":"dynamic-bucket-165c44b","forceDestroy":false},"type":"aws:s3/bucket:Bucket","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket"},"response":{"id":"dynamic-bucket-165c44b","properties":{"accelerationStatus":"","acl":"private","arn":"arn:aws:s3:::dynamic-bucket-165c44b","bucket":"dynamic-bucket-165c44b","bucketDomainName":"dynamic-bucket-165c44b.s3.amazonaws.com","bucketPrefix":null,"bucketRegionalDomainName":"dynamic-bucket-165c44b.s3.us-west-2.amazonaws.com","corsRules":[],"forceDestroy":false,"grants":[],"hostedZoneId":"Z3BJ6K6RIION7M","id":"dynamic-bucket-165c44b","lifecycleRules":[],"loggings":[],"objectLockConfiguration":null,"policy":null,"region":"us-west-2","replicationConfiguration":null,"requestPayer":"BucketOwner","serverSideEncryptionConfiguration":{"rule":{"applyServerSideEncryptionByDefault":{"kmsMasterKeyId":"","sseAlgorithm":"AES256"},"bucketKeyEnabled":false}},"versioning":{"enabled":false,"mfaDelete":false},"website":null,"websiteDomain":null,"websiteEndpoint":null}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"test-bucket","properties":{"__defaults":["acl","bucket","forceDestroy"],"acl":"private","bucket":"test-bucket-f93a6a6","forceDestroy":false},"type":"aws:s3/bucket:Bucket","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"},"response":{"id":"test-bucket-f93a6a6","properties":{"accelerationStatus":"","acl":"private","arn":"arn:aws:s3:::test-bucket-f93a6a6","bucket":"test-bucket-f93a6a6","bucketDomainName":"test-bucket-f93a6a6.s3.amazonaws.com","bucketPrefix":null,"bucketRegionalDomainName":"test-bucket-f93a6a6.s3.us-west-2.amazonaws.com","corsRules":[],"forceDestroy":false,"grants":[],"hostedZoneId":"Z3BJ6K6RIION7M","id":"test-bucket-f93a6a6","lifecycleRules":[],"loggings":[],"objectLockConfiguration":null,"policy":null,"region":"us-west-2","replicationConfiguration":null,"requestPayer":"BucketOwner","serverSideEncryptionConfiguration":{"rule":{"applyServerSideEncryptionByDefault":{"kmsMasterKeyId":"","sseAlgorithm":"AES256"},"bucketKeyEnabled":false}},"versioning":{"enabled":false,"mfaDelete":false},"website":null,"websiteDomain":null,"websiteEndpoint":null}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"aliases":[{"spec":{"parentUrn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","type":"aws:s3/bucketV2:BucketV2"}},{"spec":{"parentUrn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","type":"aws:s3/bucketV2:BucketV2"}}],"custom":true,"customTimeouts":{},"name":"dynamic-bucket","object":{},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","sourcePosition":{"column":23,"line":292,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:s3/bucket:Bucket","version":"7.0.0-alpha.0+dev"},"response":{"id":"dynamic-bucket-165c44b","object":{"accelerationStatus":"","acl":"private","arn":"arn:aws:s3:::dynamic-bucket-165c44b","bucket":"dynamic-bucket-165c44b","bucketDomainName":"dynamic-bucket-165c44b.s3.amazonaws.com","bucketPrefix":null,"bucketRegionalDomainName":"dynamic-bucket-165c44b.s3.us-west-2.amazonaws.com","corsRules":[],"forceDestroy":false,"grants":[],"hostedZoneId":"Z3BJ6K6RIION7M","id":"dynamic-bucket-165c44b","lifecycleRules":[],"loggings":[],"objectLockConfiguration":null,"policy":null,"region":"us-west-2","replicationConfiguration":null,"requestPayer":"BucketOwner","serverSideEncryptionConfiguration":{"rule":{"applyServerSideEncryptionByDefault":{"kmsMasterKeyId":"","sseAlgorithm":"AES256"},"bucketKeyEnabled":false}},"versioning":{"enabled":false,"mfaDelete":false},"website":null,"websiteDomain":null,"websiteEndpoint":null},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket"}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"aliases":[{"spec":{"parentUrn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","type":"aws:s3/bucketV2:BucketV2"}},{"spec":{"parentUrn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","type":"aws:s3/bucketV2:BucketV2"}}],"custom":true,"customTimeouts":{},"name":"test-bucket","object":{},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","sourcePosition":{"column":16,"line":21,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:s3/bucket:Bucket","version":"7.0.0-alpha.0+dev"},"response":{"id":"test-bucket-f93a6a6","object":{"accelerationStatus":"","acl":"private","arn":"arn:aws:s3:::test-bucket-f93a6a6","bucket":"test-bucket-f93a6a6","bucketDomainName":"test-bucket-f93a6a6.s3.amazonaws.com","bucketPrefix":null,"bucketRegionalDomainName":"test-bucket-f93a6a6.s3.us-west-2.amazonaws.com","corsRules":[],"forceDestroy":false,"grants":[],"hostedZoneId":"Z3BJ6K6RIION7M","id":"test-bucket-f93a6a6","lifecycleRules":[],"loggings":[],"objectLockConfiguration":null,"policy":null,"region":"us-west-2","replicationConfiguration":null,"requestPayer":"BucketOwner","serverSideEncryptionConfiguration":{"rule":{"applyServerSideEncryptionByDefault":{"kmsMasterKeyId":"","sseAlgorithm":"AES256"},"bucketKeyEnabled":false}},"versioning":{"enabled":false,"mfaDelete":false},"website":null,"websiteDomain":null,"websiteEndpoint":null},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"bucket-policy","news":{"bucket":"test-bucket-f93a6a6","policy":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::894850187425:root"},"Resource":"arn:aws:s3:::test-bucket-f93a6a6/*","Sid":"PrincipalTest"},{"Action":"s3:ListBucket","Effect":"Deny","NotPrincipal":{"AWS":["arn:aws:iam::894850187425:role/base-role-13896c1","arn:aws:iam::894850187425:root"]},"Resource":"arn:aws:s3:::test-bucket-f93a6a6","Sid":"NotPrincipalTest"},{"Action":"s3:ListBucket","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"},"Resource":"arn:aws:s3:::test-bucket-f93a6a6"},{"Action":["s3:ListBucket"],"Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com"]},"Resource":["arn:aws:s3:::test-bucket-f93a6a6"]},{"Action":"s3:GetObject","Effect":"Deny","NotPrincipal":{"AWS":["arn:aws:iam::894850187425:role/base-role-13896c1","arn:aws:iam::894850187425:root"]},"NotResource":"arn:aws:s3:::test-bucket-f93a6a6/logs/*","Sid":"ComprehensiveDenyTest"}],"Version":"2012-10-17"}},"olds":{},"randomSeed":"hvsaiIiYbdqa5BuWEEPfZXYrrMyxmO4X0cWgdQMNkDk=","type":"aws:s3/bucketPolicy:BucketPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucketPolicy:BucketPolicy::bucket-policy"},"response":{"inputs":{"__defaults":[],"bucket":"test-bucket-f93a6a6","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:root\"},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"PrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::894850187425:role/base-role-13896c1\",\"arn:aws:iam::894850187425:root\"]},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"NotPrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\"},{\"Action\":[\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]},\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6\"]},{\"Action\":\"s3:GetObject\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::894850187425:role/base-role-13896c1\",\"arn:aws:iam::894850187425:root\"]},\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2012-10-17\"}"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"bucket-policy","properties":{"__defaults":[],"bucket":"test-bucket-f93a6a6","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:root\"},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"PrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::894850187425:role/base-role-13896c1\",\"arn:aws:iam::894850187425:root\"]},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"NotPrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\"},{\"Action\":[\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]},\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6\"]},{\"Action\":\"s3:GetObject\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::894850187425:role/base-role-13896c1\",\"arn:aws:iam::894850187425:root\"]},\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2012-10-17\"}"},"type":"aws:s3/bucketPolicy:BucketPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucketPolicy:BucketPolicy::bucket-policy"},"response":{"id":"test-bucket-f93a6a6","properties":{"bucket":"test-bucket-f93a6a6","id":"test-bucket-f93a6a6","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:root\"},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"PrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::894850187425:role/base-role-13896c1\",\"arn:aws:iam::894850187425:root\"]},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"NotPrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\"},{\"Action\":[\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]},\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6\"]},{\"Action\":\"s3:GetObject\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::894850187425:role/base-role-13896c1\",\"arn:aws:iam::894850187425:root\"]},\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2012-10-17\"}"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"],"name":"bucket-policy","object":{"bucket":"test-bucket-f93a6a6","policy":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::894850187425:root"},"Resource":"arn:aws:s3:::test-bucket-f93a6a6/*","Sid":"PrincipalTest"},{"Action":"s3:ListBucket","Effect":"Deny","NotPrincipal":{"AWS":["arn:aws:iam::894850187425:role/base-role-13896c1","arn:aws:iam::894850187425:root"]},"Resource":"arn:aws:s3:::test-bucket-f93a6a6","Sid":"NotPrincipalTest"},{"Action":"s3:ListBucket","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"},"Resource":"arn:aws:s3:::test-bucket-f93a6a6"},{"Action":["s3:ListBucket"],"Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com"]},"Resource":["arn:aws:s3:::test-bucket-f93a6a6"]},{"Action":"s3:GetObject","Effect":"Deny","NotPrincipal":{"AWS":["arn:aws:iam::894850187425:role/base-role-13896c1","arn:aws:iam::894850187425:root"]},"NotResource":"arn:aws:s3:::test-bucket-f93a6a6/logs/*","Sid":"ComprehensiveDenyTest"}],"Version":"2012-10-17"}},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"bucket":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"]},"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"]}},"sourcePosition":{"column":1,"line":203,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:s3/bucketPolicy:BucketPolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"test-bucket-f93a6a6","object":{"bucket":"test-bucket-f93a6a6","id":"test-bucket-f93a6a6","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:root\"},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"PrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::894850187425:role/base-role-13896c1\",\"arn:aws:iam::894850187425:root\"]},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"NotPrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\"},{\"Action\":[\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]},\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6\"]},{\"Action\":\"s3:GetObject\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::894850187425:role/base-role-13896c1\",\"arn:aws:iam::894850187425:root\"]},\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2012-10-17\"}"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucketPolicy:BucketPolicy::bucket-policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"comprehensive-role","properties":{"__defaults":["forceDetachPolicies","maxSessionDuration","name","path"],"assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::894850187425:root\",\"arn:aws:iam::894850187425:role/base-role-13896c1\"]},\"Sid\":\"AllowAWSPrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\",\"ec2.amazonaws.com\"]},\"Sid\":\"AllowServicePrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::123456789012:saml-provider/ExampleProvider\"},\"Sid\":\"AllowFederatedPrincipal\"}],\"Version\":\"2012-10-17\"}","forceDetachPolicies":false,"maxSessionDuration":3600,"name":"comprehensive-role-f9043da","path":"/"},"type":"aws:iam/role:Role","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"},"response":{"id":"comprehensive-role-f9043da","properties":{"arn":"arn:aws:iam::894850187425:role/comprehensive-role-f9043da","assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::894850187425:root\",\"arn:aws:iam::894850187425:role/base-role-13896c1\"]},\"Sid\":\"AllowAWSPrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\",\"ec2.amazonaws.com\"]},\"Sid\":\"AllowServicePrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::123456789012:saml-provider/ExampleProvider\"},\"Sid\":\"AllowFederatedPrincipal\"}],\"Version\":\"2012-10-17\"}","createDate":"2025-06-02T13:48:58Z","description":"","forceDetachPolicies":false,"id":"comprehensive-role-f9043da","inlinePolicies":[],"managedPolicyArns":[],"maxSessionDuration":3600,"name":"comprehensive-role-f9043da","namePrefix":"","path":"/","permissionsBoundary":"","uniqueId":"AROA5AWJ2ICQ3WTAJC6YZ"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"],"name":"comprehensive-role","object":{"assumeRolePolicy":{"Id":"comprehensive-policy-id","Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":["arn:aws:iam::894850187425:root","arn:aws:iam::894850187425:role/base-role-13896c1"]},"Sid":"AllowAWSPrincipal"},{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com","ec2.amazonaws.com"]},"Sid":"AllowServicePrincipal"},{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Federated":"arn:aws:iam::123456789012:saml-provider/ExampleProvider"},"Sid":"AllowFederatedPrincipal"}],"Version":"2012-10-17"}},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"assumeRolePolicy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"]}},"sourcePosition":{"column":27,"line":43,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:iam/role:Role","version":"7.0.0-alpha.0+dev"},"response":{"id":"comprehensive-role-f9043da","object":{"arn":"arn:aws:iam::894850187425:role/comprehensive-role-f9043da","assumeRolePolicy":"{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::894850187425:root\",\"arn:aws:iam::894850187425:role/base-role-13896c1\"]},\"Sid\":\"AllowAWSPrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\",\"ec2.amazonaws.com\"]},\"Sid\":\"AllowServicePrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::123456789012:saml-provider/ExampleProvider\"},\"Sid\":\"AllowFederatedPrincipal\"}],\"Version\":\"2012-10-17\"}","createDate":"2025-06-02T13:48:58Z","description":"","forceDetachPolicies":false,"id":"comprehensive-role-f9043da","inlinePolicies":[],"managedPolicyArns":[],"maxSessionDuration":3600,"name":"comprehensive-role-f9043da","namePrefix":"","path":"/","permissionsBoundary":"","uniqueId":"AROA5AWJ2ICQ3WTAJC6YZ"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResourceOutputs","request":{"outputs":{"dynamicBucketArn":"arn:aws:s3:::dynamic-bucket-165c44b","testBucket":"arn:aws:s3:::test-bucket-f93a6a6","testRole":"arn:aws:iam::894850187425:role/comprehensive-role-f9043da"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test"},"response":{}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"dynamic-policy","news":{"policy":{"Statement":[{"Action":"s3:*","Condition":{"StringEquals":{"s3:ExistingBucketName":"dynamic-bucket-165c44b"}},"Effect":"Allow","Resource":["arn:aws:s3:::dynamic-bucket-165c44b","arn:aws:s3:::dynamic-bucket-165c44b/*"]}],"Version":"2012-10-17"},"role":"comprehensive-role-f9043da"},"olds":{},"randomSeed":"IRzeZigApaq/9rodFoGSJDY+YbNu7deUAKQUowiAv7I=","type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::dynamic-policy"},"response":{"inputs":{"__defaults":["name"],"name":"dynamic-policy-a3e547a","policy":"{\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"StringEquals\":{\"s3:ExistingBucketName\":\"dynamic-bucket-165c44b\"}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::dynamic-bucket-165c44b\",\"arn:aws:s3:::dynamic-bucket-165c44b/*\"]}],\"Version\":\"2012-10-17\"}","role":"comprehensive-role-f9043da"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"edge-cases-policy","news":{"policy":{"Statement":[{"Action":["s3:GetObject"],"Effect":"Allow","Resource":["arn:aws:s3:::test-bucket-f93a6a6"]},{"Condition":{"StringNotEquals":{"aws:RequestTag/approved":"true"}},"Effect":"Deny","NotAction":"s3:GetBucketLocation","NotResource":"arn:aws:s3:::test-bucket-f93a6a6/logs/*","Sid":"ComprehensiveDenyTest"}],"Version":"2008-10-17"},"role":"comprehensive-role-f9043da"},"olds":{},"randomSeed":"xtv9F6e0sQ+ZhvL4Rs+ejDrKoyE/kEPNIv2ILv4KeB0=","type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::edge-cases-policy"},"response":{"inputs":{"__defaults":["name"],"name":"edge-cases-policy-99dce04","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6\"]},{\"Condition\":{\"StringNotEquals\":{\"aws:RequestTag/approved\":\"true\"}},\"Effect\":\"Deny\",\"NotAction\":\"s3:GetBucketLocation\",\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2008-10-17\"}","role":"comprehensive-role-f9043da"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"comprehensive-policy","news":{"policy":{"Id":"test-policy-document-id","Statement":[{"Action":["s3:GetObject","s3:PutObject","s3:DeleteObject"],"Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-f93a6a6/*","Sid":"ActionArrayTest"},{"Action":"s3:ListBucket","Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-f93a6a6","Sid":"ActionStringTest"},{"Effect":"Deny","NotAction":["s3:GetObject","s3:PutObject"],"Resource":"arn:aws:s3:::test-bucket-f93a6a6","Sid":"NotActionTest"},{"Action":"s3:GetObject","Effect":"Allow","Resource":["arn:aws:s3:::test-bucket-f93a6a6/*","arn:aws:s3:::test-bucket-f93a6a6/public/*"],"Sid":"ResourceArrayTest"},{"Action":"s3:GetBucketLocation","Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-f93a6a6","Sid":"ResourceStringTest"},{"Action":"s3:DeleteObject","Effect":"Deny","NotResource":"arn:aws:s3:::test-bucket-f93a6a6/protected/*","Sid":"NotResourceTest"},{"Action":"s3:GetObject","Condition":{"ArnEquals":{"aws:SourceArn":"arn:aws:s3:::test-bucket-f93a6a6"},"ArnLike":{"aws:SourceArn":"arn:aws:s3:::example-*"},"Bool":{"aws:MultiFactorAuthPresent":"true","aws:SecureTransport":"true"},"DateGreaterThan":{"aws:RequestTime":"2023-01-01T00:00:00Z"},"DateLessThan":{"aws:RequestTime":"2025-01-01T00:00:00Z"},"ForAllValues:StringEquals":{"aws:RequestTag/team":["dev","ops"]},"ForAnyValue:StringLike":{"s3:object-tag-keys":["environment","team"]},"IpAddress":{"aws:SourceIp":["203.0.113.0/24","2001:DB8:1234:5678::/64"]},"IpAddressIfExists":{"aws:SourceIp":"203.0.113.0/24"},"Null":{"aws:RequestTag/environment":"false"},"NumericGreaterThan":{"s3:max-keys":"100"},"NumericLessThanEquals":{"s3:object-size":"1048576"},"StringEquals":{"aws:RequestTag/environment":"production","s3:ExistingObjectTag/classification":["public","internal"]},"StringLike":{"s3:prefix":["${aws:username}/*","public/*"]},"StringNotEquals":{"aws:RequestTag/team":"external"}},"Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-f93a6a6/*","Sid":"ComplexConditionsTest"}],"Version":"2012-10-17"},"role":"comprehensive-role-f9043da"},"olds":{},"randomSeed":"cgYxM6l2IY5bMrHnTY8Aml40REv0MlOZOyrcYJ3diG0=","type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::comprehensive-policy"},"response":{"inputs":{"__defaults":["name"],"name":"comprehensive-policy-8e8073f","policy":"{\"Id\":\"test-policy-document-id\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"ActionArrayTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"ActionStringTest\"},{\"Effect\":\"Deny\",\"NotAction\":[\"s3:GetObject\",\"s3:PutObject\"],\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"NotActionTest\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"arn:aws:s3:::test-bucket-f93a6a6/public/*\"],\"Sid\":\"ResourceArrayTest\"},{\"Action\":\"s3:GetBucketLocation\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"ResourceStringTest\"},{\"Action\":\"s3:DeleteObject\",\"Effect\":\"Deny\",\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/protected/*\",\"Sid\":\"NotResourceTest\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::test-bucket-f93a6a6\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::example-*\"},\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\",\"aws:SecureTransport\":\"true\"},\"DateGreaterThan\":{\"aws:RequestTime\":\"2023-01-01T00:00:00Z\"},\"DateLessThan\":{\"aws:RequestTime\":\"2025-01-01T00:00:00Z\"},\"ForAllValues:StringEquals\":{\"aws:RequestTag/team\":[\"dev\",\"ops\"]},\"ForAnyValue:StringLike\":{\"s3:object-tag-keys\":[\"environment\",\"team\"]},\"IpAddress\":{\"aws:SourceIp\":[\"203.0.113.0/24\",\"2001:DB8:1234:5678::/64\"]},\"IpAddressIfExists\":{\"aws:SourceIp\":\"203.0.113.0/24\"},\"Null\":{\"aws:RequestTag/environment\":\"false\"},\"NumericGreaterThan\":{\"s3:max-keys\":\"100\"},\"NumericLessThanEquals\":{\"s3:object-size\":\"1048576\"},\"StringEquals\":{\"aws:RequestTag/environment\":\"production\",\"s3:ExistingObjectTag/classification\":[\"public\",\"internal\"]},\"StringLike\":{\"s3:prefix\":[\"${aws:username}/*\",\"public/*\"]},\"StringNotEquals\":{\"aws:RequestTag/team\":\"external\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"ComplexConditionsTest\"}],\"Version\":\"2012-10-17\"}","role":"comprehensive-role-f9043da"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"dynamic-policy","properties":{"__defaults":["name"],"name":"dynamic-policy-a3e547a","policy":"{\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"StringEquals\":{\"s3:ExistingBucketName\":\"dynamic-bucket-165c44b\"}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::dynamic-bucket-165c44b\",\"arn:aws:s3:::dynamic-bucket-165c44b/*\"]}],\"Version\":\"2012-10-17\"}","role":"comprehensive-role-f9043da"},"type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::dynamic-policy"},"response":{"id":"comprehensive-role-f9043da:dynamic-policy-a3e547a","properties":{"id":"comprehensive-role-f9043da:dynamic-policy-a3e547a","name":"dynamic-policy-a3e547a","namePrefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"StringEquals\":{\"s3:ExistingBucketName\":\"dynamic-bucket-165c44b\"}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::dynamic-bucket-165c44b\",\"arn:aws:s3:::dynamic-bucket-165c44b/*\"]}]}","role":"comprehensive-role-f9043da"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"],"name":"dynamic-policy","object":{"policy":{"Statement":[{"Action":"s3:*","Condition":{"StringEquals":{"s3:ExistingBucketName":"dynamic-bucket-165c44b"}},"Effect":"Allow","Resource":["arn:aws:s3:::dynamic-bucket-165c44b","arn:aws:s3:::dynamic-bucket-165c44b/*"]}],"Version":"2012-10-17"},"role":"comprehensive-role-f9043da"},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket"]},"role":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"]}},"sourcePosition":{"column":1,"line":293,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:iam/rolePolicy:RolePolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"comprehensive-role-f9043da:dynamic-policy-a3e547a","object":{"id":"comprehensive-role-f9043da:dynamic-policy-a3e547a","name":"dynamic-policy-a3e547a","namePrefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"StringEquals\":{\"s3:ExistingBucketName\":\"dynamic-bucket-165c44b\"}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::dynamic-bucket-165c44b\",\"arn:aws:s3:::dynamic-bucket-165c44b/*\"]}]}","role":"comprehensive-role-f9043da"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::dynamic-policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"edge-cases-policy","properties":{"__defaults":["name"],"name":"edge-cases-policy-99dce04","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6\"]},{\"Condition\":{\"StringNotEquals\":{\"aws:RequestTag/approved\":\"true\"}},\"Effect\":\"Deny\",\"NotAction\":\"s3:GetBucketLocation\",\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2008-10-17\"}","role":"comprehensive-role-f9043da"},"type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::edge-cases-policy"},"response":{"id":"comprehensive-role-f9043da:edge-cases-policy-99dce04","properties":{"id":"comprehensive-role-f9043da:edge-cases-policy-99dce04","name":"edge-cases-policy-99dce04","namePrefix":"","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6\"]},{\"Condition\":{\"StringNotEquals\":{\"aws:RequestTag/approved\":\"true\"}},\"Effect\":\"Deny\",\"NotAction\":\"s3:GetBucketLocation\",\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2008-10-17\"}","role":"comprehensive-role-f9043da"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"],"name":"edge-cases-policy","object":{"policy":{"Statement":[{"Action":["s3:GetObject"],"Effect":"Allow","Resource":["arn:aws:s3:::test-bucket-f93a6a6"]},{"Condition":{"StringNotEquals":{"aws:RequestTag/approved":"true"}},"Effect":"Deny","NotAction":"s3:GetBucketLocation","NotResource":"arn:aws:s3:::test-bucket-f93a6a6/logs/*","Sid":"ComprehensiveDenyTest"}],"Version":"2008-10-17"},"role":"comprehensive-role-f9043da"},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"]},"role":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"]}},"sourcePosition":{"column":1,"line":264,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:iam/rolePolicy:RolePolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"comprehensive-role-f9043da:edge-cases-policy-99dce04","object":{"id":"comprehensive-role-f9043da:edge-cases-policy-99dce04","name":"edge-cases-policy-99dce04","namePrefix":"","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6\"]},{\"Condition\":{\"StringNotEquals\":{\"aws:RequestTag/approved\":\"true\"}},\"Effect\":\"Deny\",\"NotAction\":\"s3:GetBucketLocation\",\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2008-10-17\"}","role":"comprehensive-role-f9043da"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::edge-cases-policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"comprehensive-policy","properties":{"__defaults":["name"],"name":"comprehensive-policy-8e8073f","policy":"{\"Id\":\"test-policy-document-id\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"ActionArrayTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"ActionStringTest\"},{\"Effect\":\"Deny\",\"NotAction\":[\"s3:GetObject\",\"s3:PutObject\"],\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"NotActionTest\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"arn:aws:s3:::test-bucket-f93a6a6/public/*\"],\"Sid\":\"ResourceArrayTest\"},{\"Action\":\"s3:GetBucketLocation\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"ResourceStringTest\"},{\"Action\":\"s3:DeleteObject\",\"Effect\":\"Deny\",\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/protected/*\",\"Sid\":\"NotResourceTest\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::test-bucket-f93a6a6\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::example-*\"},\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\",\"aws:SecureTransport\":\"true\"},\"DateGreaterThan\":{\"aws:RequestTime\":\"2023-01-01T00:00:00Z\"},\"DateLessThan\":{\"aws:RequestTime\":\"2025-01-01T00:00:00Z\"},\"ForAllValues:StringEquals\":{\"aws:RequestTag/team\":[\"dev\",\"ops\"]},\"ForAnyValue:StringLike\":{\"s3:object-tag-keys\":[\"environment\",\"team\"]},\"IpAddress\":{\"aws:SourceIp\":[\"203.0.113.0/24\",\"2001:DB8:1234:5678::/64\"]},\"IpAddressIfExists\":{\"aws:SourceIp\":\"203.0.113.0/24\"},\"Null\":{\"aws:RequestTag/environment\":\"false\"},\"NumericGreaterThan\":{\"s3:max-keys\":\"100\"},\"NumericLessThanEquals\":{\"s3:object-size\":\"1048576\"},\"StringEquals\":{\"aws:RequestTag/environment\":\"production\",\"s3:ExistingObjectTag/classification\":[\"public\",\"internal\"]},\"StringLike\":{\"s3:prefix\":[\"${aws:username}/*\",\"public/*\"]},\"StringNotEquals\":{\"aws:RequestTag/team\":\"external\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"ComplexConditionsTest\"}],\"Version\":\"2012-10-17\"}","role":"comprehensive-role-f9043da"},"type":"aws:iam/rolePolicy:RolePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::comprehensive-policy"},"response":{"id":"comprehensive-role-f9043da:comprehensive-policy-8e8073f","properties":{"id":"comprehensive-role-f9043da:comprehensive-policy-8e8073f","name":"comprehensive-policy-8e8073f","namePrefix":"","policy":"{\"Version\":\"2012-10-17\",\"Id\":\"test-policy-document-id\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"ActionArrayTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"ActionStringTest\"},{\"Effect\":\"Deny\",\"NotAction\":[\"s3:GetObject\",\"s3:PutObject\"],\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"NotActionTest\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"arn:aws:s3:::test-bucket-f93a6a6/public/*\"],\"Sid\":\"ResourceArrayTest\"},{\"Action\":\"s3:GetBucketLocation\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"ResourceStringTest\"},{\"Action\":\"s3:DeleteObject\",\"Effect\":\"Deny\",\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/protected/*\",\"Sid\":\"NotResourceTest\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::test-bucket-f93a6a6\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::example-*\"},\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\",\"aws:SecureTransport\":\"true\"},\"DateGreaterThan\":{\"aws:RequestTime\":\"2023-01-01T00:00:00Z\"},\"DateLessThan\":{\"aws:RequestTime\":\"2025-01-01T00:00:00Z\"},\"ForAllValues:StringEquals\":{\"aws:RequestTag/team\":[\"dev\",\"ops\"]},\"ForAnyValue:StringLike\":{\"s3:object-tag-keys\":[\"environment\",\"team\"]},\"IpAddress\":{\"aws:SourceIp\":[\"203.0.113.0/24\",\"2001:DB8:1234:5678::/64\"]},\"IpAddressIfExists\":{\"aws:SourceIp\":\"203.0.113.0/24\"},\"Null\":{\"aws:RequestTag/environment\":\"false\"},\"NumericGreaterThan\":{\"s3:max-keys\":\"100\"},\"NumericLessThanEquals\":{\"s3:object-size\":\"1048576\"},\"StringEquals\":{\"aws:RequestTag/environment\":\"production\",\"s3:ExistingObjectTag/classification\":[\"public\",\"internal\"]},\"StringLike\":{\"s3:prefix\":[\"${aws:username}/*\",\"public/*\"]},\"StringNotEquals\":{\"aws:RequestTag/team\":\"external\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"ComplexConditionsTest\"}]}","role":"comprehensive-role-f9043da"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"],"name":"comprehensive-policy","object":{"policy":{"Id":"test-policy-document-id","Statement":[{"Action":["s3:GetObject","s3:PutObject","s3:DeleteObject"],"Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-f93a6a6/*","Sid":"ActionArrayTest"},{"Action":"s3:ListBucket","Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-f93a6a6","Sid":"ActionStringTest"},{"Effect":"Deny","NotAction":["s3:GetObject","s3:PutObject"],"Resource":"arn:aws:s3:::test-bucket-f93a6a6","Sid":"NotActionTest"},{"Action":"s3:GetObject","Effect":"Allow","Resource":["arn:aws:s3:::test-bucket-f93a6a6/*","arn:aws:s3:::test-bucket-f93a6a6/public/*"],"Sid":"ResourceArrayTest"},{"Action":"s3:GetBucketLocation","Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-f93a6a6","Sid":"ResourceStringTest"},{"Action":"s3:DeleteObject","Effect":"Deny","NotResource":"arn:aws:s3:::test-bucket-f93a6a6/protected/*","Sid":"NotResourceTest"},{"Action":"s3:GetObject","Condition":{"ArnEquals":{"aws:SourceArn":"arn:aws:s3:::test-bucket-f93a6a6"},"ArnLike":{"aws:SourceArn":"arn:aws:s3:::example-*"},"Bool":{"aws:MultiFactorAuthPresent":"true","aws:SecureTransport":"true"},"DateGreaterThan":{"aws:RequestTime":"2023-01-01T00:00:00Z"},"DateLessThan":{"aws:RequestTime":"2025-01-01T00:00:00Z"},"ForAllValues:StringEquals":{"aws:RequestTag/team":["dev","ops"]},"ForAnyValue:StringLike":{"s3:object-tag-keys":["environment","team"]},"IpAddress":{"aws:SourceIp":["203.0.113.0/24","2001:DB8:1234:5678::/64"]},"IpAddressIfExists":{"aws:SourceIp":"203.0.113.0/24"},"Null":{"aws:RequestTag/environment":"false"},"NumericGreaterThan":{"s3:max-keys":"100"},"NumericLessThanEquals":{"s3:object-size":"1048576"},"StringEquals":{"aws:RequestTag/environment":"production","s3:ExistingObjectTag/classification":["public","internal"]},"StringLike":{"s3:prefix":["${aws:username}/*","public/*"]},"StringNotEquals":{"aws:RequestTag/team":"external"}},"Effect":"Allow","Resource":"arn:aws:s3:::test-bucket-f93a6a6/*","Sid":"ComplexConditionsTest"}],"Version":"2012-10-17"},"role":"comprehensive-role-f9043da"},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"]},"role":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"]}},"sourcePosition":{"column":1,"line":81,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:iam/rolePolicy:RolePolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"comprehensive-role-f9043da:comprehensive-policy-8e8073f","object":{"id":"comprehensive-role-f9043da:comprehensive-policy-8e8073f","name":"comprehensive-policy-8e8073f","namePrefix":"","policy":"{\"Version\":\"2012-10-17\",\"Id\":\"test-policy-document-id\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"ActionArrayTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"ActionStringTest\"},{\"Effect\":\"Deny\",\"NotAction\":[\"s3:GetObject\",\"s3:PutObject\"],\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"NotActionTest\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"arn:aws:s3:::test-bucket-f93a6a6/public/*\"],\"Sid\":\"ResourceArrayTest\"},{\"Action\":\"s3:GetBucketLocation\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6\",\"Sid\":\"ResourceStringTest\"},{\"Action\":\"s3:DeleteObject\",\"Effect\":\"Deny\",\"NotResource\":\"arn:aws:s3:::test-bucket-f93a6a6/protected/*\",\"Sid\":\"NotResourceTest\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::test-bucket-f93a6a6\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::example-*\"},\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\",\"aws:SecureTransport\":\"true\"},\"DateGreaterThan\":{\"aws:RequestTime\":\"2023-01-01T00:00:00Z\"},\"DateLessThan\":{\"aws:RequestTime\":\"2025-01-01T00:00:00Z\"},\"ForAllValues:StringEquals\":{\"aws:RequestTag/team\":[\"dev\",\"ops\"]},\"ForAnyValue:StringLike\":{\"s3:object-tag-keys\":[\"environment\",\"team\"]},\"IpAddress\":{\"aws:SourceIp\":[\"203.0.113.0/24\",\"2001:DB8:1234:5678::/64\"]},\"IpAddressIfExists\":{\"aws:SourceIp\":\"203.0.113.0/24\"},\"Null\":{\"aws:RequestTag/environment\":\"false\"},\"NumericGreaterThan\":{\"s3:max-keys\":\"100\"},\"NumericLessThanEquals\":{\"s3:object-size\":\"1048576\"},\"StringEquals\":{\"aws:RequestTag/environment\":\"production\",\"s3:ExistingObjectTag/classification\":[\"public\",\"internal\"]},\"StringLike\":{\"s3:prefix\":[\"${aws:username}/*\",\"public/*\"]},\"StringNotEquals\":{\"aws:RequestTag/team\":\"external\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-f93a6a6/*\",\"Sid\":\"ComplexConditionsTest\"}]}","role":"comprehensive-role-f9043da"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::comprehensive-policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"policy","properties":{"__defaults":[],"arn":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:role/base-role-13896c1\"},\"Resource\":\"arn:aws:sns:us-west-2:894850187425:topic-c30c77d\"}],\"Version\":\"2012-10-17\"}"},"type":"aws:sns/topicPolicy:TopicPolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topicPolicy:TopicPolicy::policy"},"response":{"id":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","properties":{"arn":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","id":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","owner":"894850187425","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:role/base-role-13896c1\"},\"Resource\":\"arn:aws:sns:us-west-2:894850187425:topic-c30c77d\"}],\"Version\":\"2012-10-17\"}"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"],"name":"policy","object":{"arn":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","policy":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::894850187425:role/base-role-13896c1"},"Resource":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d"}],"Version":"2012-10-17"}},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"arn":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic"]},"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topic:Topic::topic","urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"]}},"sourcePosition":{"column":1,"line":337,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:sns/topicPolicy:TopicPolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","object":{"arn":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","id":"arn:aws:sns:us-west-2:894850187425:topic-c30c77d","owner":"894850187425","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:role/base-role-13896c1\"},\"Resource\":\"arn:aws:sns:us-west-2:894850187425:topic-c30c77d\"}],\"Version\":\"2012-10-17\"}"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sns/topicPolicy:TopicPolicy::policy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"queue","properties":{"__defaults":["contentBasedDeduplication","delaySeconds","fifoQueue","maxMessageSize","messageRetentionSeconds","name","receiveWaitTimeSeconds","visibilityTimeoutSeconds"],"contentBasedDeduplication":false,"delaySeconds":0,"fifoQueue":false,"maxMessageSize":262144,"messageRetentionSeconds":345600,"name":"queue-e7417f6","receiveWaitTimeSeconds":0,"visibilityTimeoutSeconds":30},"type":"aws:sqs/queue:Queue","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"},"response":{"id":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6","properties":{"__meta":"{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":180000000000,\"delete\":180000000000,\"update\":180000000000}}","arn":"arn:aws:sqs:us-west-2:894850187425:queue-e7417f6","contentBasedDeduplication":false,"deduplicationScope":"","delaySeconds":0,"fifoQueue":false,"fifoThroughputLimit":"","id":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6","kmsDataKeyReusePeriodSeconds":300,"kmsMasterKeyId":"","maxMessageSize":262144,"messageRetentionSeconds":345600,"name":"queue-e7417f6","namePrefix":"","policy":"","receiveWaitTimeSeconds":0,"redriveAllowPolicy":"","redrivePolicy":"","sqsManagedSseEnabled":true,"url":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6","visibilityTimeoutSeconds":30}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"name":"queue","object":{},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","sourcePosition":{"column":15,"line":352,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:sqs/queue:Queue","version":"7.0.0-alpha.0+dev"},"response":{"id":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6","object":{"__meta":"{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":180000000000,\"delete\":180000000000,\"update\":180000000000}}","arn":"arn:aws:sqs:us-west-2:894850187425:queue-e7417f6","contentBasedDeduplication":false,"deduplicationScope":"","delaySeconds":0,"fifoQueue":false,"fifoThroughputLimit":"","id":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6","kmsDataKeyReusePeriodSeconds":300,"kmsMasterKeyId":"","maxMessageSize":262144,"messageRetentionSeconds":345600,"name":"queue-e7417f6","namePrefix":"","policy":"","receiveWaitTimeSeconds":0,"redriveAllowPolicy":"","redrivePolicy":"","sqsManagedSseEnabled":true,"url":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6","visibilityTimeoutSeconds":30},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"q-policy","news":{"policy":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::894850187425:role/base-role-13896c1"},"Resource":"arn:aws:sqs:us-west-2:894850187425:queue-e7417f6"}],"Version":"2012-10-17"},"queueUrl":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6"},"olds":{},"randomSeed":"2QL4XMclkobuzpUCo9kkpna0INXFj4rgrypRMj60l5E=","type":"aws:sqs/queuePolicy:QueuePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queuePolicy:QueuePolicy::q-policy"},"response":{"inputs":{"__defaults":[],"policy":"{\"Statement\":[{\"Action\":\"sqs:SendMessage\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:role/base-role-13896c1\"},\"Resource\":\"arn:aws:sqs:us-west-2:894850187425:queue-e7417f6\"}],\"Version\":\"2012-10-17\"}","queueUrl":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"q-policy","properties":{"__defaults":[],"policy":"{\"Statement\":[{\"Action\":\"sqs:SendMessage\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:role/base-role-13896c1\"},\"Resource\":\"arn:aws:sqs:us-west-2:894850187425:queue-e7417f6\"}],\"Version\":\"2012-10-17\"}","queueUrl":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6"},"type":"aws:sqs/queuePolicy:QueuePolicy","urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queuePolicy:QueuePolicy::q-policy"},"response":{"id":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6","properties":{"__meta":"{\"schema_version\":\"1\"}","id":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6","policy":"{\"Statement\":[{\"Action\":\"sqs:SendMessage\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:role/base-role-13896c1\"},\"Resource\":\"arn:aws:sqs:us-west-2:894850187425:queue-e7417f6\"}],\"Version\":\"2012-10-17\"}","queueUrl":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role","urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"],"name":"q-policy","object":{"policy":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::894850187425:role/base-role-13896c1"},"Resource":"arn:aws:sqs:us-west-2:894850187425:queue-e7417f6"}],"Version":"2012-10-17"},"queueUrl":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6"},"parent":"urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test","propertyDependencies":{"policy":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role","urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"]},"queueUrl":{"urns":["urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queue:Queue::queue"]}},"sourcePosition":{"column":1,"line":353,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:sqs/queuePolicy:QueuePolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6","object":{"__meta":"{\"schema_version\":\"1\"}","id":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6","policy":"{\"Statement\":[{\"Action\":\"sqs:SendMessage\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::894850187425:role/base-role-13896c1\"},\"Resource\":\"arn:aws:sqs:us-west-2:894850187425:queue-e7417f6\"}],\"Version\":\"2012-10-17\"}","queueUrl":"https://sqs.us-west-2.amazonaws.com/894850187425/queue-e7417f6"},"urn":"urn:pulumi:test::iam-policy-doc-upgrade::aws:sqs/queuePolicy:QueuePolicy::q-policy"}}
{"method":"/pulumirpc.LanguageRuntime/Run","request":{"configPropertyMap":{},"info":{"entryPoint":".","options":{},"programDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts","rootDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts"},"loaderTarget":"127.0.0.1:53972","monitorAddress":"127.0.0.1:53971","organization":"organization","parallel":56,"program":".","project":"iam-policy-doc-upgrade","pwd":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestPolicyDocumentUpgrade2765216867/007/ts","stack":"test"},"response":{}}
{"method":"/grpc.health.v1.Health/Check","request":{},"response":{"status":"SERVING"}}
{"method":"/grpc.health.v1.Health/Check","request":{},"response":{"status":"SERVING"}}