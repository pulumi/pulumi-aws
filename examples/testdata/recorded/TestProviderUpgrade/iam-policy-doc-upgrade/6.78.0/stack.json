{
  "version": 3,
  "deployment": {
    "manifest": {
      "time": "2025-05-29T12:23:38.795678-04:00",
      "magic": "11dd750a61a175d48e7509de1b0b1e2b8b46ea64c589749a3f9a1ba622c9dd5e",
      "version": "v3.171.0"
    },
    "secrets_providers": {
      "type": "passphrase",
      "state": {
        "salt": "v1:2H6Yrh6ce7k=:v1:ZJypRs7Hbl2KNvtz:G+GZnxS7QqmtZ0WkTC4rFOdIJWnPnw=="
      }
    },
    "resources": [
      {
        "urn": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test",
        "custom": false,
        "type": "pulumi:pulumi:Stack",
        "outputs": {
          "dynamicBucketArn": "arn:aws:s3:::dynamic-bucket-3508d66",
          "testBucket": "arn:aws:s3:::test-bucket-24922bd",
          "testRole": "arn:aws:iam::616138583583:role/comprehensive-role-58ec1c3"
        },
        "created": "2025-05-29T16:23:24.935424Z",
        "modified": "2025-05-29T16:23:24.935424Z",
        "sourcePosition": "project:///node_modules/@pulumi/runtime/stack.ts#37,19"
      },
      {
        "urn": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev",
        "custom": true,
        "id": "e9f08f5f-60bb-404e-beb9-a98ac2c8da41",
        "type": "pulumi:providers:aws",
        "inputs": {
          "__internal": {},
          "region": "us-east-2",
          "skipCredentialsValidation": "false",
          "skipRegionValidation": "true",
          "version": "7.0.0-alpha.0+dev"
        },
        "outputs": {
          "region": "us-east-2",
          "skipCredentialsValidation": "false",
          "skipRegionValidation": "true",
          "version": "7.0.0-alpha.0+dev"
        },
        "created": "2025-05-29T16:23:28.792353Z",
        "modified": "2025-05-29T16:23:28.792353Z"
      },
      {
        "urn": "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role",
        "custom": true,
        "id": "base-role-1ed1734",
        "type": "aws:iam/role:Role",
        "inputs": {
          "__defaults": [
            "forceDetachPolicies",
            "maxSessionDuration",
            "name",
            "path"
          ],
          "assumeRolePolicy": "{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\"]},\"Sid\":\"AllowAWSPrincipal\"}],\"Version\":\"2012-10-17\"}",
          "forceDetachPolicies": false,
          "maxSessionDuration": 3600,
          "name": "base-role-1ed1734",
          "path": "/"
        },
        "outputs": {
          "arn": "arn:aws:iam::616138583583:role/base-role-1ed1734",
          "assumeRolePolicy": "{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\"]},\"Sid\":\"AllowAWSPrincipal\"}],\"Version\":\"2012-10-17\"}",
          "createDate": "2025-05-29T16:23:29Z",
          "description": "",
          "forceDetachPolicies": false,
          "id": "base-role-1ed1734",
          "inlinePolicies": [],
          "managedPolicyArns": [],
          "maxSessionDuration": 3600,
          "name": "base-role-1ed1734",
          "namePrefix": "",
          "path": "/",
          "permissionsBoundary": "",
          "uniqueId": "AROAY65FYVYPRWOUBTADX"
        },
        "parent": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test",
        "provider": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev::e9f08f5f-60bb-404e-beb9-a98ac2c8da41",
        "propertyDependencies": {
          "assumeRolePolicy": []
        },
        "created": "2025-05-29T16:23:29.357967Z",
        "modified": "2025-05-29T16:23:29.357967Z",
        "sourcePosition": "project:///index.ts#23,18"
      },
      {
        "urn": "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket",
        "custom": true,
        "id": "dynamic-bucket-3508d66",
        "type": "aws:s3/bucket:Bucket",
        "inputs": {
          "__defaults": [
            "acl",
            "bucket",
            "forceDestroy"
          ],
          "acl": "private",
          "bucket": "dynamic-bucket-3508d66",
          "forceDestroy": false
        },
        "outputs": {
          "accelerationStatus": "",
          "acl": "private",
          "arn": "arn:aws:s3:::dynamic-bucket-3508d66",
          "bucket": "dynamic-bucket-3508d66",
          "bucketDomainName": "dynamic-bucket-3508d66.s3.amazonaws.com",
          "bucketPrefix": null,
          "bucketRegionalDomainName": "dynamic-bucket-3508d66.s3.us-east-2.amazonaws.com",
          "corsRules": [],
          "forceDestroy": false,
          "grants": [],
          "hostedZoneId": "Z2O1EMRO9K5GLX",
          "id": "dynamic-bucket-3508d66",
          "lifecycleRules": [],
          "loggings": [],
          "objectLockConfiguration": null,
          "policy": null,
          "region": "us-east-2",
          "replicationConfiguration": null,
          "requestPayer": "BucketOwner",
          "serverSideEncryptionConfiguration": {
            "rule": {
              "applyServerSideEncryptionByDefault": {
                "kmsMasterKeyId": "",
                "sseAlgorithm": "AES256"
              },
              "bucketKeyEnabled": false
            }
          },
          "versioning": {
            "enabled": false,
            "mfaDelete": false
          },
          "website": null,
          "websiteDomain": null,
          "websiteEndpoint": null
        },
        "parent": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test",
        "provider": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev::e9f08f5f-60bb-404e-beb9-a98ac2c8da41",
        "created": "2025-05-29T16:23:30.121605Z",
        "modified": "2025-05-29T16:23:30.121605Z",
        "sourcePosition": "project:///index.ts#292,23"
      },
      {
        "urn": "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket",
        "custom": true,
        "id": "test-bucket-24922bd",
        "type": "aws:s3/bucket:Bucket",
        "inputs": {
          "__defaults": [
            "acl",
            "bucket",
            "forceDestroy"
          ],
          "acl": "private",
          "bucket": "test-bucket-24922bd",
          "forceDestroy": false
        },
        "outputs": {
          "accelerationStatus": "",
          "acl": "private",
          "arn": "arn:aws:s3:::test-bucket-24922bd",
          "bucket": "test-bucket-24922bd",
          "bucketDomainName": "test-bucket-24922bd.s3.amazonaws.com",
          "bucketPrefix": null,
          "bucketRegionalDomainName": "test-bucket-24922bd.s3.us-east-2.amazonaws.com",
          "corsRules": [],
          "forceDestroy": false,
          "grants": [],
          "hostedZoneId": "Z2O1EMRO9K5GLX",
          "id": "test-bucket-24922bd",
          "lifecycleRules": [],
          "loggings": [],
          "objectLockConfiguration": null,
          "policy": null,
          "region": "us-east-2",
          "replicationConfiguration": null,
          "requestPayer": "BucketOwner",
          "serverSideEncryptionConfiguration": {
            "rule": {
              "applyServerSideEncryptionByDefault": {
                "kmsMasterKeyId": "",
                "sseAlgorithm": "AES256"
              },
              "bucketKeyEnabled": false
            }
          },
          "versioning": {
            "enabled": false,
            "mfaDelete": false
          },
          "website": null,
          "websiteDomain": null,
          "websiteEndpoint": null
        },
        "parent": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test",
        "provider": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev::e9f08f5f-60bb-404e-beb9-a98ac2c8da41",
        "created": "2025-05-29T16:23:30.155664Z",
        "modified": "2025-05-29T16:23:30.155664Z",
        "sourcePosition": "project:///index.ts#21,16"
      },
      {
        "urn": "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role",
        "custom": true,
        "id": "comprehensive-role-58ec1c3",
        "type": "aws:iam/role:Role",
        "inputs": {
          "__defaults": [
            "forceDetachPolicies",
            "maxSessionDuration",
            "name",
            "path"
          ],
          "assumeRolePolicy": "{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\",\"arn:aws:iam::616138583583:role/base-role-1ed1734\"]},\"Sid\":\"AllowAWSPrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\",\"ec2.amazonaws.com\"]},\"Sid\":\"AllowServicePrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::123456789012:saml-provider/ExampleProvider\"},\"Sid\":\"AllowFederatedPrincipal\"}],\"Version\":\"2012-10-17\"}",
          "forceDetachPolicies": false,
          "maxSessionDuration": 3600,
          "name": "comprehensive-role-58ec1c3",
          "path": "/"
        },
        "outputs": {
          "arn": "arn:aws:iam::616138583583:role/comprehensive-role-58ec1c3",
          "assumeRolePolicy": "{\"Id\":\"comprehensive-policy-id\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::616138583583:root\",\"arn:aws:iam::616138583583:role/base-role-1ed1734\"]},\"Sid\":\"AllowAWSPrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\",\"ec2.amazonaws.com\"]},\"Sid\":\"AllowServicePrincipal\"},{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::123456789012:saml-provider/ExampleProvider\"},\"Sid\":\"AllowFederatedPrincipal\"}],\"Version\":\"2012-10-17\"}",
          "createDate": "2025-05-29T16:23:37Z",
          "description": "",
          "forceDetachPolicies": false,
          "id": "comprehensive-role-58ec1c3",
          "inlinePolicies": [],
          "managedPolicyArns": [],
          "maxSessionDuration": 3600,
          "name": "comprehensive-role-58ec1c3",
          "namePrefix": "",
          "path": "/",
          "permissionsBoundary": "",
          "uniqueId": "AROAY65FYVYPVARKNTLKA"
        },
        "parent": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test",
        "dependencies": [
          "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"
        ],
        "provider": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev::e9f08f5f-60bb-404e-beb9-a98ac2c8da41",
        "propertyDependencies": {
          "assumeRolePolicy": [
            "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"
          ]
        },
        "created": "2025-05-29T16:23:37.726481Z",
        "modified": "2025-05-29T16:23:37.726481Z",
        "sourcePosition": "project:///index.ts#43,27"
      },
      {
        "urn": "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::edge-cases-policy",
        "custom": true,
        "id": "comprehensive-role-58ec1c3:edge-cases-policy-663f4d8",
        "type": "aws:iam/rolePolicy:RolePolicy",
        "inputs": {
          "__defaults": [
            "name"
          ],
          "name": "edge-cases-policy-663f4d8",
          "policy": "{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-24922bd\"]},{\"Condition\":{\"StringNotEquals\":{\"aws:RequestTag/approved\":\"true\"}},\"Effect\":\"Deny\",\"NotAction\":\"s3:GetBucketLocation\",\"NotResource\":\"arn:aws:s3:::test-bucket-24922bd/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2008-10-17\"}",
          "role": "comprehensive-role-58ec1c3"
        },
        "outputs": {
          "id": "comprehensive-role-58ec1c3:edge-cases-policy-663f4d8",
          "name": "edge-cases-policy-663f4d8",
          "namePrefix": "",
          "policy": "{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-24922bd\"]},{\"Condition\":{\"StringNotEquals\":{\"aws:RequestTag/approved\":\"true\"}},\"Effect\":\"Deny\",\"NotAction\":\"s3:GetBucketLocation\",\"NotResource\":\"arn:aws:s3:::test-bucket-24922bd/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2008-10-17\"}",
          "role": "comprehensive-role-58ec1c3"
        },
        "parent": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test",
        "dependencies": [
          "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket",
          "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"
        ],
        "provider": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev::e9f08f5f-60bb-404e-beb9-a98ac2c8da41",
        "propertyDependencies": {
          "policy": [
            "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"
          ],
          "role": [
            "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"
          ]
        },
        "created": "2025-05-29T16:23:37.938656Z",
        "modified": "2025-05-29T16:23:37.938656Z",
        "sourcePosition": "project:///index.ts#264,1"
      },
      {
        "urn": "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::comprehensive-policy",
        "custom": true,
        "id": "comprehensive-role-58ec1c3:comprehensive-policy-77f33c5",
        "type": "aws:iam/rolePolicy:RolePolicy",
        "inputs": {
          "__defaults": [
            "name"
          ],
          "name": "comprehensive-policy-77f33c5",
          "policy": "{\"Id\":\"test-policy-document-id\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-24922bd/*\",\"Sid\":\"ActionArrayTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-24922bd\",\"Sid\":\"ActionStringTest\"},{\"Effect\":\"Deny\",\"NotAction\":[\"s3:GetObject\",\"s3:PutObject\"],\"Resource\":\"arn:aws:s3:::test-bucket-24922bd\",\"Sid\":\"NotActionTest\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-24922bd/*\",\"arn:aws:s3:::test-bucket-24922bd/public/*\"],\"Sid\":\"ResourceArrayTest\"},{\"Action\":\"s3:GetBucketLocation\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-24922bd\",\"Sid\":\"ResourceStringTest\"},{\"Action\":\"s3:DeleteObject\",\"Effect\":\"Deny\",\"NotResource\":\"arn:aws:s3:::test-bucket-24922bd/protected/*\",\"Sid\":\"NotResourceTest\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::test-bucket-24922bd\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::example-*\"},\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\",\"aws:SecureTransport\":\"true\"},\"DateGreaterThan\":{\"aws:RequestTime\":\"2023-01-01T00:00:00Z\"},\"DateLessThan\":{\"aws:RequestTime\":\"2025-01-01T00:00:00Z\"},\"ForAllValues:StringEquals\":{\"aws:RequestTag/team\":[\"dev\",\"ops\"]},\"ForAnyValue:StringLike\":{\"s3:object-tag-keys\":[\"environment\",\"team\"]},\"IpAddress\":{\"aws:SourceIp\":[\"203.0.113.0/24\",\"2001:DB8:1234:5678::/64\"]},\"IpAddressIfExists\":{\"aws:SourceIp\":\"203.0.113.0/24\"},\"Null\":{\"aws:RequestTag/environment\":\"false\"},\"NumericGreaterThan\":{\"s3:max-keys\":\"100\"},\"NumericLessThanEquals\":{\"s3:object-size\":\"1048576\"},\"StringEquals\":{\"aws:RequestTag/environment\":\"production\",\"s3:ExistingObjectTag/classification\":[\"public\",\"internal\"]},\"StringLike\":{\"s3:prefix\":[\"${aws:username}/*\",\"public/*\"]},\"StringNotEquals\":{\"aws:RequestTag/team\":\"external\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-24922bd/*\",\"Sid\":\"ComplexConditionsTest\"}],\"Version\":\"2012-10-17\"}",
          "role": "comprehensive-role-58ec1c3"
        },
        "outputs": {
          "id": "comprehensive-role-58ec1c3:comprehensive-policy-77f33c5",
          "name": "comprehensive-policy-77f33c5",
          "namePrefix": "",
          "policy": "{\"Version\":\"2012-10-17\",\"Id\":\"test-policy-document-id\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-24922bd/*\",\"Sid\":\"ActionArrayTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-24922bd\",\"Sid\":\"ActionStringTest\"},{\"Effect\":\"Deny\",\"NotAction\":[\"s3:GetObject\",\"s3:PutObject\"],\"Resource\":\"arn:aws:s3:::test-bucket-24922bd\",\"Sid\":\"NotActionTest\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::test-bucket-24922bd/*\",\"arn:aws:s3:::test-bucket-24922bd/public/*\"],\"Sid\":\"ResourceArrayTest\"},{\"Action\":\"s3:GetBucketLocation\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-24922bd\",\"Sid\":\"ResourceStringTest\"},{\"Action\":\"s3:DeleteObject\",\"Effect\":\"Deny\",\"NotResource\":\"arn:aws:s3:::test-bucket-24922bd/protected/*\",\"Sid\":\"NotResourceTest\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::test-bucket-24922bd\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::example-*\"},\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\",\"aws:SecureTransport\":\"true\"},\"DateGreaterThan\":{\"aws:RequestTime\":\"2023-01-01T00:00:00Z\"},\"DateLessThan\":{\"aws:RequestTime\":\"2025-01-01T00:00:00Z\"},\"ForAllValues:StringEquals\":{\"aws:RequestTag/team\":[\"dev\",\"ops\"]},\"ForAnyValue:StringLike\":{\"s3:object-tag-keys\":[\"environment\",\"team\"]},\"IpAddress\":{\"aws:SourceIp\":[\"203.0.113.0/24\",\"2001:DB8:1234:5678::/64\"]},\"IpAddressIfExists\":{\"aws:SourceIp\":\"203.0.113.0/24\"},\"Null\":{\"aws:RequestTag/environment\":\"false\"},\"NumericGreaterThan\":{\"s3:max-keys\":\"100\"},\"NumericLessThanEquals\":{\"s3:object-size\":\"1048576\"},\"StringEquals\":{\"aws:RequestTag/environment\":\"production\",\"s3:ExistingObjectTag/classification\":[\"public\",\"internal\"]},\"StringLike\":{\"s3:prefix\":[\"${aws:username}/*\",\"public/*\"]},\"StringNotEquals\":{\"aws:RequestTag/team\":\"external\"}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::test-bucket-24922bd/*\",\"Sid\":\"ComplexConditionsTest\"}]}",
          "role": "comprehensive-role-58ec1c3"
        },
        "parent": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test",
        "dependencies": [
          "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket",
          "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"
        ],
        "provider": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev::e9f08f5f-60bb-404e-beb9-a98ac2c8da41",
        "propertyDependencies": {
          "policy": [
            "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"
          ],
          "role": [
            "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"
          ]
        },
        "created": "2025-05-29T16:23:38.019402Z",
        "modified": "2025-05-29T16:23:38.019402Z",
        "sourcePosition": "project:///index.ts#81,1"
      },
      {
        "urn": "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/rolePolicy:RolePolicy::dynamic-policy",
        "custom": true,
        "id": "comprehensive-role-58ec1c3:dynamic-policy-ee16a6a",
        "type": "aws:iam/rolePolicy:RolePolicy",
        "inputs": {
          "__defaults": [
            "name"
          ],
          "name": "dynamic-policy-ee16a6a",
          "policy": "{\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"StringEquals\":{\"s3:ExistingBucketName\":\"dynamic-bucket-3508d66\"}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::dynamic-bucket-3508d66\",\"arn:aws:s3:::dynamic-bucket-3508d66/*\"]}],\"Version\":\"2012-10-17\"}",
          "role": "comprehensive-role-58ec1c3"
        },
        "outputs": {
          "id": "comprehensive-role-58ec1c3:dynamic-policy-ee16a6a",
          "name": "dynamic-policy-ee16a6a",
          "namePrefix": "",
          "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"StringEquals\":{\"s3:ExistingBucketName\":\"dynamic-bucket-3508d66\"}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::dynamic-bucket-3508d66\",\"arn:aws:s3:::dynamic-bucket-3508d66/*\"]}]}",
          "role": "comprehensive-role-58ec1c3"
        },
        "parent": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test",
        "dependencies": [
          "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket",
          "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"
        ],
        "provider": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev::e9f08f5f-60bb-404e-beb9-a98ac2c8da41",
        "propertyDependencies": {
          "policy": [
            "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::dynamic-bucket"
          ],
          "role": [
            "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::comprehensive-role"
          ]
        },
        "created": "2025-05-29T16:23:38.063215Z",
        "modified": "2025-05-29T16:23:38.063215Z",
        "sourcePosition": "project:///index.ts#293,1"
      },
      {
        "urn": "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucketPolicy:BucketPolicy::bucket-policy",
        "custom": true,
        "id": "test-bucket-24922bd",
        "type": "aws:s3/bucketPolicy:BucketPolicy",
        "inputs": {
          "__defaults": [],
          "bucket": "test-bucket-24922bd",
          "policy": "{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:root\"},\"Resource\":\"arn:aws:s3:::test-bucket-24922bd/*\",\"Sid\":\"PrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-1ed1734\",\"arn:aws:iam::616138583583:root\"]},\"Resource\":\"arn:aws:s3:::test-bucket-24922bd\",\"Sid\":\"NotPrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::test-bucket-24922bd\"},{\"Action\":[\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]},\"Resource\":[\"arn:aws:s3:::test-bucket-24922bd\"]},{\"Action\":\"s3:GetObject\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-1ed1734\",\"arn:aws:iam::616138583583:root\"]},\"NotResource\":\"arn:aws:s3:::test-bucket-24922bd/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2012-10-17\"}"
        },
        "outputs": {
          "bucket": "test-bucket-24922bd",
          "id": "test-bucket-24922bd",
          "policy": "{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::616138583583:root\"},\"Resource\":\"arn:aws:s3:::test-bucket-24922bd/*\",\"Sid\":\"PrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-1ed1734\",\"arn:aws:iam::616138583583:root\"]},\"Resource\":\"arn:aws:s3:::test-bucket-24922bd\",\"Sid\":\"NotPrincipalTest\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::test-bucket-24922bd\"},{\"Action\":[\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]},\"Resource\":[\"arn:aws:s3:::test-bucket-24922bd\"]},{\"Action\":\"s3:GetObject\",\"Effect\":\"Deny\",\"NotPrincipal\":{\"AWS\":[\"arn:aws:iam::616138583583:role/base-role-1ed1734\",\"arn:aws:iam::616138583583:root\"]},\"NotResource\":\"arn:aws:s3:::test-bucket-24922bd/logs/*\",\"Sid\":\"ComprehensiveDenyTest\"}],\"Version\":\"2012-10-17\"}"
        },
        "parent": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:pulumi:Stack::iam-policy-doc-upgrade-test",
        "dependencies": [
          "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket",
          "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"
        ],
        "provider": "urn:pulumi:test::iam-policy-doc-upgrade::pulumi:providers:aws::default_7_0_0_alpha_0_dev::e9f08f5f-60bb-404e-beb9-a98ac2c8da41",
        "propertyDependencies": {
          "bucket": [
            "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket"
          ],
          "policy": [
            "urn:pulumi:test::iam-policy-doc-upgrade::aws:s3/bucket:Bucket::test-bucket",
            "urn:pulumi:test::iam-policy-doc-upgrade::aws:iam/role:Role::base-role"
          ]
        },
        "created": "2025-05-29T16:23:38.732392Z",
        "modified": "2025-05-29T16:23:38.732392Z",
        "sourcePosition": "project:///index.ts#203,1"
      }
    ],
    "metadata": {}
  }
}