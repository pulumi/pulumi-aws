{"method":"/pulumirpc.LanguageRuntime/GetPluginInfo","request":{},"response":{"version":"3.173.0-dev.0"}}
{"method":"/pulumirpc.LanguageRuntime/GetRequiredPackages","request":{"info":{"entryPoint":".","options":{},"programDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestLifecyclePolicyDocumentUpgrade1111637876/007/ecr","rootDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestLifecyclePolicyDocumentUpgrade1111637876/007/ecr"}},"response":{"packages":[{"kind":"resource","name":"aws","version":"v7.0.0-alpha.0+dev"}]}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"parameterization"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"outputValues"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"invokeTransforms"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"deletedWith"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"aliasSpecs"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"secrets"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"resourceReferences"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/SupportsFeature","request":{"id":"transforms"},"response":{"hasSupport":true}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"customTimeouts":{},"name":"ecr-test","object":{},"sourcePosition":{"column":19,"line":37,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestLifecyclePolicyDocumentUpgrade1111637876/007/ecr/node_modules/@pulumi/runtime/stack.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"pulumi:pulumi:Stack"},"response":{"object":{},"urn":"urn:pulumi:test::ecr::pulumi:pulumi:Stack::ecr-test"}}
{"method":"/pulumirpc.ResourceProvider/Handshake","request":{"configureWithUrn":true,"engineAddress":"127.0.0.1:57265","programDirectory":"/Users/chall/.pulumi/plugins/resource-aws-v6.78.0","rootDirectory":"/Users/chall/.pulumi/plugins/resource-aws-v6.78.0","supportsRefreshBeforeUpdate":true}}
{"method":"/pulumirpc.ResourceProvider/GetPluginInfo","request":{},"response":{"version":"6.78.0"}}
{"method":"/pulumirpc.ResourceProvider/CheckConfig","request":{"name":"prov","news":{"region":"us-west-2","skipCredentialsValidation":"false","skipRegionValidation":"true","version":"7.0.0-alpha.0+dev"},"olds":{},"type":"pulumi:providers:aws","urn":"urn:pulumi:test::ecr::pulumi:providers:aws::prov"},"response":{"inputs":{"region":"us-west-2","skipCredentialsValidation":"false","skipRegionValidation":"true","version":"7.0.0-alpha.0+dev"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResourceOutputs","request":{"outputs":{},"urn":"urn:pulumi:test::ecr::pulumi:pulumi:Stack::ecr-test"},"response":{}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"additionalSecretOutputs":["accessKey","secretKey","token"],"aliasSpecs":true,"custom":true,"customTimeouts":{},"name":"prov","object":{"region":"us-west-2","skipCredentialsValidation":"false","skipRegionValidation":"true"},"parent":"urn:pulumi:test::ecr::pulumi:pulumi:Stack::ecr-test","propertyDependencies":{"region":{},"skipCredentialsValidation":{},"skipRegionValidation":{}},"sourcePosition":{"column":9,"line":145,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestLifecyclePolicyDocumentUpgrade1111637876/007/ecr/node_modules/@pulumi/provider.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"pulumi:providers:aws","version":"7.0.0-alpha.0+dev"},"response":{"id":"54281bff-9831-4a7b-9949-99d28882d2e4","object":{"region":"us-west-2","skipCredentialsValidation":"false","skipRegionValidation":"true","version":"7.0.0-alpha.0+dev"},"urn":"urn:pulumi:test::ecr::pulumi:providers:aws::prov"}}
{"method":"/pulumirpc.ResourceProvider/Configure","request":{"acceptResources":true,"acceptSecrets":true,"args":{"region":"us-west-2","skipCredentialsValidation":"false","skipRegionValidation":"true","version":"7.0.0-alpha.0+dev"},"id":"54281bff-9831-4a7b-9949-99d28882d2e4","name":"prov","sendsOldInputs":true,"sendsOldInputsToDelete":true,"type":"pulumi:providers:aws","urn":"urn:pulumi:test::ecr::pulumi:providers:aws::prov","variables":{"aws:config:region":"us-west-2","aws:config:skipCredentialsValidation":"false","aws:config:skipRegionValidation":"true"}},"response":{"supportsAutonamingConfiguration":true,"supportsPreview":true}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"myrepository","news":{},"olds":{},"randomSeed":"vhP5DVFINpbCpD6wg6ascR/HWYiJujWjcLipGN9DSG4=","type":"aws:ecr/repository:Repository","urn":"urn:pulumi:test::ecr::aws:ecr/repository:Repository::myrepository"},"response":{"inputs":{"__defaults":["imageTagMutability","name"],"imageTagMutability":"MUTABLE","name":"myrepository-9733a70"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"myrepository","properties":{"__defaults":["imageTagMutability","name"],"imageTagMutability":"MUTABLE","name":"myrepository-9733a70"},"type":"aws:ecr/repository:Repository","urn":"urn:pulumi:test::ecr::aws:ecr/repository:Repository::myrepository"},"response":{"id":"myrepository-9733a70","properties":{"__meta":"{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"delete\":1200000000000}}","arn":"arn:aws:ecr:us-west-2:894850187425:repository/myrepository-9733a70","encryptionConfigurations":[{"encryptionType":"AES256","kmsKey":""}],"forceDelete":null,"id":"myrepository-9733a70","imageScanningConfiguration":{"scanOnPush":false},"imageTagMutability":"MUTABLE","name":"myrepository-9733a70","registryId":"894850187425","repositoryUrl":"894850187425.dkr.ecr.us-west-2.amazonaws.com/myrepository-9733a70"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"name":"myrepository","object":{},"parent":"urn:pulumi:test::ecr::pulumi:pulumi:Stack::ecr-test","provider":"urn:pulumi:test::ecr::pulumi:providers:aws::prov::54281bff-9831-4a7b-9949-99d28882d2e4","sourcePosition":{"column":20,"line":21,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestLifecyclePolicyDocumentUpgrade1111637876/007/ecr/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:ecr/repository:Repository","version":"7.0.0-alpha.0+dev"},"response":{"id":"myrepository-9733a70","object":{"__meta":"{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"delete\":1200000000000}}","arn":"arn:aws:ecr:us-west-2:894850187425:repository/myrepository-9733a70","encryptionConfigurations":[{"encryptionType":"AES256","kmsKey":""}],"forceDelete":null,"id":"myrepository-9733a70","imageScanningConfiguration":{"scanOnPush":false},"imageTagMutability":"MUTABLE","name":"myrepository-9733a70","registryId":"894850187425","repositoryUrl":"894850187425.dkr.ecr.us-west-2.amazonaws.com/myrepository-9733a70"},"urn":"urn:pulumi:test::ecr::aws:ecr/repository:Repository::myrepository"}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"mylifecyclepolicy","news":{"policy":{"rules":[{"action":{"type":"expire"},"description":"Expire images older than 14 days","rulePriority":1,"selection":{"countNumber":2,"countType":"sinceImagePushed","countUnit":"days","tagStatus":"untagged"}}]},"repository":"myrepository-9733a70"},"olds":{},"randomSeed":"THhcUOzwjeNhxni3EukAuU5UYtFu3d7BuMcEKl/gfW0=","type":"aws:ecr/lifecyclePolicy:LifecyclePolicy","urn":"urn:pulumi:test::ecr::aws:ecr/lifecyclePolicy:LifecyclePolicy::mylifecyclepolicy"},"response":{"inputs":{"__defaults":[],"policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire images older than 14 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":2,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}}]}","repository":"myrepository-9733a70"}}}
{"method":"/pulumirpc.ResourceProvider/Check","request":{"name":"myrepositorypolicy","news":{"policy":{"Statement":[{"Action":["ecr:GetDownloadUrlForLayer","ecr:BatchGetImage","ecr:BatchCheckLayerAvailability","ecr:PutImage","ecr:InitiateLayerUpload","ecr:UploadLayerPart","ecr:CompleteLayerUpload","ecr:DescribeRepositories","ecr:GetRepositoryPolicy","ecr:ListImages","ecr:DeleteRepository","ecr:BatchDeleteImage","ecr:SetRepositoryPolicy","ecr:DeleteRepositoryPolicy"],"Effect":"Allow","Principal":"*","Sid":"new policy"}],"Version":"2012-10-17"},"repository":"myrepository-9733a70"},"olds":{},"randomSeed":"66+QgXDRdCONTYP4MNr5B2ZGlF1fnYctocscopgzbU0=","type":"aws:ecr/repositoryPolicy:RepositoryPolicy","urn":"urn:pulumi:test::ecr::aws:ecr/repositoryPolicy:RepositoryPolicy::myrepositorypolicy"},"response":{"inputs":{"__defaults":[],"policy":"{\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\",\"ecr:PutImage\",\"ecr:InitiateLayerUpload\",\"ecr:UploadLayerPart\",\"ecr:CompleteLayerUpload\",\"ecr:DescribeRepositories\",\"ecr:GetRepositoryPolicy\",\"ecr:ListImages\",\"ecr:DeleteRepository\",\"ecr:BatchDeleteImage\",\"ecr:SetRepositoryPolicy\",\"ecr:DeleteRepositoryPolicy\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Sid\":\"new policy\"}],\"Version\":\"2012-10-17\"}","repository":"myrepository-9733a70"}}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"mylifecyclepolicy","properties":{"__defaults":[],"policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire images older than 14 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":2,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}}]}","repository":"myrepository-9733a70"},"type":"aws:ecr/lifecyclePolicy:LifecyclePolicy","urn":"urn:pulumi:test::ecr::aws:ecr/lifecyclePolicy:LifecyclePolicy::mylifecyclepolicy"},"response":{"id":"myrepository-9733a70","properties":{"id":"myrepository-9733a70","policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire images older than 14 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":2,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}}]}","registryId":"894850187425","repository":"myrepository-9733a70"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::ecr::aws:ecr/repository:Repository::myrepository"],"name":"mylifecyclepolicy","object":{"policy":{"rules":[{"action":{"type":"expire"},"description":"Expire images older than 14 days","rulePriority":1,"selection":{"countNumber":2,"countType":"sinceImagePushed","countUnit":"days","tagStatus":"untagged"}}]},"repository":"myrepository-9733a70"},"parent":"urn:pulumi:test::ecr::pulumi:pulumi:Stack::ecr-test","propertyDependencies":{"policy":{},"repository":{"urns":["urn:pulumi:test::ecr::aws:ecr/repository:Repository::myrepository"]}},"provider":"urn:pulumi:test::ecr::pulumi:providers:aws::prov::54281bff-9831-4a7b-9949-99d28882d2e4","sourcePosition":{"column":25,"line":51,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestLifecyclePolicyDocumentUpgrade1111637876/007/ecr/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:ecr/lifecyclePolicy:LifecyclePolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"myrepository-9733a70","object":{"id":"myrepository-9733a70","policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire images older than 14 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":2,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}}]}","registryId":"894850187425","repository":"myrepository-9733a70"},"urn":"urn:pulumi:test::ecr::aws:ecr/lifecyclePolicy:LifecyclePolicy::mylifecyclepolicy"}}
{"method":"/pulumirpc.ResourceProvider/Create","request":{"name":"myrepositorypolicy","properties":{"__defaults":[],"policy":"{\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\",\"ecr:PutImage\",\"ecr:InitiateLayerUpload\",\"ecr:UploadLayerPart\",\"ecr:CompleteLayerUpload\",\"ecr:DescribeRepositories\",\"ecr:GetRepositoryPolicy\",\"ecr:ListImages\",\"ecr:DeleteRepository\",\"ecr:BatchDeleteImage\",\"ecr:SetRepositoryPolicy\",\"ecr:DeleteRepositoryPolicy\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Sid\":\"new policy\"}],\"Version\":\"2012-10-17\"}","repository":"myrepository-9733a70"},"type":"aws:ecr/repositoryPolicy:RepositoryPolicy","urn":"urn:pulumi:test::ecr::aws:ecr/repositoryPolicy:RepositoryPolicy::myrepositorypolicy"},"response":{"id":"myrepository-9733a70","properties":{"id":"myrepository-9733a70","policy":"{\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\",\"ecr:PutImage\",\"ecr:InitiateLayerUpload\",\"ecr:UploadLayerPart\",\"ecr:CompleteLayerUpload\",\"ecr:DescribeRepositories\",\"ecr:GetRepositoryPolicy\",\"ecr:ListImages\",\"ecr:DeleteRepository\",\"ecr:BatchDeleteImage\",\"ecr:SetRepositoryPolicy\",\"ecr:DeleteRepositoryPolicy\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Sid\":\"new policy\"}],\"Version\":\"2012-10-17\"}","registryId":"894850187425","repository":"myrepository-9733a70"}}}
{"method":"/pulumirpc.ResourceMonitor/RegisterResource","request":{"acceptResources":true,"acceptSecrets":true,"aliasSpecs":true,"custom":true,"customTimeouts":{},"dependencies":["urn:pulumi:test::ecr::aws:ecr/repository:Repository::myrepository"],"name":"myrepositorypolicy","object":{"policy":{"Statement":[{"Action":["ecr:GetDownloadUrlForLayer","ecr:BatchGetImage","ecr:BatchCheckLayerAvailability","ecr:PutImage","ecr:InitiateLayerUpload","ecr:UploadLayerPart","ecr:CompleteLayerUpload","ecr:DescribeRepositories","ecr:GetRepositoryPolicy","ecr:ListImages","ecr:DeleteRepository","ecr:BatchDeleteImage","ecr:SetRepositoryPolicy","ecr:DeleteRepositoryPolicy"],"Effect":"Allow","Principal":"*","Sid":"new policy"}],"Version":"2012-10-17"},"repository":"myrepository-9733a70"},"parent":"urn:pulumi:test::ecr::pulumi:pulumi:Stack::ecr-test","propertyDependencies":{"policy":{},"repository":{"urns":["urn:pulumi:test::ecr::aws:ecr/repository:Repository::myrepository"]}},"provider":"urn:pulumi:test::ecr::pulumi:providers:aws::prov::54281bff-9831-4a7b-9949-99d28882d2e4","sourcePosition":{"column":26,"line":23,"uri":"file:///private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestLifecyclePolicyDocumentUpgrade1111637876/007/ecr/index.ts"},"supportsPartialValues":true,"supportsResultReporting":true,"type":"aws:ecr/repositoryPolicy:RepositoryPolicy","version":"7.0.0-alpha.0+dev"},"response":{"id":"myrepository-9733a70","object":{"id":"myrepository-9733a70","policy":"{\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\",\"ecr:PutImage\",\"ecr:InitiateLayerUpload\",\"ecr:UploadLayerPart\",\"ecr:CompleteLayerUpload\",\"ecr:DescribeRepositories\",\"ecr:GetRepositoryPolicy\",\"ecr:ListImages\",\"ecr:DeleteRepository\",\"ecr:BatchDeleteImage\",\"ecr:SetRepositoryPolicy\",\"ecr:DeleteRepositoryPolicy\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Sid\":\"new policy\"}],\"Version\":\"2012-10-17\"}","registryId":"894850187425","repository":"myrepository-9733a70"},"urn":"urn:pulumi:test::ecr::aws:ecr/repositoryPolicy:RepositoryPolicy::myrepositorypolicy"}}
{"method":"/pulumirpc.LanguageRuntime/Run","request":{"config":{"aws:envRegion":"us-west-2","aws:region":"INVALID_REGION"},"configPropertyMap":{"aws:envRegion":"us-west-2","aws:region":"INVALID_REGION"},"info":{"entryPoint":".","options":{},"programDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestLifecyclePolicyDocumentUpgrade1111637876/007/ecr","rootDirectory":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestLifecyclePolicyDocumentUpgrade1111637876/007/ecr"},"loaderTarget":"127.0.0.1:57270","monitorAddress":"127.0.0.1:57269","organization":"organization","parallel":56,"program":".","project":"ecr","pwd":"/private/var/folders/3b/6mr1jkqx7r797ff75k27jfjc0000gn/T/TestLifecyclePolicyDocumentUpgrade1111637876/007/ecr","stack":"test"},"response":{}}
{"method":"/grpc.health.v1.Health/Check","request":{},"response":{"status":"SERVING"}}
{"method":"/grpc.health.v1.Health/Check","request":{},"response":{"status":"SERVING"}}