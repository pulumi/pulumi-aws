From 2d42f7235007bece2ce6c99c8491a18a50ae80f4 Mon Sep 17 00:00:00 2001
From: Richard Shade <richard@pulumi.com>
Date: Fri, 6 Jan 2023 15:31:22 -0600
Subject: [PATCH 18/28] fix: Adding back in removeAddons

---
 internal/service/eks/cluster.go | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/internal/service/eks/cluster.go b/internal/service/eks/cluster.go
index bdb7dc949a..924964ae65 100644
--- a/internal/service/eks/cluster.go
+++ b/internal/service/eks/cluster.go
@@ -381,6 +381,10 @@ func resourceClusterCreate(ctx context.Context, d *schema.ResourceData, meta int
 		return diag.Errorf("waiting for EKS Cluster (%s) create: %s", d.Id(), err)
 	}
 
+	if err = removeAddons(d, conn); err != nil {
+		return diag.Errorf("removing addons (%s): %s", d.Id(), err)
+	}
+
 	return resourceClusterRead(ctx, d, meta)
 }
 
