From ec4d3d287a3315e65a4dfb6e3fcad1bd46b99e6f Mon Sep 17 00:00:00 2001
From: Daniel Bradley <daniel@pulumi.com>
Date: Wed, 9 Nov 2022 17:37:35 +0000
Subject: [PATCH 13/26] Add custom appautoscaling examples

---
 .../r/appautoscaling_policy.html.markdown     | 28 +++++++++++++++++++
 .../r/appautoscaling_target.html.markdown     | 12 ++++++++
 2 files changed, 40 insertions(+)

diff --git a/website/docs/r/appautoscaling_policy.html.markdown b/website/docs/r/appautoscaling_policy.html.markdown
index b281e542ae..9b1a7483d2 100644
--- a/website/docs/r/appautoscaling_policy.html.markdown
+++ b/website/docs/r/appautoscaling_policy.html.markdown
@@ -116,6 +116,34 @@ resource "aws_appautoscaling_policy" "replicas" {
 }
 ```
 
+### MSK / Kafka Autoscaling
+
+```hcl
+resource "aws_appautoscaling_target" "msk_target" {
+  service_namespace  = "kafka"
+  scalable_dimension = "kafka:broker-storage:VolumeSize"
+  resource_id        = "${aws_msk_cluster.example.arn}"
+  min_capacity       = 1
+  max_capacity       = 8
+}
+
+resource "aws_appautoscaling_policy" "targets" {
+  name               = "storage-size-auto-scaling"
+  service_namespace  = aws_appautoscaling_target.msk_target.service_namespace
+  scalable_dimension = aws_appautoscaling_target.msk_target.scalable_dimension
+  resource_id        = aws_appautoscaling_target.msk_target.resource_id
+  policy_type        = "TargetTrackingScaling"
+
+  target_tracking_scaling_policy_configuration {
+    predefined_metric_specification {
+      predefined_metric_type = "KafkaBrokerStorageUtilization"
+    }
+
+    target_value = 55
+  }
+}
+```
+
 ## Argument Reference
 
 The following arguments are supported:
diff --git a/website/docs/r/appautoscaling_target.html.markdown b/website/docs/r/appautoscaling_target.html.markdown
index 7060afc3b7..8cc3132712 100644
--- a/website/docs/r/appautoscaling_target.html.markdown
+++ b/website/docs/r/appautoscaling_target.html.markdown
@@ -62,6 +62,18 @@ resource "aws_appautoscaling_target" "replicas" {
 }
 ```
 
+### MSK / Kafka Autoscaling
+
+```hcl
+resource "aws_appautoscaling_target" "msk_target" {
+  service_namespace  = "kafka"
+  scalable_dimension = "kafka:broker-storage:VolumeSize"
+  resource_id        = "${aws_msk_cluster.example.arn}"
+  min_capacity       = 1
+  max_capacity       = 8
+}
+```
+
 ## Argument Reference
 
 The following arguments are supported:
