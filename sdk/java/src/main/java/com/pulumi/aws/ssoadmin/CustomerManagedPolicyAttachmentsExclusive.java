// *** WARNING: this file was generated by pulumi-language-java. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package com.pulumi.aws.ssoadmin;

import com.pulumi.aws.Utilities;
import com.pulumi.aws.ssoadmin.CustomerManagedPolicyAttachmentsExclusiveArgs;
import com.pulumi.aws.ssoadmin.inputs.CustomerManagedPolicyAttachmentsExclusiveState;
import com.pulumi.aws.ssoadmin.outputs.CustomerManagedPolicyAttachmentsExclusiveCustomerManagedPolicyReference;
import com.pulumi.aws.ssoadmin.outputs.CustomerManagedPolicyAttachmentsExclusiveTimeouts;
import com.pulumi.core.Output;
import com.pulumi.core.annotations.Export;
import com.pulumi.core.annotations.ResourceType;
import com.pulumi.core.internal.Codegen;
import java.lang.String;
import java.util.List;
import java.util.Optional;
import javax.annotation.Nullable;

/**
 * Resource for managing exclusive AWS SSO Admin Customer Managed Policy Attachments.
 * 
 * This resource is designed to manage all customer managed policy attachments for an SSO permission set. Using this resource, Terraform will remove any customer managed policies attached to the permission set that are not defined in the configuration.
 * 
 * !&gt; **WARNING:** Do not use this resource together with the `aws.ssoadmin.CustomerManagedPolicyAttachment` resource for the same permission set. Doing so will cause a conflict and will lead to customer managed policies being removed.
 * 
 * &gt; Destruction of this resource means Terraform will no longer manage the customer managed policy attachments, **but will not detach any policies**. The permission set will retain all customer managed policies that were attached at the time of destruction.
 * 
 * ## Example Usage
 * 
 * ### Basic Usage
 * 
 * <pre>
 * {@code
 * package generated_program;
 * 
 * import com.pulumi.Context;
 * import com.pulumi.Pulumi;
 * import com.pulumi.core.Output;
 * import com.pulumi.aws.ssoadmin.SsoadminFunctions;
 * import com.pulumi.aws.ssoadmin.inputs.GetInstancesArgs;
 * import com.pulumi.aws.ssoadmin.PermissionSet;
 * import com.pulumi.aws.ssoadmin.PermissionSetArgs;
 * import com.pulumi.aws.iam.Policy;
 * import com.pulumi.aws.iam.PolicyArgs;
 * import com.pulumi.aws.ssoadmin.CustomerManagedPolicyAttachmentsExclusive;
 * import com.pulumi.aws.ssoadmin.CustomerManagedPolicyAttachmentsExclusiveArgs;
 * import com.pulumi.aws.ssoadmin.inputs.CustomerManagedPolicyAttachmentsExclusiveCustomerManagedPolicyReferenceArgs;
 * import static com.pulumi.codegen.internal.Serialization.*;
 * import java.util.List;
 * import java.util.ArrayList;
 * import java.util.Map;
 * import java.io.File;
 * import java.nio.file.Files;
 * import java.nio.file.Paths;
 * 
 * public class App {
 *     public static void main(String[] args) {
 *         Pulumi.run(App::stack);
 *     }
 * 
 *     public static void stack(Context ctx) {
 *         final var example = SsoadminFunctions.getInstances(GetInstancesArgs.builder()
 *             .build());
 * 
 *         var examplePermissionSet = new PermissionSet("examplePermissionSet", PermissionSetArgs.builder()
 *             .name("Example")
 *             .instanceArn(example.arns()[0])
 *             .build());
 * 
 *         var examplePolicy = new Policy("examplePolicy", PolicyArgs.builder()
 *             .name("TestPolicy")
 *             .description("My test policy")
 *             .policy(serializeJson(
 *                 jsonObject(
 *                     jsonProperty("Version", "2012-10-17"),
 *                     jsonProperty("Statement", jsonArray(jsonObject(
 *                         jsonProperty("Action", jsonArray("ec2:Describe*")),
 *                         jsonProperty("Effect", "Allow"),
 *                         jsonProperty("Resource", "*")
 *                     )))
 *                 )))
 *             .build());
 * 
 *         var exampleCustomerManagedPolicyAttachmentsExclusive = new CustomerManagedPolicyAttachmentsExclusive("exampleCustomerManagedPolicyAttachmentsExclusive", CustomerManagedPolicyAttachmentsExclusiveArgs.builder()
 *             .instanceArn(example.arns()[0])
 *             .permissionSetArn(examplePermissionSet.arn())
 *             .customerManagedPolicyReferences(CustomerManagedPolicyAttachmentsExclusiveCustomerManagedPolicyReferenceArgs.builder()
 *                 .name(examplePolicy.name())
 *                 .path("/")
 *                 .build())
 *             .build());
 * 
 *     }
 * }
 * }
 * </pre>
 * 
 * ### Disallow Customer Managed Policy Attachments
 * 
 * To disallow all customer managed policy attachments, omit the `customerManagedPolicyReference` block.
 * 
 * &gt; Any customer managed policies attached to the permission set will be **removed**.
 * 
 * <pre>
 * {@code
 * package generated_program;
 * 
 * import com.pulumi.Context;
 * import com.pulumi.Pulumi;
 * import com.pulumi.core.Output;
 * import com.pulumi.aws.ssoadmin.CustomerManagedPolicyAttachmentsExclusive;
 * import com.pulumi.aws.ssoadmin.CustomerManagedPolicyAttachmentsExclusiveArgs;
 * import java.util.List;
 * import java.util.ArrayList;
 * import java.util.Map;
 * import java.io.File;
 * import java.nio.file.Files;
 * import java.nio.file.Paths;
 * 
 * public class App {
 *     public static void main(String[] args) {
 *         Pulumi.run(App::stack);
 *     }
 * 
 *     public static void stack(Context ctx) {
 *         var example = new CustomerManagedPolicyAttachmentsExclusive("example", CustomerManagedPolicyAttachmentsExclusiveArgs.builder()
 *             .instanceArn(exampleAwsSsoadminInstances.arns()[0])
 *             .permissionSetArn(exampleAwsSsoadminPermissionSet.arn())
 *             .build());
 * 
 *     }
 * }
 * }
 * </pre>
 * 
 * ## Import
 * 
 * ### Identity Schema
 * 
 * #### Required
 * 
 * * `instanceArn` (String) ARN of the SSO Instance.
 * * `permissionSetArn` (String) ARN of the Permission Set.
 * 
 * #### Optional
 * 
 * * `region` (String) Region where this resource is managed.
 * 
 * Using `pulumi import`, import SSO Admin Customer Managed Policy Attachments Exclusive using the `instanceArn` and `permissionSetArn` arguments, separated by a comma (`,`). For example:
 * 
 * ```sh
 * $ pulumi import aws:ssoadmin/customerManagedPolicyAttachmentsExclusive:CustomerManagedPolicyAttachmentsExclusive example arn:aws:sso:::instance/ssoins-1234567890abcdef,arn:aws:sso:::permissionSet/ssoins-1234567890abcdef/ps-1234567890abcdef
 * ```
 * 
 */
@ResourceType(type="aws:ssoadmin/customerManagedPolicyAttachmentsExclusive:CustomerManagedPolicyAttachmentsExclusive")
public class CustomerManagedPolicyAttachmentsExclusive extends com.pulumi.resources.CustomResource {
    /**
     * Specifies the names and paths of the customer managed policies to attach. See Customer Managed Policy Reference below.
     * 
     */
    @Export(name="customerManagedPolicyReferences", refs={List.class,CustomerManagedPolicyAttachmentsExclusiveCustomerManagedPolicyReference.class}, tree="[0,1]")
    private Output</* @Nullable */ List<CustomerManagedPolicyAttachmentsExclusiveCustomerManagedPolicyReference>> customerManagedPolicyReferences;

    /**
     * @return Specifies the names and paths of the customer managed policies to attach. See Customer Managed Policy Reference below.
     * 
     */
    public Output<Optional<List<CustomerManagedPolicyAttachmentsExclusiveCustomerManagedPolicyReference>>> customerManagedPolicyReferences() {
        return Codegen.optional(this.customerManagedPolicyReferences);
    }
    /**
     * ARN of the SSO Instance.
     * 
     */
    @Export(name="instanceArn", refs={String.class}, tree="[0]")
    private Output<String> instanceArn;

    /**
     * @return ARN of the SSO Instance.
     * 
     */
    public Output<String> instanceArn() {
        return this.instanceArn;
    }
    /**
     * ARN of the Permission Set.
     * 
     * The following arguments are optional:
     * 
     */
    @Export(name="permissionSetArn", refs={String.class}, tree="[0]")
    private Output<String> permissionSetArn;

    /**
     * @return ARN of the Permission Set.
     * 
     * The following arguments are optional:
     * 
     */
    public Output<String> permissionSetArn() {
        return this.permissionSetArn;
    }
    /**
     * Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
     * 
     */
    @Export(name="region", refs={String.class}, tree="[0]")
    private Output<String> region;

    /**
     * @return Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
     * 
     */
    public Output<String> region() {
        return this.region;
    }
    @Export(name="timeouts", refs={CustomerManagedPolicyAttachmentsExclusiveTimeouts.class}, tree="[0]")
    private Output</* @Nullable */ CustomerManagedPolicyAttachmentsExclusiveTimeouts> timeouts;

    public Output<Optional<CustomerManagedPolicyAttachmentsExclusiveTimeouts>> timeouts() {
        return Codegen.optional(this.timeouts);
    }

    /**
     *
     * @param name The _unique_ name of the resulting resource.
     */
    public CustomerManagedPolicyAttachmentsExclusive(java.lang.String name) {
        this(name, CustomerManagedPolicyAttachmentsExclusiveArgs.Empty);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     */
    public CustomerManagedPolicyAttachmentsExclusive(java.lang.String name, CustomerManagedPolicyAttachmentsExclusiveArgs args) {
        this(name, args, null);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param options A bag of options that control this resource's behavior.
     */
    public CustomerManagedPolicyAttachmentsExclusive(java.lang.String name, CustomerManagedPolicyAttachmentsExclusiveArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("aws:ssoadmin/customerManagedPolicyAttachmentsExclusive:CustomerManagedPolicyAttachmentsExclusive", name, makeArgs(args, options), makeResourceOptions(options, Codegen.empty()), false);
    }

    private CustomerManagedPolicyAttachmentsExclusive(java.lang.String name, Output<java.lang.String> id, @Nullable CustomerManagedPolicyAttachmentsExclusiveState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("aws:ssoadmin/customerManagedPolicyAttachmentsExclusive:CustomerManagedPolicyAttachmentsExclusive", name, state, makeResourceOptions(options, id), false);
    }

    private static CustomerManagedPolicyAttachmentsExclusiveArgs makeArgs(CustomerManagedPolicyAttachmentsExclusiveArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        if (options != null && options.getUrn().isPresent()) {
            return null;
        }
        return args == null ? CustomerManagedPolicyAttachmentsExclusiveArgs.Empty : args;
    }

    private static com.pulumi.resources.CustomResourceOptions makeResourceOptions(@Nullable com.pulumi.resources.CustomResourceOptions options, @Nullable Output<java.lang.String> id) {
        var defaultOptions = com.pulumi.resources.CustomResourceOptions.builder()
            .version(Utilities.getVersion())
            .build();
        return com.pulumi.resources.CustomResourceOptions.merge(defaultOptions, options, id);
    }

    /**
     * Get an existing Host resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state
     * @param options Optional settings to control the behavior of the CustomResource.
     */
    public static CustomerManagedPolicyAttachmentsExclusive get(java.lang.String name, Output<java.lang.String> id, @Nullable CustomerManagedPolicyAttachmentsExclusiveState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        return new CustomerManagedPolicyAttachmentsExclusive(name, id, state, options);
    }
}
