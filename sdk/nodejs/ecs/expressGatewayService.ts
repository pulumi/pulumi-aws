// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "../types/input";
import * as outputs from "../types/output";
import * as enums from "../types/enums";
import * as utilities from "../utilities";

/**
 * Manages an ECS Express service. The Express service provides a simplified way to deploy containerized applications with automatic provisioning and management of AWS infrastructure including Application Load Balancers (ALBs), target groups, security groups, and auto-scaling policies. This service offers built-in load balancing, auto-scaling, and networking capabilities with zero-downtime deployments.
 *
 * Express services automatically handle infrastructure provisioning and updates through rolling deployments, ensuring high availability during service modifications. When you update an Express service, a new service revision is created and deployed with zero downtime.
 *
 * ## Example Usage
 *
 * ### Basic Usage
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as aws from "@pulumi/aws";
 *
 * const example = new aws.ecs.ExpressGatewayService("example", {
 *     executionRoleArn: execution.arn,
 *     infrastructureRoleArn: infrastructure.arn,
 *     primaryContainer: {
 *         image: "nginx:latest",
 *     },
 * });
 * ```
 *
 * ## Service Updates and Deletion
 *
 * ### Updates
 *
 * When you update an Express service configuration, a new service revision is created and deployed using a rolling deployment strategy with zero downtime. The service automatically manages the transition from the old configuration to the new one, ensuring continuous availability.
 *
 * ### Deletion
 *
 * When an Express service is deleted, it enters a `DRAINING` state where existing tasks are allowed to complete gracefully before termination. The deletion process is irreversible - once initiated, the service and all its associated AWS infrastructure (load balancers, target groups, etc.) will be permanently removed. During the draining process, no new tasks are started, and the service becomes unavailable once all tasks have completed.
 *
 * ## Import
 *
 * Using `pulumi import`, import ECS Express Gateway Services using the service ARN. For example:
 *
 * ```sh
 * $ pulumi import aws:ecs/expressGatewayService:ExpressGatewayService example arn:aws:ecs:us-west-2:123456789012:service/my-cluster/my-express-gateway-service
 * ```
 */
export class ExpressGatewayService extends pulumi.CustomResource {
    /**
     * Get an existing ExpressGatewayService resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: ExpressGatewayServiceState, opts?: pulumi.CustomResourceOptions): ExpressGatewayService {
        return new ExpressGatewayService(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'aws:ecs/expressGatewayService:ExpressGatewayService';

    /**
     * Returns true if the given object is an instance of ExpressGatewayService.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is ExpressGatewayService {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === ExpressGatewayService.__pulumiType;
    }

    /**
     * Name or ARN of the ECS cluster. Defaults to `default`.
     */
    declare public readonly cluster: pulumi.Output<string>;
    /**
     * Number of CPU units used by the task. Valid values are powers of 2 between 256 and 4096.
     */
    declare public readonly cpu: pulumi.Output<string>;
    /**
     * ARN of the current deployment.
     */
    declare public /*out*/ readonly currentDeployment: pulumi.Output<string>;
    /**
     * ARN of the IAM role that allows ECS to pull container images and publish container logs to Amazon CloudWatch.
     */
    declare public readonly executionRoleArn: pulumi.Output<string>;
    /**
     * Path for health check requests. Defaults to `/ping`.
     */
    declare public readonly healthCheckPath: pulumi.Output<string>;
    /**
     * ARN of the IAM role that allows ECS to manage AWS infrastructure on your behalf. **Important:** The infrastructure role cannot be modified after the service is created. Changing this forces a new resource to be created.
     *
     * The following arguments are optional:
     */
    declare public readonly infrastructureRoleArn: pulumi.Output<string>;
    /**
     * List of ingress paths with access type and endpoint information.
     */
    declare public /*out*/ readonly ingressPaths: pulumi.Output<outputs.ecs.ExpressGatewayServiceIngressPath[]>;
    /**
     * Amount of memory (in MiB) used by the task. Valid values are between 512 and 8192.
     */
    declare public readonly memory: pulumi.Output<string>;
    declare public readonly networkConfigurations: pulumi.Output<outputs.ecs.ExpressGatewayServiceNetworkConfiguration[]>;
    declare public readonly primaryContainer: pulumi.Output<outputs.ecs.ExpressGatewayServicePrimaryContainer | undefined>;
    /**
     * AWS region where the service will be created. If not specified, the region configured in the provider will be used.
     */
    declare public readonly region: pulumi.Output<string>;
    declare public readonly scalingTargets: pulumi.Output<outputs.ecs.ExpressGatewayServiceScalingTarget[]>;
    /**
     * ARN of the Express Gateway Service.
     */
    declare public /*out*/ readonly serviceArn: pulumi.Output<string>;
    /**
     * Name of the service. If not specified, a name will be generated. Changing this forces a new resource to be created.
     */
    declare public readonly serviceName: pulumi.Output<string>;
    /**
     * ARN of the service revision.
     */
    declare public /*out*/ readonly serviceRevisionArn: pulumi.Output<string>;
    /**
     * Key-value map of resource tags. If configured with a provider `defaultTags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
     */
    declare public readonly tags: pulumi.Output<{[key: string]: string} | undefined>;
    /**
     * Map of tags assigned to the resource, including those inherited from the provider `defaultTags` configuration block.
     */
    declare public /*out*/ readonly tagsAll: pulumi.Output<{[key: string]: string}>;
    /**
     * ARN of the IAM role that allows your Amazon ECS container task to make calls to other AWS services.
     */
    declare public readonly taskRoleArn: pulumi.Output<string | undefined>;
    declare public readonly timeouts: pulumi.Output<outputs.ecs.ExpressGatewayServiceTimeouts | undefined>;
    /**
     * Whether to wait for the service to reach a steady state before considering the operation complete. Defaults to `false`.
     */
    declare public readonly waitForSteadyState: pulumi.Output<boolean>;

    /**
     * Create a ExpressGatewayService resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: ExpressGatewayServiceArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: ExpressGatewayServiceArgs | ExpressGatewayServiceState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as ExpressGatewayServiceState | undefined;
            resourceInputs["cluster"] = state?.cluster;
            resourceInputs["cpu"] = state?.cpu;
            resourceInputs["currentDeployment"] = state?.currentDeployment;
            resourceInputs["executionRoleArn"] = state?.executionRoleArn;
            resourceInputs["healthCheckPath"] = state?.healthCheckPath;
            resourceInputs["infrastructureRoleArn"] = state?.infrastructureRoleArn;
            resourceInputs["ingressPaths"] = state?.ingressPaths;
            resourceInputs["memory"] = state?.memory;
            resourceInputs["networkConfigurations"] = state?.networkConfigurations;
            resourceInputs["primaryContainer"] = state?.primaryContainer;
            resourceInputs["region"] = state?.region;
            resourceInputs["scalingTargets"] = state?.scalingTargets;
            resourceInputs["serviceArn"] = state?.serviceArn;
            resourceInputs["serviceName"] = state?.serviceName;
            resourceInputs["serviceRevisionArn"] = state?.serviceRevisionArn;
            resourceInputs["tags"] = state?.tags;
            resourceInputs["tagsAll"] = state?.tagsAll;
            resourceInputs["taskRoleArn"] = state?.taskRoleArn;
            resourceInputs["timeouts"] = state?.timeouts;
            resourceInputs["waitForSteadyState"] = state?.waitForSteadyState;
        } else {
            const args = argsOrState as ExpressGatewayServiceArgs | undefined;
            if (args?.executionRoleArn === undefined && !opts.urn) {
                throw new Error("Missing required property 'executionRoleArn'");
            }
            if (args?.infrastructureRoleArn === undefined && !opts.urn) {
                throw new Error("Missing required property 'infrastructureRoleArn'");
            }
            resourceInputs["cluster"] = args?.cluster;
            resourceInputs["cpu"] = args?.cpu;
            resourceInputs["executionRoleArn"] = args?.executionRoleArn;
            resourceInputs["healthCheckPath"] = args?.healthCheckPath;
            resourceInputs["infrastructureRoleArn"] = args?.infrastructureRoleArn;
            resourceInputs["memory"] = args?.memory;
            resourceInputs["networkConfigurations"] = args?.networkConfigurations;
            resourceInputs["primaryContainer"] = args?.primaryContainer;
            resourceInputs["region"] = args?.region;
            resourceInputs["scalingTargets"] = args?.scalingTargets;
            resourceInputs["serviceName"] = args?.serviceName;
            resourceInputs["tags"] = args?.tags;
            resourceInputs["taskRoleArn"] = args?.taskRoleArn;
            resourceInputs["timeouts"] = args?.timeouts;
            resourceInputs["waitForSteadyState"] = args?.waitForSteadyState;
            resourceInputs["currentDeployment"] = undefined /*out*/;
            resourceInputs["ingressPaths"] = undefined /*out*/;
            resourceInputs["serviceArn"] = undefined /*out*/;
            resourceInputs["serviceRevisionArn"] = undefined /*out*/;
            resourceInputs["tagsAll"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(ExpressGatewayService.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering ExpressGatewayService resources.
 */
export interface ExpressGatewayServiceState {
    /**
     * Name or ARN of the ECS cluster. Defaults to `default`.
     */
    cluster?: pulumi.Input<string>;
    /**
     * Number of CPU units used by the task. Valid values are powers of 2 between 256 and 4096.
     */
    cpu?: pulumi.Input<string>;
    /**
     * ARN of the current deployment.
     */
    currentDeployment?: pulumi.Input<string>;
    /**
     * ARN of the IAM role that allows ECS to pull container images and publish container logs to Amazon CloudWatch.
     */
    executionRoleArn?: pulumi.Input<string>;
    /**
     * Path for health check requests. Defaults to `/ping`.
     */
    healthCheckPath?: pulumi.Input<string>;
    /**
     * ARN of the IAM role that allows ECS to manage AWS infrastructure on your behalf. **Important:** The infrastructure role cannot be modified after the service is created. Changing this forces a new resource to be created.
     *
     * The following arguments are optional:
     */
    infrastructureRoleArn?: pulumi.Input<string>;
    /**
     * List of ingress paths with access type and endpoint information.
     */
    ingressPaths?: pulumi.Input<pulumi.Input<inputs.ecs.ExpressGatewayServiceIngressPath>[]>;
    /**
     * Amount of memory (in MiB) used by the task. Valid values are between 512 and 8192.
     */
    memory?: pulumi.Input<string>;
    networkConfigurations?: pulumi.Input<pulumi.Input<inputs.ecs.ExpressGatewayServiceNetworkConfiguration>[]>;
    primaryContainer?: pulumi.Input<inputs.ecs.ExpressGatewayServicePrimaryContainer>;
    /**
     * AWS region where the service will be created. If not specified, the region configured in the provider will be used.
     */
    region?: pulumi.Input<string>;
    scalingTargets?: pulumi.Input<pulumi.Input<inputs.ecs.ExpressGatewayServiceScalingTarget>[]>;
    /**
     * ARN of the Express Gateway Service.
     */
    serviceArn?: pulumi.Input<string>;
    /**
     * Name of the service. If not specified, a name will be generated. Changing this forces a new resource to be created.
     */
    serviceName?: pulumi.Input<string>;
    /**
     * ARN of the service revision.
     */
    serviceRevisionArn?: pulumi.Input<string>;
    /**
     * Key-value map of resource tags. If configured with a provider `defaultTags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
     */
    tags?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    /**
     * Map of tags assigned to the resource, including those inherited from the provider `defaultTags` configuration block.
     */
    tagsAll?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    /**
     * ARN of the IAM role that allows your Amazon ECS container task to make calls to other AWS services.
     */
    taskRoleArn?: pulumi.Input<string>;
    timeouts?: pulumi.Input<inputs.ecs.ExpressGatewayServiceTimeouts>;
    /**
     * Whether to wait for the service to reach a steady state before considering the operation complete. Defaults to `false`.
     */
    waitForSteadyState?: pulumi.Input<boolean>;
}

/**
 * The set of arguments for constructing a ExpressGatewayService resource.
 */
export interface ExpressGatewayServiceArgs {
    /**
     * Name or ARN of the ECS cluster. Defaults to `default`.
     */
    cluster?: pulumi.Input<string>;
    /**
     * Number of CPU units used by the task. Valid values are powers of 2 between 256 and 4096.
     */
    cpu?: pulumi.Input<string>;
    /**
     * ARN of the IAM role that allows ECS to pull container images and publish container logs to Amazon CloudWatch.
     */
    executionRoleArn: pulumi.Input<string>;
    /**
     * Path for health check requests. Defaults to `/ping`.
     */
    healthCheckPath?: pulumi.Input<string>;
    /**
     * ARN of the IAM role that allows ECS to manage AWS infrastructure on your behalf. **Important:** The infrastructure role cannot be modified after the service is created. Changing this forces a new resource to be created.
     *
     * The following arguments are optional:
     */
    infrastructureRoleArn: pulumi.Input<string>;
    /**
     * Amount of memory (in MiB) used by the task. Valid values are between 512 and 8192.
     */
    memory?: pulumi.Input<string>;
    networkConfigurations?: pulumi.Input<pulumi.Input<inputs.ecs.ExpressGatewayServiceNetworkConfiguration>[]>;
    primaryContainer?: pulumi.Input<inputs.ecs.ExpressGatewayServicePrimaryContainer>;
    /**
     * AWS region where the service will be created. If not specified, the region configured in the provider will be used.
     */
    region?: pulumi.Input<string>;
    scalingTargets?: pulumi.Input<pulumi.Input<inputs.ecs.ExpressGatewayServiceScalingTarget>[]>;
    /**
     * Name of the service. If not specified, a name will be generated. Changing this forces a new resource to be created.
     */
    serviceName?: pulumi.Input<string>;
    /**
     * Key-value map of resource tags. If configured with a provider `defaultTags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
     */
    tags?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    /**
     * ARN of the IAM role that allows your Amazon ECS container task to make calls to other AWS services.
     */
    taskRoleArn?: pulumi.Input<string>;
    timeouts?: pulumi.Input<inputs.ecs.ExpressGatewayServiceTimeouts>;
    /**
     * Whether to wait for the service to reach a steady state before considering the operation complete. Defaults to `false`.
     */
    waitForSteadyState?: pulumi.Input<boolean>;
}
