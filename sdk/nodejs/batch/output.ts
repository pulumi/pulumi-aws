// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "./input";
import * as outputs from "./output";

export interface ComputeEnvironmentComputeResources {
    /**
     * The allocation strategy to use for the compute resource in case not enough instances of the best fitting instance type can be allocated. For valid values, refer to the [AWS documentation](https://docs.aws.amazon.com/batch/latest/APIReference/API_ComputeResource.html#Batch-Type-ComputeResource-allocationStrategy). Defaults to `BEST_FIT`. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
     */
    allocationStrategy?: string;
    /**
     * Integer of maximum percentage that a Spot Instance price can be when compared with the On-Demand price for that instance type before instances are launched. For example, if your bid percentage is 20% (`20`), then the Spot price must be below 20% of the current On-Demand price for that EC2 instance. If you leave this field empty, the default value is 100% of the On-Demand price. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
     */
    bidPercentage?: number;
    /**
     * The desired number of EC2 vCPUS in the compute environment. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
     */
    desiredVcpus: number;
    /**
     * Provides information used to select Amazon Machine Images (AMIs) for EC2 instances in the compute environment. If Ec2Configuration isn't specified, the default is ECS_AL2. This parameter isn't applicable to jobs that are running on Fargate resources, and shouldn't be specified.
     */
    ec2Configurations: outputs.ComputeEnvironmentComputeResourcesEc2Configuration[];
    /**
     * The EC2 key pair that is used for instances launched in the compute environment. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
     */
    ec2KeyPair?: string;
    /**
     * The Amazon Machine Image (AMI) ID used for instances launched in the compute environment. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified. (Deprecated, use `ec2Configuration` `imageIdOverride` instead)
     */
    imageId?: string;
    /**
     * The Amazon ECS instance role applied to Amazon EC2 instances in a compute environment. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
     */
    instanceRole?: string;
    /**
     * A list of instance types that may be launched. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
     */
    instanceTypes?: string[];
    /**
     * The launch template to use for your compute resources. See details below. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
     */
    launchTemplate?: outputs.ComputeEnvironmentComputeResourcesLaunchTemplate;
    /**
     * The maximum number of EC2 vCPUs that an environment can reach.
     */
    maxVcpus: number;
    /**
     * The minimum number of EC2 vCPUs that an environment should maintain. For `EC2` or `SPOT` compute environments, if the parameter is not explicitly defined, a `0` default value will be set. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
     */
    minVcpus?: number;
    /**
     * The Amazon EC2 placement group to associate with your compute resources.
     */
    placementGroup?: string;
    /**
     * A list of EC2 security group that are associated with instances launched in the compute environment. This parameter is required for Fargate compute environments.
     */
    securityGroupIds?: string[];
    /**
     * The Amazon Resource Name (ARN) of the Amazon EC2 Spot Fleet IAM role applied to a SPOT compute environment. This parameter is required for SPOT compute environments. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
     */
    spotIamFleetRole?: string;
    /**
     * A list of VPC subnets into which the compute resources are launched.
     */
    subnets: string[];
    /**
     * Key-value pair tags to be applied to resources that are launched in the compute environment. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
     */
    tags?: {[key: string]: string};
    /**
     * The type of compute environment. Valid items are `EC2`, `SPOT`, `FARGATE` or `FARGATE_SPOT`.
     */
    type: string;
}
export interface ComputeEnvironmentComputeResourcesEc2Configuration {
    /**
     * The AMI ID used for instances launched in the compute environment that match the image type. This setting overrides the `imageId` argument in the `computeResources` block.
     */
    imageIdOverride: string;
    /**
     * The image type to match with the instance type to select an AMI. If the `imageIdOverride` parameter isn't specified, then a recent [Amazon ECS-optimized Amazon Linux 2 AMI](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html#al2ami) (`ECS_AL2`) is used.
     */
    imageType?: string;
}
export interface ComputeEnvironmentComputeResourcesLaunchTemplate {
    /**
     * ID of the launch template. You must specify either the launch template ID or launch template name in the request, but not both.
     */
    launchTemplateId?: string;
    /**
     * Name of the launch template.
     */
    launchTemplateName?: string;
    /**
     * The version number of the launch template. Default: The default version of the launch template.
     */
    version: string;
}
export interface ComputeEnvironmentEksConfiguration {
    /**
     * The Amazon Resource Name (ARN) of the Amazon EKS cluster.
     */
    eksClusterArn: string;
    /**
     * The namespace of the Amazon EKS cluster. AWS Batch manages pods in this namespace.
     */
    kubernetesNamespace: string;
}
export interface ComputeEnvironmentUpdatePolicy {
    /**
     * Specifies the job timeout (in minutes) when the compute environment infrastructure is updated.
     */
    jobExecutionTimeoutMinutes: number;
    /**
     * Specifies whether jobs are automatically terminated when the computer environment infrastructure is updated.
     */
    terminateJobsOnUpdate: boolean;
}
export interface JobDefinitionEksProperties {
    /**
     * The properties for the Kubernetes pod resources of a job. See `podProperties` below.
     */
    podProperties: outputs.JobDefinitionEksPropertiesPodProperties;
}
export interface JobDefinitionEksPropertiesPodProperties {
    /**
     * The properties of the container that's used on the Amazon EKS pod. See containers below.
     */
    containers: outputs.JobDefinitionEksPropertiesPodPropertiesContainers;
    /**
     * The DNS policy for the pod. The default value is `ClusterFirst`. If the `hostNetwork` argument is not specified, the default is `ClusterFirstWithHostNet`. `ClusterFirst` indicates that any DNS query that does not match the configured cluster domain suffix is forwarded to the upstream nameserver inherited from the node. For more information, see Pod's DNS policy in the Kubernetes documentation.
     */
    dnsPolicy?: string;
    /**
     * Indicates if the pod uses the hosts' network IP address. The default value is `true`. Setting this to `false` enables the Kubernetes pod networking model. Most AWS Batch workloads are egress-only and don't require the overhead of IP allocation for each pod for incoming connections.
     */
    hostNetwork?: boolean;
    /**
     * Metadata about the Kubernetes pod.
     */
    metadata?: outputs.JobDefinitionEksPropertiesPodPropertiesMetadata;
    /**
     * The name of the service account that's used to run the pod.
     */
    serviceAccountName?: string;
    /**
     * Specifies the volumes for a job definition that uses Amazon EKS resources. AWS Batch supports emptyDir, hostPath, and secret volume types.
     */
    volumes?: outputs.JobDefinitionEksPropertiesPodPropertiesVolume[];
}
export interface JobDefinitionEksPropertiesPodPropertiesContainers {
    /**
     * An array of arguments to the entrypoint. If this isn't specified, the CMD of the container image is used. This corresponds to the args member in the Entrypoint portion of the Pod in Kubernetes. Environment variable references are expanded using the container's environment.
     */
    args?: string[];
    /**
     * The entrypoint for the container. This isn't run within a shell. If this isn't specified, the ENTRYPOINT of the container image is used. Environment variable references are expanded using the container's environment.
     */
    commands?: string[];
    /**
     * The environment variables to pass to a container. See EKS Environment below.
     */
    envs?: outputs.JobDefinitionEksPropertiesPodPropertiesContainersEnv[];
    /**
     * The Docker image used to start the container.
     */
    image: string;
    /**
     * The image pull policy for the container. Supported values are `Always`, `IfNotPresent`, and `Never`.
     */
    imagePullPolicy?: string;
    /**
     * The name of the container. If the name isn't specified, the default name "Default" is used. Each container in a pod must have a unique name.
     */
    name?: string;
    /**
     * The type and amount of resources to assign to a container. The supported resources include `memory`, `cpu`, and `nvidia.com/gpu`.
     */
    resources?: outputs.JobDefinitionEksPropertiesPodPropertiesContainersResources;
    /**
     * The security context for a job.
     */
    securityContext?: outputs.JobDefinitionEksPropertiesPodPropertiesContainersSecurityContext;
    /**
     * The volume mounts for the container.
     */
    volumeMounts?: outputs.JobDefinitionEksPropertiesPodPropertiesContainersVolumeMount[];
}
export interface JobDefinitionEksPropertiesPodPropertiesContainersEnv {
    /**
     * Specifies the name of the job definition.
     */
    name: string;
    value: string;
}
export interface JobDefinitionEksPropertiesPodPropertiesContainersResources {
    limits?: {[key: string]: string};
    requests?: {[key: string]: string};
}
export interface JobDefinitionEksPropertiesPodPropertiesContainersSecurityContext {
    privileged?: boolean;
    readOnlyRootFileSystem?: boolean;
    runAsGroup?: number;
    runAsNonRoot?: boolean;
    runAsUser?: number;
}
export interface JobDefinitionEksPropertiesPodPropertiesContainersVolumeMount {
    mountPath: string;
    /**
     * Specifies the name of the job definition.
     */
    name: string;
    readOnly?: boolean;
}
export interface JobDefinitionEksPropertiesPodPropertiesMetadata {
    labels?: {[key: string]: string};
}
export interface JobDefinitionEksPropertiesPodPropertiesVolume {
    emptyDir?: outputs.JobDefinitionEksPropertiesPodPropertiesVolumeEmptyDir;
    hostPath?: outputs.JobDefinitionEksPropertiesPodPropertiesVolumeHostPath;
    /**
     * Specifies the name of the job definition.
     */
    name?: string;
    secret?: outputs.JobDefinitionEksPropertiesPodPropertiesVolumeSecret;
}
export interface JobDefinitionEksPropertiesPodPropertiesVolumeEmptyDir {
    medium?: string;
    sizeLimit: string;
}
export interface JobDefinitionEksPropertiesPodPropertiesVolumeHostPath {
    path: string;
}
export interface JobDefinitionEksPropertiesPodPropertiesVolumeSecret {
    optional?: boolean;
    secretName: string;
}
export interface JobDefinitionRetryStrategy {
    /**
     * The number of times to move a job to the `RUNNABLE` status. You may specify between `1` and `10` attempts.
     */
    attempts?: number;
    /**
     * The evaluate on exit conditions under which the job should be retried or failed. If this parameter is specified, then the `attempts` parameter must also be specified. You may specify up to 5 configuration blocks.
     */
    evaluateOnExits?: outputs.JobDefinitionRetryStrategyEvaluateOnExit[];
}
export interface JobDefinitionRetryStrategyEvaluateOnExit {
    /**
     * Specifies the action to take if all of the specified conditions are met. The values are not case sensitive. Valid values: `retry`, `exit`.
     */
    action: string;
    /**
     * A glob pattern to match against the decimal representation of the exit code returned for a job.
     */
    onExitCode?: string;
    /**
     * A glob pattern to match against the reason returned for a job.
     */
    onReason?: string;
    /**
     * A glob pattern to match against the status reason returned for a job.
     */
    onStatusReason?: string;
}
export interface JobDefinitionTimeout {
    /**
     * The time duration in seconds after which AWS Batch terminates your jobs if they have not finished. The minimum value for the timeout is `60` seconds.
     */
    attemptDurationSeconds?: number;
}
export interface JobQueueComputeEnvironmentOrder {
    /**
     * The Amazon Resource Name (ARN) of the compute environment.
     */
    computeEnvironment: string;
    /**
     * The order of the compute environment. Compute environments are tried in ascending order. For example, if two compute environments are associated with a job queue, the compute environment with a lower order integer value is tried for job placement first.
     */
    order: number;
}
export interface JobQueueTimeouts {
    /**
     * A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
     */
    create?: string;
    /**
     * A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
     */
    delete?: string;
    /**
     * A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
     */
    update?: string;
}
export interface SchedulingPolicyFairSharePolicy {
    computeReservation?: number;
    shareDecaySeconds?: number;
    shareDistributions?: outputs.SchedulingPolicyFairSharePolicyShareDistribution[];
}
export interface SchedulingPolicyFairSharePolicyShareDistribution {
    /**
     * A fair share identifier or fair share identifier prefix. For more information, see [ShareAttributes](https://docs.aws.amazon.com/batch/latest/APIReference/API_ShareAttributes.html).
     */
    shareIdentifier: string;
    /**
     * The weight factor for the fair share identifier. For more information, see [ShareAttributes](https://docs.aws.amazon.com/batch/latest/APIReference/API_ShareAttributes.html).
     */
    weightFactor?: number;
}
export interface GetComputeEnvironmentUpdatePolicy {
    jobExecutionTimeoutMinutes: number;
    terminateJobsOnUpdate: boolean;
}
export interface GetJobDefinitionEksProperty {
    /**
     * The properties for the Kubernetes pod resources of a job.
     */
    podProperties: any[];
}
export interface GetJobDefinitionNodeProperty {
    /**
     * Specifies the node index for the main node of a multi-node parallel job. This node index value must be fewer than the number of nodes.
     */
    mainNode: number;
    /**
     * A list of node ranges and their properties that are associated with a multi-node parallel job.
     */
    nodeRangeProperties: any[];
    /**
     * The number of nodes that are associated with a multi-node parallel job.
     */
    numNodes: number;
}
export interface GetJobDefinitionRetryStrategy {
    /**
     * The number of times to move a job to the RUNNABLE status.
     */
    attempts: number;
    /**
     * Array of up to 5 objects that specify the conditions where jobs are retried or failed.
     */
    evaluateOnExits: any[];
}
export interface GetJobDefinitionTimeout {
    /**
     * The job timeout time (in seconds) that's measured from the job attempt's startedAt timestamp.
     */
    attemptDurationSeconds: number;
}
export interface GetJobQueueComputeEnvironmentOrder {
    computeEnvironment: string;
    order: number;
}
export interface GetSchedulingPolicyFairSharePolicy {
    /**
     * Value used to reserve some of the available maximum vCPU for fair share identifiers that have not yet been used. For more information, see [FairsharePolicy](https://docs.aws.amazon.com/batch/latest/APIReference/API_FairsharePolicy.html).
     */
    computeReservation: number;
    shareDecaySeconds: number;
    /**
     * One or more share distribution blocks which define the weights for the fair share identifiers for the fair share policy. For more information, see [FairsharePolicy](https://docs.aws.amazon.com/batch/latest/APIReference/API_FairsharePolicy.html). The `shareDistribution` block is documented below.
     */
    shareDistributions: outputs.GetSchedulingPolicyFairSharePolicyShareDistribution[];
}
export interface GetSchedulingPolicyFairSharePolicyShareDistribution {
    /**
     * Fair share identifier or fair share identifier prefix. For more information, see [ShareAttributes](https://docs.aws.amazon.com/batch/latest/APIReference/API_ShareAttributes.html).
     */
    shareIdentifier: string;
    /**
     * Weight factor for the fair share identifier. For more information, see [ShareAttributes](https://docs.aws.amazon.com/batch/latest/APIReference/API_ShareAttributes.html).
     */
    weightFactor: number;
}
