// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package s3

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-aws/sdk/v7/go/aws/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Provides an S3 bucket Object Lock configuration resource. For more information about Object Locking, go to [Using S3 Object Lock](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html) in the Amazon S3 User Guide.
//
// > This resource can be used enable Object Lock for **new** and **existing** buckets.
//
// > This resource cannot be used with S3 directory buckets.
//
// ## Example Usage
//
// ### Object Lock configuration for new or existing buckets
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws/sdk/v7/go/aws/s3"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			example, err := s3.NewBucket(ctx, "example", &s3.BucketArgs{
//				Bucket: pulumi.String("mybucket"),
//			})
//			if err != nil {
//				return err
//			}
//			_, err = s3.NewBucketVersioning(ctx, "example", &s3.BucketVersioningArgs{
//				Bucket: example.ID(),
//				VersioningConfiguration: &s3.BucketVersioningVersioningConfigurationArgs{
//					Status: pulumi.String("Enabled"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			_, err = s3.NewBucketObjectLockConfiguration(ctx, "example", &s3.BucketObjectLockConfigurationArgs{
//				Bucket: example.ID(),
//				Rule: &s3.BucketObjectLockConfigurationRuleArgs{
//					DefaultRetention: &s3.BucketObjectLockConfigurationRuleDefaultRetentionArgs{
//						Mode: pulumi.String("COMPLIANCE"),
//						Days: pulumi.Int(5),
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// If the owner (account ID) of the source bucket differs from the account used to configure the AWS Provider, import using the `bucket` and `expected_bucket_owner`, separated by a comma (`,`). For example:
//
// __Using `pulumi import`__, import an S3 bucket Object Lock Configuration using one of two forms. If the owner (account ID) of the source bucket is the same account used to configure the AWS Provider, import using the `bucket`. For example:
//
// ```sh
// $ pulumi import aws:s3/bucketObjectLockConfiguration:BucketObjectLockConfiguration example bucket-name
// ```
// If the owner (account ID) of the source bucket differs from the account used to configure the AWS Provider, import using the `bucket` and `expected_bucket_owner`, separated by a comma (`,`). For example:
//
// ```sh
// $ pulumi import aws:s3/bucketObjectLockConfiguration:BucketObjectLockConfiguration example bucket-name,123456789012
// ```
type BucketObjectLockConfiguration struct {
	pulumi.CustomResourceState

	// Name of the bucket.
	Bucket pulumi.StringOutput `pulumi:"bucket"`
	// Account ID of the expected bucket owner.
	ExpectedBucketOwner pulumi.StringPtrOutput `pulumi:"expectedBucketOwner"`
	// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
	ObjectLockEnabled pulumi.StringPtrOutput `pulumi:"objectLockEnabled"`
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region pulumi.StringOutput `pulumi:"region"`
	// Configuration block for specifying the Object Lock rule for the specified object. See below.
	Rule BucketObjectLockConfigurationRulePtrOutput `pulumi:"rule"`
	// This argument is deprecated and no longer needed to enable Object Lock.
	// To enable Object Lock for an existing bucket, you must first enable versioning on the bucket and then enable Object Lock. For more details on versioning, see the `s3.BucketVersioning` resource.
	Token pulumi.StringPtrOutput `pulumi:"token"`
}

// NewBucketObjectLockConfiguration registers a new resource with the given unique name, arguments, and options.
func NewBucketObjectLockConfiguration(ctx *pulumi.Context,
	name string, args *BucketObjectLockConfigurationArgs, opts ...pulumi.ResourceOption) (*BucketObjectLockConfiguration, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.Bucket == nil {
		return nil, errors.New("invalid value for required argument 'Bucket'")
	}
	aliases := pulumi.Aliases([]pulumi.Alias{
		{
			Type: pulumi.String("aws:s3/bucketObjectLockConfigurationV2:BucketObjectLockConfigurationV2"),
		},
	})
	opts = append(opts, aliases)
	if args.Token != nil {
		args.Token = pulumi.ToSecret(args.Token).(pulumi.StringPtrInput)
	}
	secrets := pulumi.AdditionalSecretOutputs([]string{
		"token",
	})
	opts = append(opts, secrets)
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource BucketObjectLockConfiguration
	err := ctx.RegisterResource("aws:s3/bucketObjectLockConfiguration:BucketObjectLockConfiguration", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetBucketObjectLockConfiguration gets an existing BucketObjectLockConfiguration resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetBucketObjectLockConfiguration(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *BucketObjectLockConfigurationState, opts ...pulumi.ResourceOption) (*BucketObjectLockConfiguration, error) {
	var resource BucketObjectLockConfiguration
	err := ctx.ReadResource("aws:s3/bucketObjectLockConfiguration:BucketObjectLockConfiguration", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering BucketObjectLockConfiguration resources.
type bucketObjectLockConfigurationState struct {
	// Name of the bucket.
	Bucket *string `pulumi:"bucket"`
	// Account ID of the expected bucket owner.
	ExpectedBucketOwner *string `pulumi:"expectedBucketOwner"`
	// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
	ObjectLockEnabled *string `pulumi:"objectLockEnabled"`
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region *string `pulumi:"region"`
	// Configuration block for specifying the Object Lock rule for the specified object. See below.
	Rule *BucketObjectLockConfigurationRule `pulumi:"rule"`
	// This argument is deprecated and no longer needed to enable Object Lock.
	// To enable Object Lock for an existing bucket, you must first enable versioning on the bucket and then enable Object Lock. For more details on versioning, see the `s3.BucketVersioning` resource.
	Token *string `pulumi:"token"`
}

type BucketObjectLockConfigurationState struct {
	// Name of the bucket.
	Bucket pulumi.StringPtrInput
	// Account ID of the expected bucket owner.
	ExpectedBucketOwner pulumi.StringPtrInput
	// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
	ObjectLockEnabled pulumi.StringPtrInput
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region pulumi.StringPtrInput
	// Configuration block for specifying the Object Lock rule for the specified object. See below.
	Rule BucketObjectLockConfigurationRulePtrInput
	// This argument is deprecated and no longer needed to enable Object Lock.
	// To enable Object Lock for an existing bucket, you must first enable versioning on the bucket and then enable Object Lock. For more details on versioning, see the `s3.BucketVersioning` resource.
	Token pulumi.StringPtrInput
}

func (BucketObjectLockConfigurationState) ElementType() reflect.Type {
	return reflect.TypeOf((*bucketObjectLockConfigurationState)(nil)).Elem()
}

type bucketObjectLockConfigurationArgs struct {
	// Name of the bucket.
	Bucket string `pulumi:"bucket"`
	// Account ID of the expected bucket owner.
	ExpectedBucketOwner *string `pulumi:"expectedBucketOwner"`
	// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
	ObjectLockEnabled *string `pulumi:"objectLockEnabled"`
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region *string `pulumi:"region"`
	// Configuration block for specifying the Object Lock rule for the specified object. See below.
	Rule *BucketObjectLockConfigurationRule `pulumi:"rule"`
	// This argument is deprecated and no longer needed to enable Object Lock.
	// To enable Object Lock for an existing bucket, you must first enable versioning on the bucket and then enable Object Lock. For more details on versioning, see the `s3.BucketVersioning` resource.
	Token *string `pulumi:"token"`
}

// The set of arguments for constructing a BucketObjectLockConfiguration resource.
type BucketObjectLockConfigurationArgs struct {
	// Name of the bucket.
	Bucket pulumi.StringInput
	// Account ID of the expected bucket owner.
	ExpectedBucketOwner pulumi.StringPtrInput
	// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
	ObjectLockEnabled pulumi.StringPtrInput
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region pulumi.StringPtrInput
	// Configuration block for specifying the Object Lock rule for the specified object. See below.
	Rule BucketObjectLockConfigurationRulePtrInput
	// This argument is deprecated and no longer needed to enable Object Lock.
	// To enable Object Lock for an existing bucket, you must first enable versioning on the bucket and then enable Object Lock. For more details on versioning, see the `s3.BucketVersioning` resource.
	Token pulumi.StringPtrInput
}

func (BucketObjectLockConfigurationArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*bucketObjectLockConfigurationArgs)(nil)).Elem()
}

type BucketObjectLockConfigurationInput interface {
	pulumi.Input

	ToBucketObjectLockConfigurationOutput() BucketObjectLockConfigurationOutput
	ToBucketObjectLockConfigurationOutputWithContext(ctx context.Context) BucketObjectLockConfigurationOutput
}

func (*BucketObjectLockConfiguration) ElementType() reflect.Type {
	return reflect.TypeOf((**BucketObjectLockConfiguration)(nil)).Elem()
}

func (i *BucketObjectLockConfiguration) ToBucketObjectLockConfigurationOutput() BucketObjectLockConfigurationOutput {
	return i.ToBucketObjectLockConfigurationOutputWithContext(context.Background())
}

func (i *BucketObjectLockConfiguration) ToBucketObjectLockConfigurationOutputWithContext(ctx context.Context) BucketObjectLockConfigurationOutput {
	return pulumi.ToOutputWithContext(ctx, i).(BucketObjectLockConfigurationOutput)
}

// BucketObjectLockConfigurationArrayInput is an input type that accepts BucketObjectLockConfigurationArray and BucketObjectLockConfigurationArrayOutput values.
// You can construct a concrete instance of `BucketObjectLockConfigurationArrayInput` via:
//
//	BucketObjectLockConfigurationArray{ BucketObjectLockConfigurationArgs{...} }
type BucketObjectLockConfigurationArrayInput interface {
	pulumi.Input

	ToBucketObjectLockConfigurationArrayOutput() BucketObjectLockConfigurationArrayOutput
	ToBucketObjectLockConfigurationArrayOutputWithContext(context.Context) BucketObjectLockConfigurationArrayOutput
}

type BucketObjectLockConfigurationArray []BucketObjectLockConfigurationInput

func (BucketObjectLockConfigurationArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*BucketObjectLockConfiguration)(nil)).Elem()
}

func (i BucketObjectLockConfigurationArray) ToBucketObjectLockConfigurationArrayOutput() BucketObjectLockConfigurationArrayOutput {
	return i.ToBucketObjectLockConfigurationArrayOutputWithContext(context.Background())
}

func (i BucketObjectLockConfigurationArray) ToBucketObjectLockConfigurationArrayOutputWithContext(ctx context.Context) BucketObjectLockConfigurationArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(BucketObjectLockConfigurationArrayOutput)
}

// BucketObjectLockConfigurationMapInput is an input type that accepts BucketObjectLockConfigurationMap and BucketObjectLockConfigurationMapOutput values.
// You can construct a concrete instance of `BucketObjectLockConfigurationMapInput` via:
//
//	BucketObjectLockConfigurationMap{ "key": BucketObjectLockConfigurationArgs{...} }
type BucketObjectLockConfigurationMapInput interface {
	pulumi.Input

	ToBucketObjectLockConfigurationMapOutput() BucketObjectLockConfigurationMapOutput
	ToBucketObjectLockConfigurationMapOutputWithContext(context.Context) BucketObjectLockConfigurationMapOutput
}

type BucketObjectLockConfigurationMap map[string]BucketObjectLockConfigurationInput

func (BucketObjectLockConfigurationMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*BucketObjectLockConfiguration)(nil)).Elem()
}

func (i BucketObjectLockConfigurationMap) ToBucketObjectLockConfigurationMapOutput() BucketObjectLockConfigurationMapOutput {
	return i.ToBucketObjectLockConfigurationMapOutputWithContext(context.Background())
}

func (i BucketObjectLockConfigurationMap) ToBucketObjectLockConfigurationMapOutputWithContext(ctx context.Context) BucketObjectLockConfigurationMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(BucketObjectLockConfigurationMapOutput)
}

type BucketObjectLockConfigurationOutput struct{ *pulumi.OutputState }

func (BucketObjectLockConfigurationOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**BucketObjectLockConfiguration)(nil)).Elem()
}

func (o BucketObjectLockConfigurationOutput) ToBucketObjectLockConfigurationOutput() BucketObjectLockConfigurationOutput {
	return o
}

func (o BucketObjectLockConfigurationOutput) ToBucketObjectLockConfigurationOutputWithContext(ctx context.Context) BucketObjectLockConfigurationOutput {
	return o
}

// Name of the bucket.
func (o BucketObjectLockConfigurationOutput) Bucket() pulumi.StringOutput {
	return o.ApplyT(func(v *BucketObjectLockConfiguration) pulumi.StringOutput { return v.Bucket }).(pulumi.StringOutput)
}

// Account ID of the expected bucket owner.
func (o BucketObjectLockConfigurationOutput) ExpectedBucketOwner() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *BucketObjectLockConfiguration) pulumi.StringPtrOutput { return v.ExpectedBucketOwner }).(pulumi.StringPtrOutput)
}

// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
func (o BucketObjectLockConfigurationOutput) ObjectLockEnabled() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *BucketObjectLockConfiguration) pulumi.StringPtrOutput { return v.ObjectLockEnabled }).(pulumi.StringPtrOutput)
}

// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
func (o BucketObjectLockConfigurationOutput) Region() pulumi.StringOutput {
	return o.ApplyT(func(v *BucketObjectLockConfiguration) pulumi.StringOutput { return v.Region }).(pulumi.StringOutput)
}

// Configuration block for specifying the Object Lock rule for the specified object. See below.
func (o BucketObjectLockConfigurationOutput) Rule() BucketObjectLockConfigurationRulePtrOutput {
	return o.ApplyT(func(v *BucketObjectLockConfiguration) BucketObjectLockConfigurationRulePtrOutput { return v.Rule }).(BucketObjectLockConfigurationRulePtrOutput)
}

// This argument is deprecated and no longer needed to enable Object Lock.
// To enable Object Lock for an existing bucket, you must first enable versioning on the bucket and then enable Object Lock. For more details on versioning, see the `s3.BucketVersioning` resource.
func (o BucketObjectLockConfigurationOutput) Token() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *BucketObjectLockConfiguration) pulumi.StringPtrOutput { return v.Token }).(pulumi.StringPtrOutput)
}

type BucketObjectLockConfigurationArrayOutput struct{ *pulumi.OutputState }

func (BucketObjectLockConfigurationArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*BucketObjectLockConfiguration)(nil)).Elem()
}

func (o BucketObjectLockConfigurationArrayOutput) ToBucketObjectLockConfigurationArrayOutput() BucketObjectLockConfigurationArrayOutput {
	return o
}

func (o BucketObjectLockConfigurationArrayOutput) ToBucketObjectLockConfigurationArrayOutputWithContext(ctx context.Context) BucketObjectLockConfigurationArrayOutput {
	return o
}

func (o BucketObjectLockConfigurationArrayOutput) Index(i pulumi.IntInput) BucketObjectLockConfigurationOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *BucketObjectLockConfiguration {
		return vs[0].([]*BucketObjectLockConfiguration)[vs[1].(int)]
	}).(BucketObjectLockConfigurationOutput)
}

type BucketObjectLockConfigurationMapOutput struct{ *pulumi.OutputState }

func (BucketObjectLockConfigurationMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*BucketObjectLockConfiguration)(nil)).Elem()
}

func (o BucketObjectLockConfigurationMapOutput) ToBucketObjectLockConfigurationMapOutput() BucketObjectLockConfigurationMapOutput {
	return o
}

func (o BucketObjectLockConfigurationMapOutput) ToBucketObjectLockConfigurationMapOutputWithContext(ctx context.Context) BucketObjectLockConfigurationMapOutput {
	return o
}

func (o BucketObjectLockConfigurationMapOutput) MapIndex(k pulumi.StringInput) BucketObjectLockConfigurationOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *BucketObjectLockConfiguration {
		return vs[0].(map[string]*BucketObjectLockConfiguration)[vs[1].(string)]
	}).(BucketObjectLockConfigurationOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*BucketObjectLockConfigurationInput)(nil)).Elem(), &BucketObjectLockConfiguration{})
	pulumi.RegisterInputType(reflect.TypeOf((*BucketObjectLockConfigurationArrayInput)(nil)).Elem(), BucketObjectLockConfigurationArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*BucketObjectLockConfigurationMapInput)(nil)).Elem(), BucketObjectLockConfigurationMap{})
	pulumi.RegisterOutputType(BucketObjectLockConfigurationOutput{})
	pulumi.RegisterOutputType(BucketObjectLockConfigurationArrayOutput{})
	pulumi.RegisterOutputType(BucketObjectLockConfigurationMapOutput{})
}
