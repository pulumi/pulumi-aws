// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package ec2

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-aws/sdk/v7/go/aws/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Provides EC2 allowed images settings for an AWS account. This feature allows you to control which AMIs can be used to launch EC2 instances in your account based on specified criteria.
//
// For more information about the image criteria that can be set, see the [AWS documentation on Allowed AMIs JSON configuration](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-allowed-amis.html#allowed-amis-json-configuration).
//
// > **NOTE:** The AWS API does not delete this resource. When you run `destroy`, the provider will attempt to disable the setting.
//
// > **NOTE:** There is only one allowed images settings configuration per AWS account and region. Creating this resource will configure the account-level settings.
//
// ## Example Usage
//
// ### Enable with Amazon AMIs only
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws/sdk/v7/go/aws/ec2"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := ec2.NewAllowedImagesSettings(ctx, "example", &ec2.AllowedImagesSettingsArgs{
//				State: pulumi.String("enabled"),
//				ImageCriterions: ec2.AllowedImagesSettingsImageCriterionArray{
//					&ec2.AllowedImagesSettingsImageCriterionArgs{
//						ImageProviders: pulumi.StringArray{
//							pulumi.String("amazon"),
//						},
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ### Enable audit mode with specific account IDs
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws/sdk/v7/go/aws/ec2"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := ec2.NewAllowedImagesSettings(ctx, "example", &ec2.AllowedImagesSettingsArgs{
//				State: pulumi.String("audit-mode"),
//				ImageCriterions: ec2.AllowedImagesSettingsImageCriterionArray{
//					&ec2.AllowedImagesSettingsImageCriterionArgs{
//						ImageProviders: pulumi.StringArray{
//							pulumi.String("amazon"),
//							pulumi.String("123456789012"),
//						},
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// Using `pulumi import`, import EC2 allowed images settings. For example:
//
// ```sh
// $ pulumi import aws:ec2/allowedImagesSettings:AllowedImagesSettings example us-east-1
// ```
type AllowedImagesSettings struct {
	pulumi.CustomResourceState

	// List of image criteria. Maximum of 10 criterion blocks allowed. See `imageCriterion` below.
	ImageCriterions AllowedImagesSettingsImageCriterionArrayOutput `pulumi:"imageCriterions"`
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region pulumi.StringOutput `pulumi:"region"`
	// State of the allowed images settings. Valid values are `enabled` or `audit-mode`.
	State pulumi.StringOutput `pulumi:"state"`
}

// NewAllowedImagesSettings registers a new resource with the given unique name, arguments, and options.
func NewAllowedImagesSettings(ctx *pulumi.Context,
	name string, args *AllowedImagesSettingsArgs, opts ...pulumi.ResourceOption) (*AllowedImagesSettings, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.State == nil {
		return nil, errors.New("invalid value for required argument 'State'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource AllowedImagesSettings
	err := ctx.RegisterResource("aws:ec2/allowedImagesSettings:AllowedImagesSettings", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetAllowedImagesSettings gets an existing AllowedImagesSettings resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetAllowedImagesSettings(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *AllowedImagesSettingsState, opts ...pulumi.ResourceOption) (*AllowedImagesSettings, error) {
	var resource AllowedImagesSettings
	err := ctx.ReadResource("aws:ec2/allowedImagesSettings:AllowedImagesSettings", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering AllowedImagesSettings resources.
type allowedImagesSettingsState struct {
	// List of image criteria. Maximum of 10 criterion blocks allowed. See `imageCriterion` below.
	ImageCriterions []AllowedImagesSettingsImageCriterion `pulumi:"imageCriterions"`
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region *string `pulumi:"region"`
	// State of the allowed images settings. Valid values are `enabled` or `audit-mode`.
	State *string `pulumi:"state"`
}

type AllowedImagesSettingsState struct {
	// List of image criteria. Maximum of 10 criterion blocks allowed. See `imageCriterion` below.
	ImageCriterions AllowedImagesSettingsImageCriterionArrayInput
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region pulumi.StringPtrInput
	// State of the allowed images settings. Valid values are `enabled` or `audit-mode`.
	State pulumi.StringPtrInput
}

func (AllowedImagesSettingsState) ElementType() reflect.Type {
	return reflect.TypeOf((*allowedImagesSettingsState)(nil)).Elem()
}

type allowedImagesSettingsArgs struct {
	// List of image criteria. Maximum of 10 criterion blocks allowed. See `imageCriterion` below.
	ImageCriterions []AllowedImagesSettingsImageCriterion `pulumi:"imageCriterions"`
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region *string `pulumi:"region"`
	// State of the allowed images settings. Valid values are `enabled` or `audit-mode`.
	State string `pulumi:"state"`
}

// The set of arguments for constructing a AllowedImagesSettings resource.
type AllowedImagesSettingsArgs struct {
	// List of image criteria. Maximum of 10 criterion blocks allowed. See `imageCriterion` below.
	ImageCriterions AllowedImagesSettingsImageCriterionArrayInput
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region pulumi.StringPtrInput
	// State of the allowed images settings. Valid values are `enabled` or `audit-mode`.
	State pulumi.StringInput
}

func (AllowedImagesSettingsArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*allowedImagesSettingsArgs)(nil)).Elem()
}

type AllowedImagesSettingsInput interface {
	pulumi.Input

	ToAllowedImagesSettingsOutput() AllowedImagesSettingsOutput
	ToAllowedImagesSettingsOutputWithContext(ctx context.Context) AllowedImagesSettingsOutput
}

func (*AllowedImagesSettings) ElementType() reflect.Type {
	return reflect.TypeOf((**AllowedImagesSettings)(nil)).Elem()
}

func (i *AllowedImagesSettings) ToAllowedImagesSettingsOutput() AllowedImagesSettingsOutput {
	return i.ToAllowedImagesSettingsOutputWithContext(context.Background())
}

func (i *AllowedImagesSettings) ToAllowedImagesSettingsOutputWithContext(ctx context.Context) AllowedImagesSettingsOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AllowedImagesSettingsOutput)
}

// AllowedImagesSettingsArrayInput is an input type that accepts AllowedImagesSettingsArray and AllowedImagesSettingsArrayOutput values.
// You can construct a concrete instance of `AllowedImagesSettingsArrayInput` via:
//
//	AllowedImagesSettingsArray{ AllowedImagesSettingsArgs{...} }
type AllowedImagesSettingsArrayInput interface {
	pulumi.Input

	ToAllowedImagesSettingsArrayOutput() AllowedImagesSettingsArrayOutput
	ToAllowedImagesSettingsArrayOutputWithContext(context.Context) AllowedImagesSettingsArrayOutput
}

type AllowedImagesSettingsArray []AllowedImagesSettingsInput

func (AllowedImagesSettingsArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*AllowedImagesSettings)(nil)).Elem()
}

func (i AllowedImagesSettingsArray) ToAllowedImagesSettingsArrayOutput() AllowedImagesSettingsArrayOutput {
	return i.ToAllowedImagesSettingsArrayOutputWithContext(context.Background())
}

func (i AllowedImagesSettingsArray) ToAllowedImagesSettingsArrayOutputWithContext(ctx context.Context) AllowedImagesSettingsArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AllowedImagesSettingsArrayOutput)
}

// AllowedImagesSettingsMapInput is an input type that accepts AllowedImagesSettingsMap and AllowedImagesSettingsMapOutput values.
// You can construct a concrete instance of `AllowedImagesSettingsMapInput` via:
//
//	AllowedImagesSettingsMap{ "key": AllowedImagesSettingsArgs{...} }
type AllowedImagesSettingsMapInput interface {
	pulumi.Input

	ToAllowedImagesSettingsMapOutput() AllowedImagesSettingsMapOutput
	ToAllowedImagesSettingsMapOutputWithContext(context.Context) AllowedImagesSettingsMapOutput
}

type AllowedImagesSettingsMap map[string]AllowedImagesSettingsInput

func (AllowedImagesSettingsMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*AllowedImagesSettings)(nil)).Elem()
}

func (i AllowedImagesSettingsMap) ToAllowedImagesSettingsMapOutput() AllowedImagesSettingsMapOutput {
	return i.ToAllowedImagesSettingsMapOutputWithContext(context.Background())
}

func (i AllowedImagesSettingsMap) ToAllowedImagesSettingsMapOutputWithContext(ctx context.Context) AllowedImagesSettingsMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AllowedImagesSettingsMapOutput)
}

type AllowedImagesSettingsOutput struct{ *pulumi.OutputState }

func (AllowedImagesSettingsOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**AllowedImagesSettings)(nil)).Elem()
}

func (o AllowedImagesSettingsOutput) ToAllowedImagesSettingsOutput() AllowedImagesSettingsOutput {
	return o
}

func (o AllowedImagesSettingsOutput) ToAllowedImagesSettingsOutputWithContext(ctx context.Context) AllowedImagesSettingsOutput {
	return o
}

// List of image criteria. Maximum of 10 criterion blocks allowed. See `imageCriterion` below.
func (o AllowedImagesSettingsOutput) ImageCriterions() AllowedImagesSettingsImageCriterionArrayOutput {
	return o.ApplyT(func(v *AllowedImagesSettings) AllowedImagesSettingsImageCriterionArrayOutput {
		return v.ImageCriterions
	}).(AllowedImagesSettingsImageCriterionArrayOutput)
}

// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
func (o AllowedImagesSettingsOutput) Region() pulumi.StringOutput {
	return o.ApplyT(func(v *AllowedImagesSettings) pulumi.StringOutput { return v.Region }).(pulumi.StringOutput)
}

// State of the allowed images settings. Valid values are `enabled` or `audit-mode`.
func (o AllowedImagesSettingsOutput) State() pulumi.StringOutput {
	return o.ApplyT(func(v *AllowedImagesSettings) pulumi.StringOutput { return v.State }).(pulumi.StringOutput)
}

type AllowedImagesSettingsArrayOutput struct{ *pulumi.OutputState }

func (AllowedImagesSettingsArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*AllowedImagesSettings)(nil)).Elem()
}

func (o AllowedImagesSettingsArrayOutput) ToAllowedImagesSettingsArrayOutput() AllowedImagesSettingsArrayOutput {
	return o
}

func (o AllowedImagesSettingsArrayOutput) ToAllowedImagesSettingsArrayOutputWithContext(ctx context.Context) AllowedImagesSettingsArrayOutput {
	return o
}

func (o AllowedImagesSettingsArrayOutput) Index(i pulumi.IntInput) AllowedImagesSettingsOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *AllowedImagesSettings {
		return vs[0].([]*AllowedImagesSettings)[vs[1].(int)]
	}).(AllowedImagesSettingsOutput)
}

type AllowedImagesSettingsMapOutput struct{ *pulumi.OutputState }

func (AllowedImagesSettingsMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*AllowedImagesSettings)(nil)).Elem()
}

func (o AllowedImagesSettingsMapOutput) ToAllowedImagesSettingsMapOutput() AllowedImagesSettingsMapOutput {
	return o
}

func (o AllowedImagesSettingsMapOutput) ToAllowedImagesSettingsMapOutputWithContext(ctx context.Context) AllowedImagesSettingsMapOutput {
	return o
}

func (o AllowedImagesSettingsMapOutput) MapIndex(k pulumi.StringInput) AllowedImagesSettingsOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *AllowedImagesSettings {
		return vs[0].(map[string]*AllowedImagesSettings)[vs[1].(string)]
	}).(AllowedImagesSettingsOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*AllowedImagesSettingsInput)(nil)).Elem(), &AllowedImagesSettings{})
	pulumi.RegisterInputType(reflect.TypeOf((*AllowedImagesSettingsArrayInput)(nil)).Elem(), AllowedImagesSettingsArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*AllowedImagesSettingsMapInput)(nil)).Elem(), AllowedImagesSettingsMap{})
	pulumi.RegisterOutputType(AllowedImagesSettingsOutput{})
	pulumi.RegisterOutputType(AllowedImagesSettingsArrayOutput{})
	pulumi.RegisterOutputType(AllowedImagesSettingsMapOutput{})
}
