// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package ec2

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Provisions a CIDR from an IPAM address pool.
//
// > **NOTE:** Provisioning Public IPv4 or Public IPv6 require [steps outside the scope of this resource](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-byoip.html#prepare-for-byoip). The resource accepts `message` and `signature` as part of the `cidrAuthorizationContext` attribute but those must be generated ahead of time. Public IPv6 CIDRs that are provisioned into a Pool with `publiclyAdvertisable = true` and all public IPv4 CIDRs also require creating a Route Origin Authorization (ROA) object in your Regional Internet Registry (RIR).
//
// > **NOTE:** In order to deprovision CIDRs all Allocations must be released. Allocations created by a VPC take up to 30 minutes to be released. However, for IPAM to properly manage the removal of allocation records created by VPCs and other resources, you must [grant it permissions](https://docs.aws.amazon.com/vpc/latest/ipam/choose-single-user-or-orgs-ipam.html) in
// either a single account or organizationally. If you are unable to deprovision a cidr after waiting over 30 minutes, you may be missing the Service Linked Role.
//
// ## Example Usage
//
// Basic usage:
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws"
//	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/ec2"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			current, err := aws.GetRegion(ctx, nil, nil)
//			if err != nil {
//				return err
//			}
//			example, err := ec2.NewVpcIpam(ctx, "example", &ec2.VpcIpamArgs{
//				OperatingRegions: ec2.VpcIpamOperatingRegionArray{
//					&ec2.VpcIpamOperatingRegionArgs{
//						RegionName: *pulumi.String(current.Name),
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			exampleVpcIpamPool, err := ec2.NewVpcIpamPool(ctx, "example", &ec2.VpcIpamPoolArgs{
//				AddressFamily: pulumi.String("ipv4"),
//				IpamScopeId:   example.PrivateDefaultScopeId,
//				Locale:        *pulumi.String(current.Name),
//			})
//			if err != nil {
//				return err
//			}
//			_, err = ec2.NewVpcIpamPoolCidr(ctx, "example", &ec2.VpcIpamPoolCidrArgs{
//				IpamPoolId: exampleVpcIpamPool.ID(),
//				Cidr:       pulumi.String("172.20.0.0/16"),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// Provision Public IPv6 Pool CIDRs:
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws"
//	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/ec2"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			current, err := aws.GetRegion(ctx, nil, nil)
//			if err != nil {
//				return err
//			}
//			example, err := ec2.NewVpcIpam(ctx, "example", &ec2.VpcIpamArgs{
//				OperatingRegions: ec2.VpcIpamOperatingRegionArray{
//					&ec2.VpcIpamOperatingRegionArgs{
//						RegionName: *pulumi.String(current.Name),
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			ipv6TestPublic, err := ec2.NewVpcIpamPool(ctx, "ipv6_test_public", &ec2.VpcIpamPoolArgs{
//				AddressFamily:        pulumi.String("ipv6"),
//				IpamScopeId:          example.PublicDefaultScopeId,
//				Locale:               pulumi.String("us-east-1"),
//				Description:          pulumi.String("public ipv6"),
//				PubliclyAdvertisable: pulumi.Bool(false),
//				PublicIpSource:       pulumi.String("amazon"),
//				AwsService:           pulumi.String("ec2"),
//			})
//			if err != nil {
//				return err
//			}
//			_, err = ec2.NewVpcIpamPoolCidr(ctx, "ipv6_test_public", &ec2.VpcIpamPoolCidrArgs{
//				IpamPoolId:    ipv6TestPublic.ID(),
//				NetmaskLength: pulumi.Int(52),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// Using `pulumi import`, import IPAMs using the `<cidr>_<ipam-pool-id>`. For example:
//
// __NOTE:__ Do not use the IPAM Pool Cidr ID as this was introduced after the resource already existed.
//
// ```sh
//
//	$ pulumi import aws:ec2/vpcIpamPoolCidr:VpcIpamPoolCidr example 172.20.0.0/24_ipam-pool-0e634f5a1517cccdc
//
// ```
type VpcIpamPoolCidr struct {
	pulumi.CustomResourceState

	// The CIDR you want to assign to the pool. Conflicts with `netmaskLength`.
	Cidr pulumi.StringOutput `pulumi:"cidr"`
	// A signed document that proves that you are authorized to bring the specified IP address range to Amazon using BYOIP. This is not stored in the state file. See cidrAuthorizationContext for more information.
	CidrAuthorizationContext VpcIpamPoolCidrCidrAuthorizationContextPtrOutput `pulumi:"cidrAuthorizationContext"`
	// The unique ID generated by AWS for the pool cidr. Typically this is the resource `id` but this attribute was added to the API calls after the fact and is therefore not used as the resource id.
	IpamPoolCidrId pulumi.StringOutput `pulumi:"ipamPoolCidrId"`
	// The ID of the pool to which you want to assign a CIDR.
	IpamPoolId pulumi.StringOutput `pulumi:"ipamPoolId"`
	// If provided, the cidr provisioned into the specified pool will be the next available cidr given this declared netmask length. Conflicts with `cidr`.
	NetmaskLength pulumi.IntPtrOutput `pulumi:"netmaskLength"`
}

// NewVpcIpamPoolCidr registers a new resource with the given unique name, arguments, and options.
func NewVpcIpamPoolCidr(ctx *pulumi.Context,
	name string, args *VpcIpamPoolCidrArgs, opts ...pulumi.ResourceOption) (*VpcIpamPoolCidr, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.IpamPoolId == nil {
		return nil, errors.New("invalid value for required argument 'IpamPoolId'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource VpcIpamPoolCidr
	err := ctx.RegisterResource("aws:ec2/vpcIpamPoolCidr:VpcIpamPoolCidr", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetVpcIpamPoolCidr gets an existing VpcIpamPoolCidr resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetVpcIpamPoolCidr(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *VpcIpamPoolCidrState, opts ...pulumi.ResourceOption) (*VpcIpamPoolCidr, error) {
	var resource VpcIpamPoolCidr
	err := ctx.ReadResource("aws:ec2/vpcIpamPoolCidr:VpcIpamPoolCidr", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering VpcIpamPoolCidr resources.
type vpcIpamPoolCidrState struct {
	// The CIDR you want to assign to the pool. Conflicts with `netmaskLength`.
	Cidr *string `pulumi:"cidr"`
	// A signed document that proves that you are authorized to bring the specified IP address range to Amazon using BYOIP. This is not stored in the state file. See cidrAuthorizationContext for more information.
	CidrAuthorizationContext *VpcIpamPoolCidrCidrAuthorizationContext `pulumi:"cidrAuthorizationContext"`
	// The unique ID generated by AWS for the pool cidr. Typically this is the resource `id` but this attribute was added to the API calls after the fact and is therefore not used as the resource id.
	IpamPoolCidrId *string `pulumi:"ipamPoolCidrId"`
	// The ID of the pool to which you want to assign a CIDR.
	IpamPoolId *string `pulumi:"ipamPoolId"`
	// If provided, the cidr provisioned into the specified pool will be the next available cidr given this declared netmask length. Conflicts with `cidr`.
	NetmaskLength *int `pulumi:"netmaskLength"`
}

type VpcIpamPoolCidrState struct {
	// The CIDR you want to assign to the pool. Conflicts with `netmaskLength`.
	Cidr pulumi.StringPtrInput
	// A signed document that proves that you are authorized to bring the specified IP address range to Amazon using BYOIP. This is not stored in the state file. See cidrAuthorizationContext for more information.
	CidrAuthorizationContext VpcIpamPoolCidrCidrAuthorizationContextPtrInput
	// The unique ID generated by AWS for the pool cidr. Typically this is the resource `id` but this attribute was added to the API calls after the fact and is therefore not used as the resource id.
	IpamPoolCidrId pulumi.StringPtrInput
	// The ID of the pool to which you want to assign a CIDR.
	IpamPoolId pulumi.StringPtrInput
	// If provided, the cidr provisioned into the specified pool will be the next available cidr given this declared netmask length. Conflicts with `cidr`.
	NetmaskLength pulumi.IntPtrInput
}

func (VpcIpamPoolCidrState) ElementType() reflect.Type {
	return reflect.TypeOf((*vpcIpamPoolCidrState)(nil)).Elem()
}

type vpcIpamPoolCidrArgs struct {
	// The CIDR you want to assign to the pool. Conflicts with `netmaskLength`.
	Cidr *string `pulumi:"cidr"`
	// A signed document that proves that you are authorized to bring the specified IP address range to Amazon using BYOIP. This is not stored in the state file. See cidrAuthorizationContext for more information.
	CidrAuthorizationContext *VpcIpamPoolCidrCidrAuthorizationContext `pulumi:"cidrAuthorizationContext"`
	// The ID of the pool to which you want to assign a CIDR.
	IpamPoolId string `pulumi:"ipamPoolId"`
	// If provided, the cidr provisioned into the specified pool will be the next available cidr given this declared netmask length. Conflicts with `cidr`.
	NetmaskLength *int `pulumi:"netmaskLength"`
}

// The set of arguments for constructing a VpcIpamPoolCidr resource.
type VpcIpamPoolCidrArgs struct {
	// The CIDR you want to assign to the pool. Conflicts with `netmaskLength`.
	Cidr pulumi.StringPtrInput
	// A signed document that proves that you are authorized to bring the specified IP address range to Amazon using BYOIP. This is not stored in the state file. See cidrAuthorizationContext for more information.
	CidrAuthorizationContext VpcIpamPoolCidrCidrAuthorizationContextPtrInput
	// The ID of the pool to which you want to assign a CIDR.
	IpamPoolId pulumi.StringInput
	// If provided, the cidr provisioned into the specified pool will be the next available cidr given this declared netmask length. Conflicts with `cidr`.
	NetmaskLength pulumi.IntPtrInput
}

func (VpcIpamPoolCidrArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*vpcIpamPoolCidrArgs)(nil)).Elem()
}

type VpcIpamPoolCidrInput interface {
	pulumi.Input

	ToVpcIpamPoolCidrOutput() VpcIpamPoolCidrOutput
	ToVpcIpamPoolCidrOutputWithContext(ctx context.Context) VpcIpamPoolCidrOutput
}

func (*VpcIpamPoolCidr) ElementType() reflect.Type {
	return reflect.TypeOf((**VpcIpamPoolCidr)(nil)).Elem()
}

func (i *VpcIpamPoolCidr) ToVpcIpamPoolCidrOutput() VpcIpamPoolCidrOutput {
	return i.ToVpcIpamPoolCidrOutputWithContext(context.Background())
}

func (i *VpcIpamPoolCidr) ToVpcIpamPoolCidrOutputWithContext(ctx context.Context) VpcIpamPoolCidrOutput {
	return pulumi.ToOutputWithContext(ctx, i).(VpcIpamPoolCidrOutput)
}

// VpcIpamPoolCidrArrayInput is an input type that accepts VpcIpamPoolCidrArray and VpcIpamPoolCidrArrayOutput values.
// You can construct a concrete instance of `VpcIpamPoolCidrArrayInput` via:
//
//	VpcIpamPoolCidrArray{ VpcIpamPoolCidrArgs{...} }
type VpcIpamPoolCidrArrayInput interface {
	pulumi.Input

	ToVpcIpamPoolCidrArrayOutput() VpcIpamPoolCidrArrayOutput
	ToVpcIpamPoolCidrArrayOutputWithContext(context.Context) VpcIpamPoolCidrArrayOutput
}

type VpcIpamPoolCidrArray []VpcIpamPoolCidrInput

func (VpcIpamPoolCidrArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*VpcIpamPoolCidr)(nil)).Elem()
}

func (i VpcIpamPoolCidrArray) ToVpcIpamPoolCidrArrayOutput() VpcIpamPoolCidrArrayOutput {
	return i.ToVpcIpamPoolCidrArrayOutputWithContext(context.Background())
}

func (i VpcIpamPoolCidrArray) ToVpcIpamPoolCidrArrayOutputWithContext(ctx context.Context) VpcIpamPoolCidrArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(VpcIpamPoolCidrArrayOutput)
}

// VpcIpamPoolCidrMapInput is an input type that accepts VpcIpamPoolCidrMap and VpcIpamPoolCidrMapOutput values.
// You can construct a concrete instance of `VpcIpamPoolCidrMapInput` via:
//
//	VpcIpamPoolCidrMap{ "key": VpcIpamPoolCidrArgs{...} }
type VpcIpamPoolCidrMapInput interface {
	pulumi.Input

	ToVpcIpamPoolCidrMapOutput() VpcIpamPoolCidrMapOutput
	ToVpcIpamPoolCidrMapOutputWithContext(context.Context) VpcIpamPoolCidrMapOutput
}

type VpcIpamPoolCidrMap map[string]VpcIpamPoolCidrInput

func (VpcIpamPoolCidrMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*VpcIpamPoolCidr)(nil)).Elem()
}

func (i VpcIpamPoolCidrMap) ToVpcIpamPoolCidrMapOutput() VpcIpamPoolCidrMapOutput {
	return i.ToVpcIpamPoolCidrMapOutputWithContext(context.Background())
}

func (i VpcIpamPoolCidrMap) ToVpcIpamPoolCidrMapOutputWithContext(ctx context.Context) VpcIpamPoolCidrMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(VpcIpamPoolCidrMapOutput)
}

type VpcIpamPoolCidrOutput struct{ *pulumi.OutputState }

func (VpcIpamPoolCidrOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**VpcIpamPoolCidr)(nil)).Elem()
}

func (o VpcIpamPoolCidrOutput) ToVpcIpamPoolCidrOutput() VpcIpamPoolCidrOutput {
	return o
}

func (o VpcIpamPoolCidrOutput) ToVpcIpamPoolCidrOutputWithContext(ctx context.Context) VpcIpamPoolCidrOutput {
	return o
}

// The CIDR you want to assign to the pool. Conflicts with `netmaskLength`.
func (o VpcIpamPoolCidrOutput) Cidr() pulumi.StringOutput {
	return o.ApplyT(func(v *VpcIpamPoolCidr) pulumi.StringOutput { return v.Cidr }).(pulumi.StringOutput)
}

// A signed document that proves that you are authorized to bring the specified IP address range to Amazon using BYOIP. This is not stored in the state file. See cidrAuthorizationContext for more information.
func (o VpcIpamPoolCidrOutput) CidrAuthorizationContext() VpcIpamPoolCidrCidrAuthorizationContextPtrOutput {
	return o.ApplyT(func(v *VpcIpamPoolCidr) VpcIpamPoolCidrCidrAuthorizationContextPtrOutput {
		return v.CidrAuthorizationContext
	}).(VpcIpamPoolCidrCidrAuthorizationContextPtrOutput)
}

// The unique ID generated by AWS for the pool cidr. Typically this is the resource `id` but this attribute was added to the API calls after the fact and is therefore not used as the resource id.
func (o VpcIpamPoolCidrOutput) IpamPoolCidrId() pulumi.StringOutput {
	return o.ApplyT(func(v *VpcIpamPoolCidr) pulumi.StringOutput { return v.IpamPoolCidrId }).(pulumi.StringOutput)
}

// The ID of the pool to which you want to assign a CIDR.
func (o VpcIpamPoolCidrOutput) IpamPoolId() pulumi.StringOutput {
	return o.ApplyT(func(v *VpcIpamPoolCidr) pulumi.StringOutput { return v.IpamPoolId }).(pulumi.StringOutput)
}

// If provided, the cidr provisioned into the specified pool will be the next available cidr given this declared netmask length. Conflicts with `cidr`.
func (o VpcIpamPoolCidrOutput) NetmaskLength() pulumi.IntPtrOutput {
	return o.ApplyT(func(v *VpcIpamPoolCidr) pulumi.IntPtrOutput { return v.NetmaskLength }).(pulumi.IntPtrOutput)
}

type VpcIpamPoolCidrArrayOutput struct{ *pulumi.OutputState }

func (VpcIpamPoolCidrArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*VpcIpamPoolCidr)(nil)).Elem()
}

func (o VpcIpamPoolCidrArrayOutput) ToVpcIpamPoolCidrArrayOutput() VpcIpamPoolCidrArrayOutput {
	return o
}

func (o VpcIpamPoolCidrArrayOutput) ToVpcIpamPoolCidrArrayOutputWithContext(ctx context.Context) VpcIpamPoolCidrArrayOutput {
	return o
}

func (o VpcIpamPoolCidrArrayOutput) Index(i pulumi.IntInput) VpcIpamPoolCidrOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *VpcIpamPoolCidr {
		return vs[0].([]*VpcIpamPoolCidr)[vs[1].(int)]
	}).(VpcIpamPoolCidrOutput)
}

type VpcIpamPoolCidrMapOutput struct{ *pulumi.OutputState }

func (VpcIpamPoolCidrMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*VpcIpamPoolCidr)(nil)).Elem()
}

func (o VpcIpamPoolCidrMapOutput) ToVpcIpamPoolCidrMapOutput() VpcIpamPoolCidrMapOutput {
	return o
}

func (o VpcIpamPoolCidrMapOutput) ToVpcIpamPoolCidrMapOutputWithContext(ctx context.Context) VpcIpamPoolCidrMapOutput {
	return o
}

func (o VpcIpamPoolCidrMapOutput) MapIndex(k pulumi.StringInput) VpcIpamPoolCidrOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *VpcIpamPoolCidr {
		return vs[0].(map[string]*VpcIpamPoolCidr)[vs[1].(string)]
	}).(VpcIpamPoolCidrOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*VpcIpamPoolCidrInput)(nil)).Elem(), &VpcIpamPoolCidr{})
	pulumi.RegisterInputType(reflect.TypeOf((*VpcIpamPoolCidrArrayInput)(nil)).Elem(), VpcIpamPoolCidrArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*VpcIpamPoolCidrMapInput)(nil)).Elem(), VpcIpamPoolCidrMap{})
	pulumi.RegisterOutputType(VpcIpamPoolCidrOutput{})
	pulumi.RegisterOutputType(VpcIpamPoolCidrArrayOutput{})
	pulumi.RegisterOutputType(VpcIpamPoolCidrMapOutput{})
}
