// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package ec2

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-aws/sdk/v7/go/aws/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Resource for managing an exclusive set of AWS VPC (Virtual Private Cloud) Security Group Rules.
//
// This resource manages the complete set of ingress and egress rules assigned to a security group. It provides exclusive control by removing any rules not explicitly defined in the configuration.
//
// !> This resource takes exclusive ownership over ingress and egress rules assigned to a security group. This includes removal of rules which are not explicitly configured. To prevent persistent drift, ensure any `vpc.SecurityGroupIngressRule` and `vpc.SecurityGroupEgressRule` resources managed alongside this resource are included in the `ingressRuleIds` and `egressRuleIds` arguments.
//
// > Destruction of this resource means Terraform will no longer manage reconciliation of the configured security group rules. It **will not** revoke the configured rules from the security group.
//
// > When this resource detects a configured rule ID which must be created, a warning diagnostic is emitted. This is due to a limitation in the [`AuthorizeSecurityGroupEgress`](https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_AuthorizeSecurityGroupEgress.html) and [`AuthorizeSecurityGroupIngress`](https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_AuthorizeSecurityGroupIngress.html) APIs, which require the full rule definition to be provided rather than a reference to an existing rule ID.
//
// ## Example Usage
//
// ### Basic Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws/sdk/v7/go/aws/ec2"
//	"github.com/pulumi/pulumi-aws/sdk/v7/go/aws/vpc"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			example, err := ec2.NewVpc(ctx, "example", &ec2.VpcArgs{
//				CidrBlock: pulumi.String("10.0.0.0/16"),
//			})
//			if err != nil {
//				return err
//			}
//			exampleSecurityGroup, err := ec2.NewSecurityGroup(ctx, "example", &ec2.SecurityGroupArgs{
//				Name:  pulumi.String("example"),
//				VpcId: example.ID(),
//			})
//			if err != nil {
//				return err
//			}
//			exampleSecurityGroupIngressRule, err := vpc.NewSecurityGroupIngressRule(ctx, "example", &vpc.SecurityGroupIngressRuleArgs{
//				SecurityGroupId: exampleSecurityGroup.ID(),
//				CidrIpv4:        pulumi.String("10.0.0.0/8"),
//				FromPort:        pulumi.Int(80),
//				ToPort:          pulumi.Int(80),
//				IpProtocol:      pulumi.String("tcp"),
//			})
//			if err != nil {
//				return err
//			}
//			exampleSecurityGroupEgressRule, err := vpc.NewSecurityGroupEgressRule(ctx, "example", &vpc.SecurityGroupEgressRuleArgs{
//				SecurityGroupId: exampleSecurityGroup.ID(),
//				CidrIpv4:        pulumi.String("0.0.0.0/0"),
//				IpProtocol:      pulumi.String("-1"),
//			})
//			if err != nil {
//				return err
//			}
//			_, err = ec2.NewVpcSecurityGroupRulesExclusive(ctx, "example", &ec2.VpcSecurityGroupRulesExclusiveArgs{
//				SecurityGroupId: exampleSecurityGroup.ID(),
//				IngressRuleIds: pulumi.StringArray{
//					exampleSecurityGroupIngressRule.ID(),
//				},
//				EgressRuleIds: pulumi.StringArray{
//					exampleSecurityGroupEgressRule.ID(),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ### Disallow All Rules
//
// To automatically remove any configured security group rules, set both `ingressRuleIds` and `egressRuleIds` to empty lists.
//
// > This will not __prevent__ rules from being assigned to a security group via Terraform (or any other interface). This resource enables bringing security group rule assignments into a configured state, however, this reconciliation happens only when `apply` is proactively run.
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws/sdk/v7/go/aws/ec2"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := ec2.NewVpcSecurityGroupRulesExclusive(ctx, "example", &ec2.VpcSecurityGroupRulesExclusiveArgs{
//				SecurityGroupId: pulumi.Any(exampleAwsSecurityGroup.Id),
//				IngressRuleIds:  pulumi.StringArray{},
//				EgressRuleIds:   pulumi.StringArray{},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// Using `pulumi import`, import exclusive management of security group rules using the `securityGroupId`. For example:
//
// ```sh
// $ pulumi import aws:ec2/vpcSecurityGroupRulesExclusive:VpcSecurityGroupRulesExclusive example sg-1234567890abcdef0
// ```
type VpcSecurityGroupRulesExclusive struct {
	pulumi.CustomResourceState

	// Egress rule IDs.
	EgressRuleIds pulumi.StringArrayOutput `pulumi:"egressRuleIds"`
	// Ingress rule IDs.
	IngressRuleIds pulumi.StringArrayOutput `pulumi:"ingressRuleIds"`
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region pulumi.StringOutput `pulumi:"region"`
	// ID of the security group.
	SecurityGroupId pulumi.StringOutput `pulumi:"securityGroupId"`
}

// NewVpcSecurityGroupRulesExclusive registers a new resource with the given unique name, arguments, and options.
func NewVpcSecurityGroupRulesExclusive(ctx *pulumi.Context,
	name string, args *VpcSecurityGroupRulesExclusiveArgs, opts ...pulumi.ResourceOption) (*VpcSecurityGroupRulesExclusive, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.EgressRuleIds == nil {
		return nil, errors.New("invalid value for required argument 'EgressRuleIds'")
	}
	if args.IngressRuleIds == nil {
		return nil, errors.New("invalid value for required argument 'IngressRuleIds'")
	}
	if args.SecurityGroupId == nil {
		return nil, errors.New("invalid value for required argument 'SecurityGroupId'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource VpcSecurityGroupRulesExclusive
	err := ctx.RegisterResource("aws:ec2/vpcSecurityGroupRulesExclusive:VpcSecurityGroupRulesExclusive", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetVpcSecurityGroupRulesExclusive gets an existing VpcSecurityGroupRulesExclusive resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetVpcSecurityGroupRulesExclusive(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *VpcSecurityGroupRulesExclusiveState, opts ...pulumi.ResourceOption) (*VpcSecurityGroupRulesExclusive, error) {
	var resource VpcSecurityGroupRulesExclusive
	err := ctx.ReadResource("aws:ec2/vpcSecurityGroupRulesExclusive:VpcSecurityGroupRulesExclusive", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering VpcSecurityGroupRulesExclusive resources.
type vpcSecurityGroupRulesExclusiveState struct {
	// Egress rule IDs.
	EgressRuleIds []string `pulumi:"egressRuleIds"`
	// Ingress rule IDs.
	IngressRuleIds []string `pulumi:"ingressRuleIds"`
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region *string `pulumi:"region"`
	// ID of the security group.
	SecurityGroupId *string `pulumi:"securityGroupId"`
}

type VpcSecurityGroupRulesExclusiveState struct {
	// Egress rule IDs.
	EgressRuleIds pulumi.StringArrayInput
	// Ingress rule IDs.
	IngressRuleIds pulumi.StringArrayInput
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region pulumi.StringPtrInput
	// ID of the security group.
	SecurityGroupId pulumi.StringPtrInput
}

func (VpcSecurityGroupRulesExclusiveState) ElementType() reflect.Type {
	return reflect.TypeOf((*vpcSecurityGroupRulesExclusiveState)(nil)).Elem()
}

type vpcSecurityGroupRulesExclusiveArgs struct {
	// Egress rule IDs.
	EgressRuleIds []string `pulumi:"egressRuleIds"`
	// Ingress rule IDs.
	IngressRuleIds []string `pulumi:"ingressRuleIds"`
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region *string `pulumi:"region"`
	// ID of the security group.
	SecurityGroupId string `pulumi:"securityGroupId"`
}

// The set of arguments for constructing a VpcSecurityGroupRulesExclusive resource.
type VpcSecurityGroupRulesExclusiveArgs struct {
	// Egress rule IDs.
	EgressRuleIds pulumi.StringArrayInput
	// Ingress rule IDs.
	IngressRuleIds pulumi.StringArrayInput
	// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
	Region pulumi.StringPtrInput
	// ID of the security group.
	SecurityGroupId pulumi.StringInput
}

func (VpcSecurityGroupRulesExclusiveArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*vpcSecurityGroupRulesExclusiveArgs)(nil)).Elem()
}

type VpcSecurityGroupRulesExclusiveInput interface {
	pulumi.Input

	ToVpcSecurityGroupRulesExclusiveOutput() VpcSecurityGroupRulesExclusiveOutput
	ToVpcSecurityGroupRulesExclusiveOutputWithContext(ctx context.Context) VpcSecurityGroupRulesExclusiveOutput
}

func (*VpcSecurityGroupRulesExclusive) ElementType() reflect.Type {
	return reflect.TypeOf((**VpcSecurityGroupRulesExclusive)(nil)).Elem()
}

func (i *VpcSecurityGroupRulesExclusive) ToVpcSecurityGroupRulesExclusiveOutput() VpcSecurityGroupRulesExclusiveOutput {
	return i.ToVpcSecurityGroupRulesExclusiveOutputWithContext(context.Background())
}

func (i *VpcSecurityGroupRulesExclusive) ToVpcSecurityGroupRulesExclusiveOutputWithContext(ctx context.Context) VpcSecurityGroupRulesExclusiveOutput {
	return pulumi.ToOutputWithContext(ctx, i).(VpcSecurityGroupRulesExclusiveOutput)
}

// VpcSecurityGroupRulesExclusiveArrayInput is an input type that accepts VpcSecurityGroupRulesExclusiveArray and VpcSecurityGroupRulesExclusiveArrayOutput values.
// You can construct a concrete instance of `VpcSecurityGroupRulesExclusiveArrayInput` via:
//
//	VpcSecurityGroupRulesExclusiveArray{ VpcSecurityGroupRulesExclusiveArgs{...} }
type VpcSecurityGroupRulesExclusiveArrayInput interface {
	pulumi.Input

	ToVpcSecurityGroupRulesExclusiveArrayOutput() VpcSecurityGroupRulesExclusiveArrayOutput
	ToVpcSecurityGroupRulesExclusiveArrayOutputWithContext(context.Context) VpcSecurityGroupRulesExclusiveArrayOutput
}

type VpcSecurityGroupRulesExclusiveArray []VpcSecurityGroupRulesExclusiveInput

func (VpcSecurityGroupRulesExclusiveArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*VpcSecurityGroupRulesExclusive)(nil)).Elem()
}

func (i VpcSecurityGroupRulesExclusiveArray) ToVpcSecurityGroupRulesExclusiveArrayOutput() VpcSecurityGroupRulesExclusiveArrayOutput {
	return i.ToVpcSecurityGroupRulesExclusiveArrayOutputWithContext(context.Background())
}

func (i VpcSecurityGroupRulesExclusiveArray) ToVpcSecurityGroupRulesExclusiveArrayOutputWithContext(ctx context.Context) VpcSecurityGroupRulesExclusiveArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(VpcSecurityGroupRulesExclusiveArrayOutput)
}

// VpcSecurityGroupRulesExclusiveMapInput is an input type that accepts VpcSecurityGroupRulesExclusiveMap and VpcSecurityGroupRulesExclusiveMapOutput values.
// You can construct a concrete instance of `VpcSecurityGroupRulesExclusiveMapInput` via:
//
//	VpcSecurityGroupRulesExclusiveMap{ "key": VpcSecurityGroupRulesExclusiveArgs{...} }
type VpcSecurityGroupRulesExclusiveMapInput interface {
	pulumi.Input

	ToVpcSecurityGroupRulesExclusiveMapOutput() VpcSecurityGroupRulesExclusiveMapOutput
	ToVpcSecurityGroupRulesExclusiveMapOutputWithContext(context.Context) VpcSecurityGroupRulesExclusiveMapOutput
}

type VpcSecurityGroupRulesExclusiveMap map[string]VpcSecurityGroupRulesExclusiveInput

func (VpcSecurityGroupRulesExclusiveMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*VpcSecurityGroupRulesExclusive)(nil)).Elem()
}

func (i VpcSecurityGroupRulesExclusiveMap) ToVpcSecurityGroupRulesExclusiveMapOutput() VpcSecurityGroupRulesExclusiveMapOutput {
	return i.ToVpcSecurityGroupRulesExclusiveMapOutputWithContext(context.Background())
}

func (i VpcSecurityGroupRulesExclusiveMap) ToVpcSecurityGroupRulesExclusiveMapOutputWithContext(ctx context.Context) VpcSecurityGroupRulesExclusiveMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(VpcSecurityGroupRulesExclusiveMapOutput)
}

type VpcSecurityGroupRulesExclusiveOutput struct{ *pulumi.OutputState }

func (VpcSecurityGroupRulesExclusiveOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**VpcSecurityGroupRulesExclusive)(nil)).Elem()
}

func (o VpcSecurityGroupRulesExclusiveOutput) ToVpcSecurityGroupRulesExclusiveOutput() VpcSecurityGroupRulesExclusiveOutput {
	return o
}

func (o VpcSecurityGroupRulesExclusiveOutput) ToVpcSecurityGroupRulesExclusiveOutputWithContext(ctx context.Context) VpcSecurityGroupRulesExclusiveOutput {
	return o
}

// Egress rule IDs.
func (o VpcSecurityGroupRulesExclusiveOutput) EgressRuleIds() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *VpcSecurityGroupRulesExclusive) pulumi.StringArrayOutput { return v.EgressRuleIds }).(pulumi.StringArrayOutput)
}

// Ingress rule IDs.
func (o VpcSecurityGroupRulesExclusiveOutput) IngressRuleIds() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *VpcSecurityGroupRulesExclusive) pulumi.StringArrayOutput { return v.IngressRuleIds }).(pulumi.StringArrayOutput)
}

// Region where this resource will be [managed](https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints). Defaults to the Region set in the provider configuration.
func (o VpcSecurityGroupRulesExclusiveOutput) Region() pulumi.StringOutput {
	return o.ApplyT(func(v *VpcSecurityGroupRulesExclusive) pulumi.StringOutput { return v.Region }).(pulumi.StringOutput)
}

// ID of the security group.
func (o VpcSecurityGroupRulesExclusiveOutput) SecurityGroupId() pulumi.StringOutput {
	return o.ApplyT(func(v *VpcSecurityGroupRulesExclusive) pulumi.StringOutput { return v.SecurityGroupId }).(pulumi.StringOutput)
}

type VpcSecurityGroupRulesExclusiveArrayOutput struct{ *pulumi.OutputState }

func (VpcSecurityGroupRulesExclusiveArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*VpcSecurityGroupRulesExclusive)(nil)).Elem()
}

func (o VpcSecurityGroupRulesExclusiveArrayOutput) ToVpcSecurityGroupRulesExclusiveArrayOutput() VpcSecurityGroupRulesExclusiveArrayOutput {
	return o
}

func (o VpcSecurityGroupRulesExclusiveArrayOutput) ToVpcSecurityGroupRulesExclusiveArrayOutputWithContext(ctx context.Context) VpcSecurityGroupRulesExclusiveArrayOutput {
	return o
}

func (o VpcSecurityGroupRulesExclusiveArrayOutput) Index(i pulumi.IntInput) VpcSecurityGroupRulesExclusiveOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *VpcSecurityGroupRulesExclusive {
		return vs[0].([]*VpcSecurityGroupRulesExclusive)[vs[1].(int)]
	}).(VpcSecurityGroupRulesExclusiveOutput)
}

type VpcSecurityGroupRulesExclusiveMapOutput struct{ *pulumi.OutputState }

func (VpcSecurityGroupRulesExclusiveMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*VpcSecurityGroupRulesExclusive)(nil)).Elem()
}

func (o VpcSecurityGroupRulesExclusiveMapOutput) ToVpcSecurityGroupRulesExclusiveMapOutput() VpcSecurityGroupRulesExclusiveMapOutput {
	return o
}

func (o VpcSecurityGroupRulesExclusiveMapOutput) ToVpcSecurityGroupRulesExclusiveMapOutputWithContext(ctx context.Context) VpcSecurityGroupRulesExclusiveMapOutput {
	return o
}

func (o VpcSecurityGroupRulesExclusiveMapOutput) MapIndex(k pulumi.StringInput) VpcSecurityGroupRulesExclusiveOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *VpcSecurityGroupRulesExclusive {
		return vs[0].(map[string]*VpcSecurityGroupRulesExclusive)[vs[1].(string)]
	}).(VpcSecurityGroupRulesExclusiveOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*VpcSecurityGroupRulesExclusiveInput)(nil)).Elem(), &VpcSecurityGroupRulesExclusive{})
	pulumi.RegisterInputType(reflect.TypeOf((*VpcSecurityGroupRulesExclusiveArrayInput)(nil)).Elem(), VpcSecurityGroupRulesExclusiveArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*VpcSecurityGroupRulesExclusiveMapInput)(nil)).Elem(), VpcSecurityGroupRulesExclusiveMap{})
	pulumi.RegisterOutputType(VpcSecurityGroupRulesExclusiveOutput{})
	pulumi.RegisterOutputType(VpcSecurityGroupRulesExclusiveArrayOutput{})
	pulumi.RegisterOutputType(VpcSecurityGroupRulesExclusiveMapOutput{})
}
