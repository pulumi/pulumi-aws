// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package lightsail

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Manages session stickiness for a Lightsail Load Balancer.
//
// Use this resource to configure session stickiness to ensure that user sessions are consistently routed to the same backend instance. This helps maintain session state for applications that store session data locally on the server.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/lightsail"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			example, err := lightsail.NewLb(ctx, "example", &lightsail.LbArgs{
//				Name:            pulumi.String("example-load-balancer"),
//				HealthCheckPath: pulumi.String("/"),
//				InstancePort:    pulumi.Int(80),
//				Tags: pulumi.StringMap{
//					"foo": pulumi.String("bar"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			_, err = lightsail.NewLbStickinessPolicy(ctx, "example", &lightsail.LbStickinessPolicyArgs{
//				LbName:         example.Name,
//				CookieDuration: pulumi.Int(900),
//				Enabled:        pulumi.Bool(true),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// Using `pulumi import`, import `aws_lightsail_lb_stickiness_policy` using the `lb_name` attribute. For example:
//
// ```sh
// $ pulumi import aws:lightsail/lbStickinessPolicy:LbStickinessPolicy example example-load-balancer
// ```
type LbStickinessPolicy struct {
	pulumi.CustomResourceState

	// Cookie duration in seconds. This determines the length of the session stickiness.
	CookieDuration pulumi.IntOutput `pulumi:"cookieDuration"`
	// Whether to enable session stickiness for the load balancer.
	Enabled pulumi.BoolOutput `pulumi:"enabled"`
	// Name of the load balancer to which you want to enable session stickiness.
	LbName pulumi.StringOutput `pulumi:"lbName"`
}

// NewLbStickinessPolicy registers a new resource with the given unique name, arguments, and options.
func NewLbStickinessPolicy(ctx *pulumi.Context,
	name string, args *LbStickinessPolicyArgs, opts ...pulumi.ResourceOption) (*LbStickinessPolicy, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.CookieDuration == nil {
		return nil, errors.New("invalid value for required argument 'CookieDuration'")
	}
	if args.Enabled == nil {
		return nil, errors.New("invalid value for required argument 'Enabled'")
	}
	if args.LbName == nil {
		return nil, errors.New("invalid value for required argument 'LbName'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource LbStickinessPolicy
	err := ctx.RegisterResource("aws:lightsail/lbStickinessPolicy:LbStickinessPolicy", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetLbStickinessPolicy gets an existing LbStickinessPolicy resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetLbStickinessPolicy(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *LbStickinessPolicyState, opts ...pulumi.ResourceOption) (*LbStickinessPolicy, error) {
	var resource LbStickinessPolicy
	err := ctx.ReadResource("aws:lightsail/lbStickinessPolicy:LbStickinessPolicy", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering LbStickinessPolicy resources.
type lbStickinessPolicyState struct {
	// Cookie duration in seconds. This determines the length of the session stickiness.
	CookieDuration *int `pulumi:"cookieDuration"`
	// Whether to enable session stickiness for the load balancer.
	Enabled *bool `pulumi:"enabled"`
	// Name of the load balancer to which you want to enable session stickiness.
	LbName *string `pulumi:"lbName"`
}

type LbStickinessPolicyState struct {
	// Cookie duration in seconds. This determines the length of the session stickiness.
	CookieDuration pulumi.IntPtrInput
	// Whether to enable session stickiness for the load balancer.
	Enabled pulumi.BoolPtrInput
	// Name of the load balancer to which you want to enable session stickiness.
	LbName pulumi.StringPtrInput
}

func (LbStickinessPolicyState) ElementType() reflect.Type {
	return reflect.TypeOf((*lbStickinessPolicyState)(nil)).Elem()
}

type lbStickinessPolicyArgs struct {
	// Cookie duration in seconds. This determines the length of the session stickiness.
	CookieDuration int `pulumi:"cookieDuration"`
	// Whether to enable session stickiness for the load balancer.
	Enabled bool `pulumi:"enabled"`
	// Name of the load balancer to which you want to enable session stickiness.
	LbName string `pulumi:"lbName"`
}

// The set of arguments for constructing a LbStickinessPolicy resource.
type LbStickinessPolicyArgs struct {
	// Cookie duration in seconds. This determines the length of the session stickiness.
	CookieDuration pulumi.IntInput
	// Whether to enable session stickiness for the load balancer.
	Enabled pulumi.BoolInput
	// Name of the load balancer to which you want to enable session stickiness.
	LbName pulumi.StringInput
}

func (LbStickinessPolicyArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*lbStickinessPolicyArgs)(nil)).Elem()
}

type LbStickinessPolicyInput interface {
	pulumi.Input

	ToLbStickinessPolicyOutput() LbStickinessPolicyOutput
	ToLbStickinessPolicyOutputWithContext(ctx context.Context) LbStickinessPolicyOutput
}

func (*LbStickinessPolicy) ElementType() reflect.Type {
	return reflect.TypeOf((**LbStickinessPolicy)(nil)).Elem()
}

func (i *LbStickinessPolicy) ToLbStickinessPolicyOutput() LbStickinessPolicyOutput {
	return i.ToLbStickinessPolicyOutputWithContext(context.Background())
}

func (i *LbStickinessPolicy) ToLbStickinessPolicyOutputWithContext(ctx context.Context) LbStickinessPolicyOutput {
	return pulumi.ToOutputWithContext(ctx, i).(LbStickinessPolicyOutput)
}

// LbStickinessPolicyArrayInput is an input type that accepts LbStickinessPolicyArray and LbStickinessPolicyArrayOutput values.
// You can construct a concrete instance of `LbStickinessPolicyArrayInput` via:
//
//	LbStickinessPolicyArray{ LbStickinessPolicyArgs{...} }
type LbStickinessPolicyArrayInput interface {
	pulumi.Input

	ToLbStickinessPolicyArrayOutput() LbStickinessPolicyArrayOutput
	ToLbStickinessPolicyArrayOutputWithContext(context.Context) LbStickinessPolicyArrayOutput
}

type LbStickinessPolicyArray []LbStickinessPolicyInput

func (LbStickinessPolicyArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*LbStickinessPolicy)(nil)).Elem()
}

func (i LbStickinessPolicyArray) ToLbStickinessPolicyArrayOutput() LbStickinessPolicyArrayOutput {
	return i.ToLbStickinessPolicyArrayOutputWithContext(context.Background())
}

func (i LbStickinessPolicyArray) ToLbStickinessPolicyArrayOutputWithContext(ctx context.Context) LbStickinessPolicyArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(LbStickinessPolicyArrayOutput)
}

// LbStickinessPolicyMapInput is an input type that accepts LbStickinessPolicyMap and LbStickinessPolicyMapOutput values.
// You can construct a concrete instance of `LbStickinessPolicyMapInput` via:
//
//	LbStickinessPolicyMap{ "key": LbStickinessPolicyArgs{...} }
type LbStickinessPolicyMapInput interface {
	pulumi.Input

	ToLbStickinessPolicyMapOutput() LbStickinessPolicyMapOutput
	ToLbStickinessPolicyMapOutputWithContext(context.Context) LbStickinessPolicyMapOutput
}

type LbStickinessPolicyMap map[string]LbStickinessPolicyInput

func (LbStickinessPolicyMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*LbStickinessPolicy)(nil)).Elem()
}

func (i LbStickinessPolicyMap) ToLbStickinessPolicyMapOutput() LbStickinessPolicyMapOutput {
	return i.ToLbStickinessPolicyMapOutputWithContext(context.Background())
}

func (i LbStickinessPolicyMap) ToLbStickinessPolicyMapOutputWithContext(ctx context.Context) LbStickinessPolicyMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(LbStickinessPolicyMapOutput)
}

type LbStickinessPolicyOutput struct{ *pulumi.OutputState }

func (LbStickinessPolicyOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**LbStickinessPolicy)(nil)).Elem()
}

func (o LbStickinessPolicyOutput) ToLbStickinessPolicyOutput() LbStickinessPolicyOutput {
	return o
}

func (o LbStickinessPolicyOutput) ToLbStickinessPolicyOutputWithContext(ctx context.Context) LbStickinessPolicyOutput {
	return o
}

// Cookie duration in seconds. This determines the length of the session stickiness.
func (o LbStickinessPolicyOutput) CookieDuration() pulumi.IntOutput {
	return o.ApplyT(func(v *LbStickinessPolicy) pulumi.IntOutput { return v.CookieDuration }).(pulumi.IntOutput)
}

// Whether to enable session stickiness for the load balancer.
func (o LbStickinessPolicyOutput) Enabled() pulumi.BoolOutput {
	return o.ApplyT(func(v *LbStickinessPolicy) pulumi.BoolOutput { return v.Enabled }).(pulumi.BoolOutput)
}

// Name of the load balancer to which you want to enable session stickiness.
func (o LbStickinessPolicyOutput) LbName() pulumi.StringOutput {
	return o.ApplyT(func(v *LbStickinessPolicy) pulumi.StringOutput { return v.LbName }).(pulumi.StringOutput)
}

type LbStickinessPolicyArrayOutput struct{ *pulumi.OutputState }

func (LbStickinessPolicyArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*LbStickinessPolicy)(nil)).Elem()
}

func (o LbStickinessPolicyArrayOutput) ToLbStickinessPolicyArrayOutput() LbStickinessPolicyArrayOutput {
	return o
}

func (o LbStickinessPolicyArrayOutput) ToLbStickinessPolicyArrayOutputWithContext(ctx context.Context) LbStickinessPolicyArrayOutput {
	return o
}

func (o LbStickinessPolicyArrayOutput) Index(i pulumi.IntInput) LbStickinessPolicyOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *LbStickinessPolicy {
		return vs[0].([]*LbStickinessPolicy)[vs[1].(int)]
	}).(LbStickinessPolicyOutput)
}

type LbStickinessPolicyMapOutput struct{ *pulumi.OutputState }

func (LbStickinessPolicyMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*LbStickinessPolicy)(nil)).Elem()
}

func (o LbStickinessPolicyMapOutput) ToLbStickinessPolicyMapOutput() LbStickinessPolicyMapOutput {
	return o
}

func (o LbStickinessPolicyMapOutput) ToLbStickinessPolicyMapOutputWithContext(ctx context.Context) LbStickinessPolicyMapOutput {
	return o
}

func (o LbStickinessPolicyMapOutput) MapIndex(k pulumi.StringInput) LbStickinessPolicyOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *LbStickinessPolicy {
		return vs[0].(map[string]*LbStickinessPolicy)[vs[1].(string)]
	}).(LbStickinessPolicyOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*LbStickinessPolicyInput)(nil)).Elem(), &LbStickinessPolicy{})
	pulumi.RegisterInputType(reflect.TypeOf((*LbStickinessPolicyArrayInput)(nil)).Elem(), LbStickinessPolicyArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*LbStickinessPolicyMapInput)(nil)).Elem(), LbStickinessPolicyMap{})
	pulumi.RegisterOutputType(LbStickinessPolicyOutput{})
	pulumi.RegisterOutputType(LbStickinessPolicyArrayOutput{})
	pulumi.RegisterOutputType(LbStickinessPolicyMapOutput{})
}
