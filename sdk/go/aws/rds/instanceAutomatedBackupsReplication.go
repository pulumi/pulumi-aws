// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package rds

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Manage cross-region replication of automated backups to a different AWS Region. Documentation for cross-region automated backup replication can be found at:
//
// * [Replicating automated backups to another AWS Region](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_ReplicateBackups.html)
//
// > **Note:** This resource has to be created in the destination region.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/rds"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := rds.NewInstanceAutomatedBackupsReplication(ctx, "default", &rds.InstanceAutomatedBackupsReplicationArgs{
//				RetentionPeriod:     pulumi.Int(14),
//				SourceDbInstanceArn: pulumi.String("arn:aws:rds:us-west-2:123456789012:db:mydatabase"),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
// ## Encrypting the automated backup with KMS
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/rds"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := rds.NewInstanceAutomatedBackupsReplication(ctx, "default", &rds.InstanceAutomatedBackupsReplicationArgs{
//				KmsKeyId:            pulumi.String("arn:aws:kms:us-east-1:123456789012:key/12345678-1234-1234-1234-123456789012"),
//				SourceDbInstanceArn: pulumi.String("arn:aws:rds:us-west-2:123456789012:db:mydatabase"),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Example including a RDS DB instance
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws"
//	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/kms"
//	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/rds"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := aws.NewProvider(ctx, "replica", &aws.ProviderArgs{
//				Region: pulumi.String("us-west-2"),
//			})
//			if err != nil {
//				return err
//			}
//			defaultInstance, err := rds.NewInstance(ctx, "defaultInstance", &rds.InstanceArgs{
//				AllocatedStorage:      pulumi.Int(10),
//				Identifier:            pulumi.String("mydb"),
//				Engine:                pulumi.String("postgres"),
//				EngineVersion:         pulumi.String("13.4"),
//				InstanceClass:         pulumi.String("db.t3.micro"),
//				DbName:                pulumi.String("mydb"),
//				Username:              pulumi.String("masterusername"),
//				Password:              pulumi.String("mustbeeightcharacters"),
//				BackupRetentionPeriod: pulumi.Int(7),
//				StorageEncrypted:      pulumi.Bool(true),
//				SkipFinalSnapshot:     pulumi.Bool(true),
//			})
//			if err != nil {
//				return err
//			}
//			defaultKey, err := kms.NewKey(ctx, "defaultKey", &kms.KeyArgs{
//				Description: pulumi.String("Encryption key for automated backups"),
//			}, pulumi.Provider(aws.Replica))
//			if err != nil {
//				return err
//			}
//			_, err = rds.NewInstanceAutomatedBackupsReplication(ctx, "defaultInstanceAutomatedBackupsReplication", &rds.InstanceAutomatedBackupsReplicationArgs{
//				SourceDbInstanceArn: defaultInstance.Arn,
//				KmsKeyId:            defaultKey.Arn,
//			}, pulumi.Provider(aws.Replica))
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// Using `pulumi import`, import RDS instance automated backups replication using the `arn`. For example:
//
// ```sh
//
//	$ pulumi import aws:rds/instanceAutomatedBackupsReplication:InstanceAutomatedBackupsReplication default arn:aws:rds:us-east-1:123456789012:auto-backup:ab-faaa2mgdj1vmp4xflr7yhsrmtbtob7ltrzzz2my
//
// ```
type InstanceAutomatedBackupsReplication struct {
	pulumi.CustomResourceState

	// The AWS KMS key identifier for encryption of the replicated automated backups. The KMS key ID is the Amazon Resource Name (ARN) for the KMS encryption key in the destination AWS Region, for example, `arn:aws:kms:us-east-1:123456789012:key/AKIAIOSFODNN7EXAMPLE`.
	KmsKeyId pulumi.StringOutput `pulumi:"kmsKeyId"`
	// A URL that contains a [Signature Version 4](https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html) signed request for the [`StartDBInstanceAutomatedBackupsReplication`](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_StartDBInstanceAutomatedBackupsReplication.html) action to be called in the AWS Region of the source DB instance.
	PreSignedUrl pulumi.StringPtrOutput `pulumi:"preSignedUrl"`
	// The retention period for the replicated automated backups, defaults to `7`.
	RetentionPeriod pulumi.IntPtrOutput `pulumi:"retentionPeriod"`
	// The Amazon Resource Name (ARN) of the source DB instance for the replicated automated backups, for example, `arn:aws:rds:us-west-2:123456789012:db:mydatabase`.
	SourceDbInstanceArn pulumi.StringOutput `pulumi:"sourceDbInstanceArn"`
}

// NewInstanceAutomatedBackupsReplication registers a new resource with the given unique name, arguments, and options.
func NewInstanceAutomatedBackupsReplication(ctx *pulumi.Context,
	name string, args *InstanceAutomatedBackupsReplicationArgs, opts ...pulumi.ResourceOption) (*InstanceAutomatedBackupsReplication, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.SourceDbInstanceArn == nil {
		return nil, errors.New("invalid value for required argument 'SourceDbInstanceArn'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource InstanceAutomatedBackupsReplication
	err := ctx.RegisterResource("aws:rds/instanceAutomatedBackupsReplication:InstanceAutomatedBackupsReplication", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetInstanceAutomatedBackupsReplication gets an existing InstanceAutomatedBackupsReplication resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetInstanceAutomatedBackupsReplication(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *InstanceAutomatedBackupsReplicationState, opts ...pulumi.ResourceOption) (*InstanceAutomatedBackupsReplication, error) {
	var resource InstanceAutomatedBackupsReplication
	err := ctx.ReadResource("aws:rds/instanceAutomatedBackupsReplication:InstanceAutomatedBackupsReplication", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering InstanceAutomatedBackupsReplication resources.
type instanceAutomatedBackupsReplicationState struct {
	// The AWS KMS key identifier for encryption of the replicated automated backups. The KMS key ID is the Amazon Resource Name (ARN) for the KMS encryption key in the destination AWS Region, for example, `arn:aws:kms:us-east-1:123456789012:key/AKIAIOSFODNN7EXAMPLE`.
	KmsKeyId *string `pulumi:"kmsKeyId"`
	// A URL that contains a [Signature Version 4](https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html) signed request for the [`StartDBInstanceAutomatedBackupsReplication`](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_StartDBInstanceAutomatedBackupsReplication.html) action to be called in the AWS Region of the source DB instance.
	PreSignedUrl *string `pulumi:"preSignedUrl"`
	// The retention period for the replicated automated backups, defaults to `7`.
	RetentionPeriod *int `pulumi:"retentionPeriod"`
	// The Amazon Resource Name (ARN) of the source DB instance for the replicated automated backups, for example, `arn:aws:rds:us-west-2:123456789012:db:mydatabase`.
	SourceDbInstanceArn *string `pulumi:"sourceDbInstanceArn"`
}

type InstanceAutomatedBackupsReplicationState struct {
	// The AWS KMS key identifier for encryption of the replicated automated backups. The KMS key ID is the Amazon Resource Name (ARN) for the KMS encryption key in the destination AWS Region, for example, `arn:aws:kms:us-east-1:123456789012:key/AKIAIOSFODNN7EXAMPLE`.
	KmsKeyId pulumi.StringPtrInput
	// A URL that contains a [Signature Version 4](https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html) signed request for the [`StartDBInstanceAutomatedBackupsReplication`](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_StartDBInstanceAutomatedBackupsReplication.html) action to be called in the AWS Region of the source DB instance.
	PreSignedUrl pulumi.StringPtrInput
	// The retention period for the replicated automated backups, defaults to `7`.
	RetentionPeriod pulumi.IntPtrInput
	// The Amazon Resource Name (ARN) of the source DB instance for the replicated automated backups, for example, `arn:aws:rds:us-west-2:123456789012:db:mydatabase`.
	SourceDbInstanceArn pulumi.StringPtrInput
}

func (InstanceAutomatedBackupsReplicationState) ElementType() reflect.Type {
	return reflect.TypeOf((*instanceAutomatedBackupsReplicationState)(nil)).Elem()
}

type instanceAutomatedBackupsReplicationArgs struct {
	// The AWS KMS key identifier for encryption of the replicated automated backups. The KMS key ID is the Amazon Resource Name (ARN) for the KMS encryption key in the destination AWS Region, for example, `arn:aws:kms:us-east-1:123456789012:key/AKIAIOSFODNN7EXAMPLE`.
	KmsKeyId *string `pulumi:"kmsKeyId"`
	// A URL that contains a [Signature Version 4](https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html) signed request for the [`StartDBInstanceAutomatedBackupsReplication`](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_StartDBInstanceAutomatedBackupsReplication.html) action to be called in the AWS Region of the source DB instance.
	PreSignedUrl *string `pulumi:"preSignedUrl"`
	// The retention period for the replicated automated backups, defaults to `7`.
	RetentionPeriod *int `pulumi:"retentionPeriod"`
	// The Amazon Resource Name (ARN) of the source DB instance for the replicated automated backups, for example, `arn:aws:rds:us-west-2:123456789012:db:mydatabase`.
	SourceDbInstanceArn string `pulumi:"sourceDbInstanceArn"`
}

// The set of arguments for constructing a InstanceAutomatedBackupsReplication resource.
type InstanceAutomatedBackupsReplicationArgs struct {
	// The AWS KMS key identifier for encryption of the replicated automated backups. The KMS key ID is the Amazon Resource Name (ARN) for the KMS encryption key in the destination AWS Region, for example, `arn:aws:kms:us-east-1:123456789012:key/AKIAIOSFODNN7EXAMPLE`.
	KmsKeyId pulumi.StringPtrInput
	// A URL that contains a [Signature Version 4](https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html) signed request for the [`StartDBInstanceAutomatedBackupsReplication`](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_StartDBInstanceAutomatedBackupsReplication.html) action to be called in the AWS Region of the source DB instance.
	PreSignedUrl pulumi.StringPtrInput
	// The retention period for the replicated automated backups, defaults to `7`.
	RetentionPeriod pulumi.IntPtrInput
	// The Amazon Resource Name (ARN) of the source DB instance for the replicated automated backups, for example, `arn:aws:rds:us-west-2:123456789012:db:mydatabase`.
	SourceDbInstanceArn pulumi.StringInput
}

func (InstanceAutomatedBackupsReplicationArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*instanceAutomatedBackupsReplicationArgs)(nil)).Elem()
}

type InstanceAutomatedBackupsReplicationInput interface {
	pulumi.Input

	ToInstanceAutomatedBackupsReplicationOutput() InstanceAutomatedBackupsReplicationOutput
	ToInstanceAutomatedBackupsReplicationOutputWithContext(ctx context.Context) InstanceAutomatedBackupsReplicationOutput
}

func (*InstanceAutomatedBackupsReplication) ElementType() reflect.Type {
	return reflect.TypeOf((**InstanceAutomatedBackupsReplication)(nil)).Elem()
}

func (i *InstanceAutomatedBackupsReplication) ToInstanceAutomatedBackupsReplicationOutput() InstanceAutomatedBackupsReplicationOutput {
	return i.ToInstanceAutomatedBackupsReplicationOutputWithContext(context.Background())
}

func (i *InstanceAutomatedBackupsReplication) ToInstanceAutomatedBackupsReplicationOutputWithContext(ctx context.Context) InstanceAutomatedBackupsReplicationOutput {
	return pulumi.ToOutputWithContext(ctx, i).(InstanceAutomatedBackupsReplicationOutput)
}

// InstanceAutomatedBackupsReplicationArrayInput is an input type that accepts InstanceAutomatedBackupsReplicationArray and InstanceAutomatedBackupsReplicationArrayOutput values.
// You can construct a concrete instance of `InstanceAutomatedBackupsReplicationArrayInput` via:
//
//	InstanceAutomatedBackupsReplicationArray{ InstanceAutomatedBackupsReplicationArgs{...} }
type InstanceAutomatedBackupsReplicationArrayInput interface {
	pulumi.Input

	ToInstanceAutomatedBackupsReplicationArrayOutput() InstanceAutomatedBackupsReplicationArrayOutput
	ToInstanceAutomatedBackupsReplicationArrayOutputWithContext(context.Context) InstanceAutomatedBackupsReplicationArrayOutput
}

type InstanceAutomatedBackupsReplicationArray []InstanceAutomatedBackupsReplicationInput

func (InstanceAutomatedBackupsReplicationArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*InstanceAutomatedBackupsReplication)(nil)).Elem()
}

func (i InstanceAutomatedBackupsReplicationArray) ToInstanceAutomatedBackupsReplicationArrayOutput() InstanceAutomatedBackupsReplicationArrayOutput {
	return i.ToInstanceAutomatedBackupsReplicationArrayOutputWithContext(context.Background())
}

func (i InstanceAutomatedBackupsReplicationArray) ToInstanceAutomatedBackupsReplicationArrayOutputWithContext(ctx context.Context) InstanceAutomatedBackupsReplicationArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(InstanceAutomatedBackupsReplicationArrayOutput)
}

// InstanceAutomatedBackupsReplicationMapInput is an input type that accepts InstanceAutomatedBackupsReplicationMap and InstanceAutomatedBackupsReplicationMapOutput values.
// You can construct a concrete instance of `InstanceAutomatedBackupsReplicationMapInput` via:
//
//	InstanceAutomatedBackupsReplicationMap{ "key": InstanceAutomatedBackupsReplicationArgs{...} }
type InstanceAutomatedBackupsReplicationMapInput interface {
	pulumi.Input

	ToInstanceAutomatedBackupsReplicationMapOutput() InstanceAutomatedBackupsReplicationMapOutput
	ToInstanceAutomatedBackupsReplicationMapOutputWithContext(context.Context) InstanceAutomatedBackupsReplicationMapOutput
}

type InstanceAutomatedBackupsReplicationMap map[string]InstanceAutomatedBackupsReplicationInput

func (InstanceAutomatedBackupsReplicationMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*InstanceAutomatedBackupsReplication)(nil)).Elem()
}

func (i InstanceAutomatedBackupsReplicationMap) ToInstanceAutomatedBackupsReplicationMapOutput() InstanceAutomatedBackupsReplicationMapOutput {
	return i.ToInstanceAutomatedBackupsReplicationMapOutputWithContext(context.Background())
}

func (i InstanceAutomatedBackupsReplicationMap) ToInstanceAutomatedBackupsReplicationMapOutputWithContext(ctx context.Context) InstanceAutomatedBackupsReplicationMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(InstanceAutomatedBackupsReplicationMapOutput)
}

type InstanceAutomatedBackupsReplicationOutput struct{ *pulumi.OutputState }

func (InstanceAutomatedBackupsReplicationOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**InstanceAutomatedBackupsReplication)(nil)).Elem()
}

func (o InstanceAutomatedBackupsReplicationOutput) ToInstanceAutomatedBackupsReplicationOutput() InstanceAutomatedBackupsReplicationOutput {
	return o
}

func (o InstanceAutomatedBackupsReplicationOutput) ToInstanceAutomatedBackupsReplicationOutputWithContext(ctx context.Context) InstanceAutomatedBackupsReplicationOutput {
	return o
}

// The AWS KMS key identifier for encryption of the replicated automated backups. The KMS key ID is the Amazon Resource Name (ARN) for the KMS encryption key in the destination AWS Region, for example, `arn:aws:kms:us-east-1:123456789012:key/AKIAIOSFODNN7EXAMPLE`.
func (o InstanceAutomatedBackupsReplicationOutput) KmsKeyId() pulumi.StringOutput {
	return o.ApplyT(func(v *InstanceAutomatedBackupsReplication) pulumi.StringOutput { return v.KmsKeyId }).(pulumi.StringOutput)
}

// A URL that contains a [Signature Version 4](https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html) signed request for the [`StartDBInstanceAutomatedBackupsReplication`](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_StartDBInstanceAutomatedBackupsReplication.html) action to be called in the AWS Region of the source DB instance.
func (o InstanceAutomatedBackupsReplicationOutput) PreSignedUrl() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *InstanceAutomatedBackupsReplication) pulumi.StringPtrOutput { return v.PreSignedUrl }).(pulumi.StringPtrOutput)
}

// The retention period for the replicated automated backups, defaults to `7`.
func (o InstanceAutomatedBackupsReplicationOutput) RetentionPeriod() pulumi.IntPtrOutput {
	return o.ApplyT(func(v *InstanceAutomatedBackupsReplication) pulumi.IntPtrOutput { return v.RetentionPeriod }).(pulumi.IntPtrOutput)
}

// The Amazon Resource Name (ARN) of the source DB instance for the replicated automated backups, for example, `arn:aws:rds:us-west-2:123456789012:db:mydatabase`.
func (o InstanceAutomatedBackupsReplicationOutput) SourceDbInstanceArn() pulumi.StringOutput {
	return o.ApplyT(func(v *InstanceAutomatedBackupsReplication) pulumi.StringOutput { return v.SourceDbInstanceArn }).(pulumi.StringOutput)
}

type InstanceAutomatedBackupsReplicationArrayOutput struct{ *pulumi.OutputState }

func (InstanceAutomatedBackupsReplicationArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*InstanceAutomatedBackupsReplication)(nil)).Elem()
}

func (o InstanceAutomatedBackupsReplicationArrayOutput) ToInstanceAutomatedBackupsReplicationArrayOutput() InstanceAutomatedBackupsReplicationArrayOutput {
	return o
}

func (o InstanceAutomatedBackupsReplicationArrayOutput) ToInstanceAutomatedBackupsReplicationArrayOutputWithContext(ctx context.Context) InstanceAutomatedBackupsReplicationArrayOutput {
	return o
}

func (o InstanceAutomatedBackupsReplicationArrayOutput) Index(i pulumi.IntInput) InstanceAutomatedBackupsReplicationOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *InstanceAutomatedBackupsReplication {
		return vs[0].([]*InstanceAutomatedBackupsReplication)[vs[1].(int)]
	}).(InstanceAutomatedBackupsReplicationOutput)
}

type InstanceAutomatedBackupsReplicationMapOutput struct{ *pulumi.OutputState }

func (InstanceAutomatedBackupsReplicationMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*InstanceAutomatedBackupsReplication)(nil)).Elem()
}

func (o InstanceAutomatedBackupsReplicationMapOutput) ToInstanceAutomatedBackupsReplicationMapOutput() InstanceAutomatedBackupsReplicationMapOutput {
	return o
}

func (o InstanceAutomatedBackupsReplicationMapOutput) ToInstanceAutomatedBackupsReplicationMapOutputWithContext(ctx context.Context) InstanceAutomatedBackupsReplicationMapOutput {
	return o
}

func (o InstanceAutomatedBackupsReplicationMapOutput) MapIndex(k pulumi.StringInput) InstanceAutomatedBackupsReplicationOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *InstanceAutomatedBackupsReplication {
		return vs[0].(map[string]*InstanceAutomatedBackupsReplication)[vs[1].(string)]
	}).(InstanceAutomatedBackupsReplicationOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*InstanceAutomatedBackupsReplicationInput)(nil)).Elem(), &InstanceAutomatedBackupsReplication{})
	pulumi.RegisterInputType(reflect.TypeOf((*InstanceAutomatedBackupsReplicationArrayInput)(nil)).Elem(), InstanceAutomatedBackupsReplicationArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*InstanceAutomatedBackupsReplicationMapInput)(nil)).Elem(), InstanceAutomatedBackupsReplicationMap{})
	pulumi.RegisterOutputType(InstanceAutomatedBackupsReplicationOutput{})
	pulumi.RegisterOutputType(InstanceAutomatedBackupsReplicationArrayOutput{})
	pulumi.RegisterOutputType(InstanceAutomatedBackupsReplicationMapOutput{})
}
